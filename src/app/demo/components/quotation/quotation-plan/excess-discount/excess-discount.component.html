<p-toast></p-toast>
<div class="card p-1">
    <div class="col-md-12 col-lg-12 col-12 mt-2 p-0">
        <div class="grid ml-3 mr-3" *ngIf="customerDetails">
            <div class="lg:col-12 md:col-12 col-12 ui-bg-cu">
                <div class="flex flex-wrap justify-content-between">
                    <div>
                        <h3 class="ui-cu-header"><i class="fa fa-user"></i>&nbsp;{{'Modify.CustomerDetails' | translate}}</h3>
                        <div *ngIf="promoCode" style="background-color: #333b85;padding-left: 5px;padding-right: 5px;">
                            <span class="spancommon" style="font-weight: 600;color: #fff;">PromoCode - {{promoCode}}</span>
                        </div>
                    </div>
                    <div>
                        <div class="flex flex-wrap justify-content-end">
                            <div *ngIf="quoteNo"><b>{{'PREMIUM.QuoteNo' | translate}} - <span class="primaryTextColor bolder">{{quoteNo}}</span></b>&nbsp;|&nbsp;</div>
                            <div *ngIf="quoteRefNo"><b>{{'PREMIUM.ReferenceNo' | translate}} - <span class="primaryTextColor bolder">{{quoteRefNo}}</span></b></div>
                        </div>
                    </div>
                    
                </div>
                <div class="flex flex-wrap">
                    <div class="lg:col-3 md:col-3 col-12">
                        <label class="input-form-label ui-b">{{'Modify.ClientName' | translate}}</label><br>
                        <span class="spancommon span_font_size">{{title}} &nbsp; {{clientName}}</span>
                    </div>
                    <div class="lg:col-3 md:col-3 col-12">
                        <label class="input-form-label ui-b">{{'Modify.ClientType' | translate}}</label><br>
                        <span class="spancommon span_font_size">{{customerDetails.PolicyHolderTypeDesc}}</span>
                    </div>
                    <div class="lg:col-3 md:col-3 col-12">
                        <label class="input-form-label ui-b">{{'Modify.MobileNo' | translate}}</label><br>
                        <span class="spancommon span_font_size">{{mobileNo}}</span>
                    </div>
                    <div class="lg:col-3 md:col-3 col-12">
                        <label class="input-form-label ui-b">{{'Modify.IDNumber' | translate}}</label><br>
                        <span class="spancommon span_font_size">{{idNumber}}</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="grid p-0 mt-2 ml-3 mr-3" *ngIf="!otpSection && coverSection">
        <div
            [ngClass]="vehicleDetailsList.length==1 ? 'lg:col-12 md:col-12 sm:col-12 col-12  p-0':'lg:col-9 md:col-9 sm:col-9 col-12  p-0'" style="margin-top:12px">
            <div class="flex flex-wrap justify-content-between">
                <div>
                    <h3 class="ui-cu-header"><i class="fas fa-book mx-1"></i>&nbsp;{{'Modify.CoverageDetails' | translate}}</h3>
                </div>
                <div>
                    <ng-container>
                        <p-button label="C" styleClass="mr-3 mb-3 p-button-outlined"
                            (click)="ClausesStatuss()"></p-button>&nbsp;
                        <!-- <button class="btn clausebutton btn-sm" data-toggle="tooltip" data-placement="top"
                        title="Clauses"
                            style="font-family: var(--our-font-family-new)!important;font-weight: 600;"
                            >C</button> -->
                    </ng-container>
                    <ng-container>
                        <p-button label="E" styleClass="mr-3 mb-3 p-button-outlined"
                            (click)="ExclusioStatuss()"></p-button>&nbsp;
                        &nbsp;
                    </ng-container>
                    <ng-container>
                        <p-button label="W" styleClass="mr-3 mb-3 p-button-outlined"
                            (click)="WarrantyStatuss()"></p-button>&nbsp;
                        <!-- <button class="btn clausebutton btn-sm" data-toggle="tooltip" data-placement="top"
                        title="Warranties"
                            style="font-family: var(--our-font-family-new)!important;font-weight: 600;"
                            >W</button> -->
                    </ng-container>
                    <ng-container *ngIf="insuranceId=='100020'">
                        <p-button [label]="'Modify.FactorDetails' | translate" styleClass="mr-3 mb-3 p-button-outlined"
                            (click)="onViewFactorDetails(factorView)"></p-button>&nbsp;
                        <!-- <button class="btn clausebutton btn-sm" data-toggle="tooltip" data-placement="top"
                        title="Factor Details"
                            style="font-family: var(--our-font-family-new)!important;font-weight: 600;"
                            (click)="onViewFactorDetails(factorView)"><u>Factor Details</u></button> -->
                    </ng-container>
                </div>
            </div>
            <div class="flex flex-wrap p-0">
                <div class="lg:col-4 md:col-4 col-12 xl:col-4">
                    <div class="input-control-container"
                        *ngIf="vehicleDetailsList.length!=0 && vehicleDetailsList.length!=1">
                        <ng-select class="input-form-select" [searchable]="true" [clearable]="true"
                            [(ngModel)]="selectedRowData" (change)="onSelectSection($event)">
                            <ng-container *ngFor="let menu of vehicleDetailsList">
                                <ng-option [value]="menu">
                                    <ng-container *ngIf="productId=='5' || productId=='46'">
                                        <span class="spancommon" style="color:navy;font-size: 1rem;">
                                            <ng-container *ngIf="menu.RiskDetails.PolicyTypeDesc && insuranceId!='100027' && insuranceId!='100040' && insuranceId!='100042'">
                                                {{menu.RiskDetails.PolicyTypeDesc}} &nbsp;|&nbsp;
                                            </ng-container>
                                            <ng-container *ngIf="menu.SectionName">
                                                {{menu.SectionName}}  &nbsp;|&nbsp;
                                            </ng-container>
                                             {{ menu.RiskDetails.Registrationnumber }} &nbsp;</span>

                                    </ng-container>
                                    <ng-container *ngIf="productId=='4'">
                                        <ng-container *ngIf="menu.RiskDetails.TravelId=='1'">
                                            <span class="spancommon"
                                                style="color:navy;font-size: 1rem;">{{'Modify.Kids' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                        </ng-container>
                                        <ng-container *ngIf="menu.RiskDetails.TravelId=='2'">
                                            <span class="spancommon"
                                                style="color:navy;font-size: 1rem;">{{'Modify.Adults' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                        </ng-container>
                                        <ng-container *ngIf="menu.RiskDetails.TravelId=='3'">
                                            <span class="spancommon"
                                                style="color:navy;font-size: 1rem;">{{'Modify.Seniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                        </ng-container>
                                        <ng-container *ngIf="menu.RiskDetails.TravelId=='4'">
                                            <span class="spancommon" style="color:navy;font-size: 1rem;">{{'Modify.SuperSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                        </ng-container>
                                        <ng-container *ngIf="menu.RiskDetails.TravelId=='5'">
                                            <span class="spancommon" style="color:navy;font-size: 1rem;">{{'Modify.GrandSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                        </ng-container>
                                        <span class="spancommon" style="color:navy;font-size: 1rem;"> &nbsp;|&nbsp;
                                            {{menu.RiskDetails.DestinationCountry}}
                                            &nbsp;|&nbsp; {{ menu.RiskDetails.TravelStartDate }} &nbsp;~&nbsp; {{
                                            menu.RiskDetails.TravelEndDate }}</span>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="productId!='59' && productId!='4' && productId!='5' && productId!='19' && productId!='14' && productId!='32'">
                                        <span class="spancommon" style="color:navy;font-size: 1rem;">
                                            {{menu.LocationName}}
                                        </span>
                                    </ng-container>
                                    <ng-container *ngIf="productId=='59'">
                                        <span class="spancommon" style="color:navy;font-size: 1rem;">
                                            {{menu.LocationName}}
                                        </span>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="productId=='19' || productId=='14' || productId=='32'">

                                        <span class="spancommon" style="color:navy;font-size: 1rem;">
                                            {{menu.LocationName}}
                                        </span>
                                    </ng-container>
                                </ng-option>
                            </ng-container>


                        </ng-select>
                    </div>
                    
                    <div *ngIf="vehicleDetailsList.length==1" style="padding-left: 3px;padding-top: 4px;">
                        
                        <ng-container *ngFor="let menu of vehicleDetailsList">
                            <ng-container *ngIf="productId=='5'">
                                <span class="spancommon" style="color:navy;font-size: 1rem;font-weight: 600;">
                                    {{ menu.RiskDetails.Registrationnumber }} &nbsp;|&nbsp;
                                    {{menu.RiskDetails.PolicyTypeDesc}} &nbsp; </span>

                            </ng-container>
                            <ng-container *ngIf="productId=='4'">
                                <ng-container *ngIf="menu.RiskDetails.TravelId=='1'">
                                    <span class="spancommon"
                                        style="color:navy;font-size: 1rem;font-weight: 600;">{{'Modify.Kids' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                </ng-container>
                                <ng-container *ngIf="menu.RiskDetails.TravelId=='2'">
                                    <span class="spancommon"
                                        style="color:navy;font-size: 1rem;font-weight: 600;">{{'Modify.Adults' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                </ng-container>
                                <ng-container *ngIf="menu.RiskDetails.TravelId=='3'">
                                    <span class="spancommon"
                                        style="color:navy;font-size: 1rem;font-weight: 600;">{{'Modify.Seniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                </ng-container>
                                <ng-container *ngIf="menu.RiskDetails.TravelId=='4'">
                                    <span class="spancommon" style="color:navy;font-size: 1rem;font-weight: 600;">{{'Modify.SuperSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                </ng-container>
                                <ng-container *ngIf="menu.RiskDetails.TravelId=='5'">
                                    <span class="spancommon" style="color:navy;font-size: 1rem;font-weight: 600;">{{'Modify.GrandSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                </ng-container>
                                <span class="spancommon" style="color:navy;font-size: 1rem;font-weight: 600;">
                                    &nbsp;|&nbsp;
                                    {{menu.RiskDetails.DestinationCountry}}
                                    &nbsp;|&nbsp; {{ menu.RiskDetails.TravelStartDate }} &nbsp;~&nbsp; {{
                                    menu.RiskDetails.TravelEndDate }}</span>
                            </ng-container>
                            <ng-container *ngIf="productId=='59'">
                                <span class="spancommon" style="color:navy;font-size: 1rem;">
                                    {{menu.LocationName}}
                                </span>
                            </ng-container>
                            <ng-container
                                *ngIf="productId!='59' && productId!='4' && productId!='5' && productId!='19' && productId!='14' && productId!='32'">
                                <span class="spancommon" style="color:navy;font-size: 1rem;font-weight: 600;">
                                    {{productName}}
                                </span>
                            </ng-container>
                            <ng-container
                                *ngIf="productId=='19' || productId=='14' || productId=='32'">

                                <span class="spancommon" style="color:navy;font-size: 1rem;font-weight: 600;">
                                    {{menu.SectionName}}
                                </span>
                            </ng-container>
                        </ng-container>
                    </div>
                </div>
                <div class="col-12 col-md-4 col-lg-4 col-xl-4 mt-3" *ngIf="selectedVehicleList.length!=0">
                    <span class="spancommon text-end"
                        style="color:navy;padding:10px !important;border-radius:10px;font-size: 1rem;background-color: #fd7e14!important;"
                        *ngIf="selectedVehicleList[0].Status=='D' && productId=='5'">{{'Modify.RemovedVehicle' | translate}}</span>
                    <span class="spancommon text-end"
                        style="color:navy;padding:10px !important;border-radius:10px;font-size: 1rem;background-color: #fd7e14!important;"
                        *ngIf="endorsementSection && endorsementId==846 && selectedVehicleList[0].Status=='D'">{{'Modify.RemovedOccupation' | translate}}</span>
                    <span class="spancommon text-end" *ngIf="selectedVehicleList[0].ReferralList.length!=0"
                        style="color:navy;padding:7px !important;border-radius:10px;font-size: 1rem;background-color: #fd7e14!important;">{{'Modify.Refferal' | translate}}</span>
                </div>
                <!-- <div class="col-12 col-md-3 col-lg-3 col-xl-3 mt-5 mr-2" *ngIf="commissionValue">
                    <label class="custom-control-label" style="float: right !important;font-size: 17px !important;"
                   >Commission&nbsp;(<b>{{commissionValue}} %</b>)</label>&nbsp;&nbsp;
                </div> -->
            </div>
            <div class="grid mb-3 ml-3 mr-3" style="min-height: 385px !important;">
                <div class="lg:col-12 md:col-12 xl:col-12 col-12" style="padding: 0 !important;">
                    <ng-container *ngFor="let menu of selectedVehicleList; let i = index">
                        <div class="menu">
                            <div class="display1">
                                <div class=" referal_remark" *ngIf="menu.ReferralList.length!=0">
                                    <div>
                                        <b class="text-danger referal_data">{{'Modify.ReferralRemarks'}}</b><br>
                                    </div>
                                    <div class="mt-1">
                                        <ul class="b listrefereal" *ngFor="let doc of menu.ReferralList">
                                            <li class="p-0 li-custom"><i class="fa-solid fa-circle-check"
                                                    style="position: relative; right: 1rem;"></i><span
                                                    class="spancommon" style="font-size: 0.9rem;">{{doc}}</span></li>
                                        </ul>
                                    </div>
                                </div>
                                <ng-container>


                                </ng-container>
                            </div>
                            <div class="display2">
                                <ng-container *ngIf="productId=='5'">
                                    <span class="spancommon" style="color:navy;font-size: 1rem;">
                                        <ng-container *ngIf="menu.RiskDetails.PolicyTypeDesc  && insuranceId!='100027' && insuranceId!='100040'">
                                            {{menu.RiskDetails.PolicyTypeDesc}} &nbsp;|&nbsp;
                                        </ng-container>
                                        <ng-container *ngIf="menu.SectionName">
                                            {{menu.SectionName}}  &nbsp;|&nbsp;
                                        </ng-container> 
                                        {{ menu.RiskDetails.Registrationnumber }}
                                    </span>

                                    <ng-container *ngIf="menu.Status!='D'">
                                        <button class="fa fa-eye"
                                            style="border: none;border-radius: 100%; padding-top: 6px;padding-bottom: 6px;"
                                            (click)="htmlcard(menu,mymodal)"></button>
                                        <span style="padding-left:10px;">|</span>&nbsp;
                                        <button class="fas fa-edit"
                                            style="border: none;border-radius: 100%;padding-top: 6px; padding-bottom: 6px;"
                                            (click)="editcard(menu,mymodalEdit)"></button>&nbsp;
                                    </ng-container>

                                </ng-container>
                                <ng-container *ngIf="productId=='4'">
                                    <ng-container *ngIf="menu.RiskDetails.TravelId=='1'">
                                        <span class="spancommon"
                                            style="color:navy;font-size: 1rem;">{{'Modify.Kids' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                    </ng-container>
                                    <ng-container *ngIf="menu.RiskDetails.TravelId=='2'">
                                        <span class="spancommon"
                                            style="color:navy;font-size: 1rem;">{{'Modify.Adults' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                    </ng-container>
                                    <ng-container *ngIf="menu.RiskDetails.TravelId=='3'">
                                        <span class="spancommon"
                                            style="color:navy;font-size: 1rem;">{{'Modify.Seniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                    </ng-container>
                                    <ng-container *ngIf="menu.RiskDetails.TravelId=='4'">
                                        <span class="spancommon" style="color:navy;font-size: 1rem;">{{'Modify.SuperSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                    </ng-container>
                                    <ng-container *ngIf="menu.RiskDetails.TravelId=='5'">
                                        <span class="spancommon" style="color:navy;font-size: 1rem;">{{'Modify.GrandSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                    </ng-container>
                                    <span class="spancommon" style="color:navy;font-size: 1rem;"> &nbsp;|&nbsp;
                                        {{menu.RiskDetails.DestinationCountry}}
                                        &nbsp;|&nbsp; {{ menu.RiskDetails.TravelStartDate }} &nbsp;~&nbsp; {{
                                        menu.RiskDetails.TravelEndDate }}</span>
                                </ng-container>
                                <ng-container *ngIf="productId=='59'">
                                    <span class="spancommon" style="color:navy;font-size: 1rem;">
                                        {{menu.LocationName}}
                                    </span>
                                </ng-container>
                                <ng-container
                                    *ngIf="productId=='19' || productId=='14' || productId=='32'">
                                    <span class="spancommon" style="color:navy;font-size: 1rem;">
                                        {{menu.SectionName}}
                                    </span>
                                </ng-container>
                                <ng-container
                                    *ngIf="productId!='59' && productId!='4' && productId!='5' && productId!='19' && productId!='14' && productId!='32'">
                                    <span class="spancommon" style="color:navy;font-size: 1rem;"> {{productName}}
                                    </span>
                                </ng-container>
                                <ng-container *ngIf="menu.ReferralList.length!=0">
                                    <span class="spancommon"
                                        style="color:navy;padding:10px !important;border-radius:10px;font-size: 1rem;background-color: #fd7e14!important;">Refferal</span>
                                </ng-container>
                                <ng-container>
                                    <span class="spancommon"
                                        style="color:navy;padding:10px !important;border-radius:10px;font-size: 1rem;background-color: #fd7e14!important;"
                                        *ngIf="menu.Status=='D'">{{'Modify.RemovedVehicle' | translate}}</span>
                                </ng-container>
                            </div>

                            <div class="submenu " #submenu *ngIf="CoveList">
                                <div class=" p-3 ui-cards display1">
                                    <table mat-table [dataSource]="getFilterCoverList(menu)" class="outerTable"
                                        multiTemplateDataRows matSort>
                                        <ng-container *ngIf="checkReferralStatus()">
                                            <ng-container matColumnDef="header-row-first-group">
                                                <th mat-header-cell *matHeaderCellDef class="outerHead mat-header-cell"
                                                    [style.text-align]="center" [attr.colspan]="3">

                                                </th>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="!checkReferralStatus()">
                                            <ng-container matColumnDef="header-row-first-group">
                                                <th mat-header-cell *matHeaderCellDef class="outerHead mat-header-cell"
                                                    [style.text-align]="center" [attr.colspan]="3">

                                                </th>
                                            </ng-container>
                                            <ng-container matColumnDef="header-row-second-group">
                                                <th mat-header-cell *matHeaderCellDef [attr.colspan]="6"
                                                    class="text-center outerHead mat-header-cell">{{'Modify.Premium' | translate}}</th>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngFor="let col of columnHeader; let i = index;"
                                            [matColumnDef]="col.key" [sticky]="i===0" [stickyEnd]="i === 10">

                                            <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                class="text-center outerHead mat-header-cell"
                                                style="white-space: normal !important;">&nbsp;
                                                <ng-container
                                                    *ngIf="columnHeader[i]['display']=='SumInsured' || columnHeader[i]['display']=='Minimum' || columnHeader[i]['display']=='After Discount' || columnHeader[i]['display']=='Included Tax'">
                                                    <ng-container *ngIf="columnHeader[i]['display']=='SumInsured'">
                                                        <ng-container *ngIf="productId!='42'">
                                                            <ng-container *ngIf="columnHeader[i]['display']!=''"> {{'Modify.'+columnHeader[i]["display"] | translate }}&nbsp;({{currencyCode}})</ng-container>
                                                           
                                                        </ng-container>
                                                        <ng-container *ngIf="productId=='42'">
                                                            {{'Modify.CoverageLimit' | translate}}&nbsp;({{currencyCode}})
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="columnHeader[i]['display']!='SumInsured'">
                                                        <ng-container *ngIf="columnHeader[i]['display']!=''">{{'Modify.'+columnHeader[i]["display"] | translate }}</ng-container>&nbsp;({{currencyCode}})
                                                    </ng-container>
                                                </ng-container>
                                                <ng-container *ngIf="columnHeader[i]['display']=='Rate'">
                                                    <ng-container *ngIf="productId=='42'">
                                                        {{ 'Modify.'+columnHeader[i]["display"] | translate }}&nbsp;({{currencyCode}})
                                                    </ng-container>
                                                    <ng-container *ngIf="productId!='42'">
                                                        {{ 'Modify.'+columnHeader[i]["display"] | translate}}&nbsp;(%)
                                                    </ng-container>
                                                </ng-container>
                                                <ng-container *ngIf="columnHeader[i]['display']=='Excess Percent'">
                                                    {{ 'Modify.Excess' | translate}}&nbsp;(%)
                                                </ng-container>
                                                <ng-container *ngIf="columnHeader[i]['display']=='Excess Amount'">
                                                    {{ 'Modify.Excess' | translate}}<br>({{currencyCode}})
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="columnHeader[i]['display']!='SumInsured' && columnHeader[i]['display']!='Referral' && columnHeader[i]['display']!='Excess Amount' && columnHeader[i]['display']!='Excess Percent' && columnHeader[i]['display']!='Rate' && columnHeader[i]['display']!='Minimum' && columnHeader[i]['display']!='After Discount' && columnHeader[i]['display']!='Included Tax'">
                                                    {{ 'Modify.'+columnHeader[i]["display"]  | translate}}
                                                </ng-container>
                                            </th>
                                            <td mat-cell *matCellDef="let element" class="customCell"
                                                [ngClass]="{'customRowBg': col.key=='CoverName' && element?.isReferal === 'Y'}">
                                                <ng-container *ngIf="!col.config; else hasConfig">
                                                    <ng-container *ngIf="col.key=='Status'">
                                                        <span *ngIf="element[col.key]=='Y'">Active</span>
                                                        <span *ngIf="element[col.key]!='Y'">DeActive</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='PremiumAfterDiscount'">
                                                        <ng-container *ngIf="(element.Endorsements!=null)">
                                                            &nbsp;&nbsp;
                                                            <!-- <p-button label="?" styleClass="btn maan-btn-blue btn-circle" (click)="setDiscountDetails(menu,element,discountModal)"></p-button> -->
                                                            <button type="button"
                                                                class="btn maan-btn-blue btn-circle-alt"
                                                                title="After Discount"
                                                                (click)="setDiscountDetails(menu,element,'discount')"><i
                                                                    class="fa fa-bookmark"
                                                                    aria-hidden="true"></i></button>
                                                            <div class="flex flex-wrap  justify-content-between">
                                                                <div></div>
                                                                <div>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='Y' && !endorseSIModification )  && element.DifferenceYN=='Y'">
                                                                        0
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='Y' && !endorseSIModification) && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=0 && element.DifferenceYN=='N'">
                                                                        {{
                                                                        element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax
                                                                        |commaseparator }}
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='N' || endorseSIModification) && !element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax  && (element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax==null || element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax==0)">
                                                                        0
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='N' || endorseSIModification )  && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=0 ">
                                                                        {{
                                                                        element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax
                                                                        |commaseparator }}
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="(element.Endorsements==null)">
                                                            <div class="flex flex-wrap  justify-content-between">
                                                                <div>
                                                                    <ng-container>

                                                                        &nbsp;&nbsp;
                                                                        <p-button label=""
                                                                            icon="pi pi-info-circle"
                                                                            styleClass="btn maan-btn-blue btn-circle"
                                                                            (click)="setDiscountDetails(menu,element,'discount')"></p-button>
                                                                        <!-- <button type="button"
                                                                            class="btn maan-btn-blue btn-circle"
                                                                            (click)="setDiscountDetails(menu,element,discountModal)">?
                                                                        </button> -->
                                                                    </ng-container>
                                                                </div>
                                                                <div>
                                                                    <ng-container
                                                                        *ngIf="element[col.key]==null || element[col.key]==0">
                                                                        0
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="element[col.key]!=null || element[col.key]!=0">
                                                                        <span>{{ element[col.key]|commaseparator }}
                                                                        </span>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </ng-container>

                                                    </ng-container>

                                                    <ng-container *ngIf="col.key=='PremiumIncludedTax'">
                                                        <ng-container *ngIf="(element.Endorsements!=null)">
                                                            <ng-container *ngIf="(element.Endorsements.length!=0)">
                                                                <ng-template #endorseCard>
                                                                    <div
                                                                        class="popover-card customTemplate shawdowcustom ">
                                                                        <div class="card-header" status="warning">
                                                                            <div
                                                                                class="flex flex-wrap  justify-content-between">
                                                                                <div>
                                                                                    Endorsement Details!
                                                                                </div>
                                                                                <div>
                                                                                    No.Of.Endorsement ~
                                                                                    {{endorsementDetails?.EndtCount}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card-body p-0">

                                                                            <div class="mt-1"
                                                                                style="background-color: #acbf8e;border:1px solid grey;padding: 4px;border-radius: 5px;">
                                                                                <!-- <span class="spancommon span_font_size"><b>Description</b>&nbsp;:&nbsp;</span> -->

                                                                                <span
                                                                                    class="spancommon span_font_size">{{endorsementDetails?.EndorsementDesc}}</span>
                                                                            </div>
                                                                            <ul class="list-group">

                                                                                <!-- <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">Current
                                                                                            Premium</span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="element.PremiumExcluedTax==null || element.PremiumExcluedTax==0"><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="element.PremiumExcluedTax!=null && element.PremiumExcluedTax!=0"><b>{{element.PremiumExcluedTax
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li>
                                                                                <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">Previous
                                                                                            Premium</span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumAfterDiscount==null || endorsementDetails?.PremiumAfterDiscount==0"><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumAfterDiscount!=null && endorsementDetails?.PremiumAfterDiscount!=0"><b>{{endorsementDetails?.PremiumAfterDiscount
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li> -->
                                                                                <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="coverModificationYN=='N'">Difference
                                                                                                Premium</ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="coverModificationYN=='Y'">
                                                                                                Premium Excluded
                                                                                                Tax</ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            ProRata({{endorsementDetails?.ProRata}}%)
                                                                                        </span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumExcludedTax==null || endorsementDetails?.PremiumExcludedTax==0"><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumExcludedTax!=null && endorsementDetails?.PremiumExcludedTax!=0"><b>{{endorsementDetails?.PremiumExcludedTax
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li>
                                                                                <ng-container
                                                                                    *ngIf="endorsementDetails?.EndorsementFees!=null">
                                                                                    <li class="list-group-item list-seperate"
                                                                                        *ngFor="let tax of endorsementDetails?.EndorsementFees">
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount==null || tax?.TaxAmount==0"><b>0</b></ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount!=null && tax?.TaxAmount!=0"><b>{{tax?.TaxAmount
                                                                                                        |
                                                                                                        commaseparator}}</b></ng-container>
                                                                                            </span>
                                                                                        </div>
                                                                                    </li>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="endorsementDetails?.Taxes!=null">
                                                                                    <li
                                                                                        class="list-group-item list-seperate">
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size"><u>Taxes</u></span>
                                                                                        </div>
                                                                                        <div>

                                                                                        </div>
                                                                                    </li>
                                                                                    <li class="list-group-item list-seperate"
                                                                                        *ngFor="let tax of endorsementDetails?.Taxes">
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount==null || tax?.TaxAmount==0"><b>0</b></ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount!=null && tax?.TaxAmount!=0"><b>{{tax?.TaxAmount
                                                                                                        |
                                                                                                        commaseparator}}</b></ng-container>
                                                                                            </span>
                                                                                        </div>
                                                                                    </li>
                                                                                </ng-container>
                                                                                <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">Total
                                                                                            Premium</span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="(element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==null || element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==0) "><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="(element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=0)"><b>{{element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                                &nbsp;&nbsp;
                                                                <button type="button"
                                                                    class="btn maan-btn-blue btn-circle-alt"
                                                                    data-toggle="tooltip" data-placement="top"
                                                                    title="Endorsement" [ngbPopover]="endorseCard"
                                                                    placement="left"
                                                                    (click)="onGetEndorsement(element)"><i
                                                                        class="fa fa-bookmark"
                                                                        aria-hidden="true"></i></button>
                                                                <ng-container
                                                                    *ngIf="checkEndorseValue(element,'empty',menu)">
                                                                    
                                                                    <div class="flex flex-wrap  justify-content-between">
                                                                        <div></div>
                                                                        <div>0</div>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="!checkEndorseValue(element,'empty',menu)">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div></div>
                                                                        <div>
                                                                            <ng-container *ngIf="(coverModificationYN=='Y' && !endorseSIModification )  && element.DifferenceYN=='Y'">
                                                                                0 
                                                                            </ng-container>
                                                                            <ng-container *ngIf="(coverModificationYN=='Y' && !endorseSIModification) && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=0 && element.DifferenceYN=='N'">
                                                                                 {{element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax | commaseparator }}
                                                                            </ng-container>
                                                                            <ng-container *ngIf="(coverModificationYN=='N' || endorseSIModification) && !element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax  && (element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==null || element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==0)">  0 </ng-container>
                                                                            <ng-container *ngIf="(coverModificationYN=='N' || endorseSIModification )  && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=0 ">{{element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax | commaseparator }} </ng-container>
                                                                        </div>
                                                                    </div>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-container *ngIf="(element.Endorsements==null)">
                                                            <ng-container
                                                                *ngIf="element[col.key]==null || element[col.key]==0">
                                                                <div class="flex flex-wrap  justify-content-between">
                                                                    <div></div>
                                                                    <div>0</div>
                                                                </div>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="element[col.key]!=null || element[col.key]!=0">
                                                                <ng-container
                                                                    *ngIf="endorsementSection && element.DiffPremiumIncludedTaxFC!=null && element.DiffPremiumIncludedTaxFC!=0">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div>
                                                                            <ng-container
                                                                                *ngIf="(element.Taxes!=null && element.Taxes.length!=0)">
                                                                                <ng-template #taxCard>
                                                                                    <div class="popover-card customTemplate shawdowcustom "
                                                                                        style="z-index: 10 !important">
                                                                                        <div class="card-header"
                                                                                            status="warning">
                                                                                            Premium Details!
                                                                                        </div>
                                                                                        <div class="card-body p-0">
                                                                                            <ul class="list-group">
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Minimum
                                                                                                            Premium</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{MinimumPremium
                                                                                                            | number
                                                                                                            : '1.0'
                                                                                                            }}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Excluded
                                                                                                            Tax</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">ProRata</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{element.ProRata}}&nbsp;(%)</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Excluded
                                                                                                            Tax</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <ng-container
                                                                                                    *ngIf="dependantTaxList.length!=0">
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of dependantTaxList">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"
                                                                                                                *ngIf="tax.TaxCalcType!='A'">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngIf="taxList.length!=0">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">Premium
                                                                                                                Before
                                                                                                                Tax</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{premiumBeforeTax}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="taxList.length!=0">
                                                                                                    <li
                                                                                                        class="list-group-item list-seperate">
                                                                                                        <div>
                                                                                                            <b>Taxes</b>
                                                                                                        </div>
                                                                                                        <div>

                                                                                                        </div>
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of taxList">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>Total
                                                                                                                Premium</b></span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>{{premiumIncluedTax}}</b></span>
                                                                                                    </div>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                                &nbsp;&nbsp;
                                                                                <p-button label=""
                                                                                    [ngbPopover]="taxCard"
                                                                                    icon="pi pi-info-circle"
                                                                                    styleClass="btn maan-btn-blue btn-circle"
                                                                                    (click)="ongetTaxDetails(element)"></p-button>
                                                                                <!-- <button type="button"
                                                                                    class="btn maan-btn-blue btn-circle"
                                                                                    [ngbPopover]="taxCard"
                                                                                    placement="left"
                                                                                    (click)="ongetTaxDetails(element)">?</button> -->
                                                                            </ng-container>
                                                                        </div>
                                                                         <ng-container *ngIf="checkPremiumIncludedTax(element,menu)">
                                                                            {{ element[col.key]|commaseparator }}
                                                                        </ng-container>
                                                                        <ng-container *ngIf="!checkPremiumIncludedTax(element,menu)">
                                                                            0
                                                                        </ng-container>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="element.DiffPremiumIncludedTax==null || element.DiffPremiumIncludedTax==0 || !endorsementSection">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div>
                                                                            <ng-container
                                                                                *ngIf="(element.Taxes!=null && element.Taxes.length!=0)">
                                                                                <ng-template #taxCard>
                                                                                    <div class="popover-card customTemplate shawdowcustom "
                                                                                        style="z-index: 10 !important">
                                                                                        <div class="card-header"
                                                                                            status="warning">
                                                                                            Premium Details!
                                                                                        </div>
                                                                                        <div class="card-body p-0">
                                                                                            <ul class="list-group">
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">
                                                                                                            <ng-container>Premium
                                                                                                                After
                                                                                                                Discount</ng-container>

                                                                                                        </span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">
                                                                                                            ProRata({{element?.ProRata}}%)
                                                                                                        </span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">
                                                                                                            <ng-container
                                                                                                                *ngIf="element?.PremiumAfterDiscount==null || element?.PremiumAfterDiscount==0"><b>0</b></ng-container>
                                                                                                            <ng-container
                                                                                                                *ngIf="element?.PremiumAfterDiscount!=null && element?.PremiumAfterDiscount!=0"><b>{{element?.PremiumAfterDiscount
                                                                                                                    |
                                                                                                                    commaseparator}}</b></ng-container>
                                                                                                        </span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Minimum
                                                                                                            Premium</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{MinimumPremium
                                                                                                            | number
                                                                                                            : '1.0'
                                                                                                            }}</span>
                                                                                                    </div>
                                                                                                    <!-- </div> -->
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Excluded
                                                                                                            Tax</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                    <!-- </div> -->
                                                                                                </li>
                                                                                                <ng-container
                                                                                                    *ngIf="dependantTaxList.length!=0">
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of dependantTaxList">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"
                                                                                                                *ngIf="tax.TaxCalcType!='A'">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngIf="taxList.length!=0">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"><b>Premium
                                                                                                                    Before
                                                                                                                    Tax</b></span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"><b>{{premiumBeforeTax}}</b></span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="taxList.length!=0">
                                                                                                    <li
                                                                                                        class="list-group-item list-seperate">
                                                                                                        <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                        <div>
                                                                                                            <b>Taxes</b>
                                                                                                        </div>
                                                                                                        <div>

                                                                                                        </div>
                                                                                                        <!-- </div> -->
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of taxList">
                                                                                                        <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                        <!-- </div> -->
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>Total
                                                                                                                Premium</b></span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>{{premiumIncluedTax}}</b></span>
                                                                                                    </div>
                                                                                                    <!-- </div> -->
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                                &nbsp;&nbsp;
                                                                                <p-button label=""
                                                                                    [ngbPopover]="taxCard"
                                                                                    icon="pi pi-info-circle"
                                                                                    styleClass="btn maan-btn-blue btn-circle"
                                                                                    (click)="ongetTaxDetails(element)"></p-button>
                                                                                <!-- <button type="button"
                                                                                    class="btn maan-btn-blue btn-circle"
                                                                                    [ngbPopover]="taxCard"
                                                                                    placement="left"
                                                                                    (click)="ongetTaxDetails(element)">?</button> -->
                                                                            </ng-container>
                                                                        </div>
                                                                        <div>
                                                                            <ng-container *ngIf="checkPremiumIncludedTax(element,menu)">
                                                                                {{ element[col.key]|commaseparator }}
                                                                            </ng-container>
                                                                            <ng-container *ngIf="!checkPremiumIncludedTax(element,menu)">
                                                                                0
                                                                            </ng-container>
                                                                        </div>
                                                                    </div>
                                                                </ng-container>

                                                            </ng-container>
                                                        </ng-container>


                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='Rate'">
                                                        &nbsp;
                                                        <ng-container *ngIf="!adminSection">
                                                            {{ element[col.key]}}
                                                        </ng-container>
                                                        <ng-container *ngIf="(adminSection)">
                                                            <input type="text" [id]="'Rate'+i" style="width: 70px;"
                                                                [(ngModel)]="element[col.key]">
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='ExcessPercent'">
                                                        &nbsp;
                                                        <ng-container *ngIf="!adminSection">
                                                            {{ element[col.key]}}
                                                        </ng-container>
                                                        <ng-container *ngIf="adminSection">
                                                            <input type="text" [id]="'ExcessPercent'+i"
                                                                style="width: 100px;" [(ngModel)]="element[col.key]">
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='ExcessAmount'">
                                                        &nbsp;
                                                        <ng-container *ngIf="!adminSection">
                                                            <div style="max-width: 100px !important;"> {{
                                                                element[col.key]}}
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="(adminSection)">
                                                            <input type="text" [id]="'ExcessAmount'+i"
                                                                style="width: 100px;" [(ngModel)]="element[col.key]">
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container
                                                        *ngIf="col.key!='ExcessPercent' && col.key!='ExcessAmount' && col.key!='Rate' && columnHeader[i]['display']!='SumInsured' && col.key!='PremiumIncludedTax' && col.key!='PremiumAfterDiscount'">
                                                        <ng-container *ngIf="col.key!='CoverName'">
                                                            &nbsp;{{ element[col.key]}}
                                                        </ng-container>
                                                        <ng-container *ngIf="col.key =='CoverName'">
                                                            <div
                                                                style="min-width: 150px !important;white-space: normal !important;padding: 3px !important">
                                                                {{ element[col.key]}}&nbsp;<button
                                                                    class="fa fa-question-circle" style="border: none;"
                                                                    placement="bottom"
                                                                    (click)="covernameinfo(myView,element)">

                                                                </button>
                                                            </div>
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="columnHeader[i]['display']=='SumInsured'">
                                                        <div class="flex flex-wrap  justify-content-between"
                                                            *ngIf="productId!='42'">
                                                            <div>
                                                                &nbsp;&nbsp;
                                                                <p-button label=""
                                                                    styleClass="btn maan-btn-blue btn-circle"
                                                                    icon="pi pi-info-circle"
                                                                    (click)="setDiscountDetails(menu,element,'excess')"></p-button>
                                                                <!-- <button type="button"
                                                                        class="btn maan-btn-blue btn-circle"
                                                                        (click)="setDiscountDetails(menu,element,excessModal)">?
                                                                    </button> -->
                                                            </div>
                                                            <div>
                                                                <ng-container
                                                                    *ngIf="element[col.key]==null || element[col.key]==0">
                                                                    0
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="element[col.key]!=null || element[col.key]!=0">
                                                                    <div style="max-width: 100px !important;"><span>{{
                                                                            element[col.key]|commaseparator }}
                                                                        </span></div>
                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-content-end" *ngIf="productId=='42'">
                                                            <ng-container
                                                                *ngIf="element['CoverageLimit']==null || element['CoverageLimit']==0">
                                                                0
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="element['CoverageLimit']!=null || element['CoverageLimit']!=0">
                                                                <div style="max-width: 100px !important;"><span>{{
                                                                        element['CoverageLimit']|commaseparator }}
                                                                    </span></div>
                                                            </ng-container>
                                                        </div>
                                                    </ng-container>
                                                </ng-container>

                                                <ng-template #hasConfig>
                                                    <ng-container *ngIf="col.config.isChecked">
                                                        &nbsp;&nbsp;
                                                        <mat-checkbox class="example-margin text-center"
                                                            [checked]="canbeChecked(element)"
                                                            [disabled]="(element.isSelected=='D' && !endorseCovers) ||  checkCoverSelection(menu,element)"
                                                            [name]="element[col.config.model]"
                                                            (change)="onSelectCover(element,$event.checked,menu.Vehicleid,menu,'coverList','change')">
                                                        </mat-checkbox>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isExpand">
                                                        <ng-container *ngIf="!element?.expanded && element.SubCovers">
                                                            &nbsp;&nbsp;<button type="button"
                                                                class="btn maan-btn-blue btn-circle"
                                                                (click)="element.expanded = !element?.expanded">
                                                                <i class="fa fa-plus" aria-hidden="true"></i>
                                                            </button>
                                                        </ng-container>
                                                        <ng-container *ngIf="element?.expanded  && element.SubCovers">
                                                            &nbsp;&nbsp;<button type="button"
                                                                class="btn maan-btn-blue btn-circle"
                                                                (click)="element.expanded = !element?.expanded">
                                                                <i class="fa fa-minus" aria-hidden="true"></i>
                                                            </button>
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.select">
                                                        <div class="custom-control custom-radio custom-control-inline">
                                                            <input type="radio" class="custom-control-input"
                                                                id="customRadio{{element[col.key]}}" name="example"
                                                                [value]="element[col.key]"
                                                                (change)="onSelectCustomer.emit(element)">
                                                            <label class="custom-control-label"
                                                                for="customRadio{{element[col.key]}}">{{
                                                                element[col.key] }}</label>
                                                        </div>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isEdit">
                                                        <button class="btn btn-primary btn-sm"
                                                            (click)="onEdit.emit(element)">
                                                            <i class="fas fa-marker"></i>
                                                        </button>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isConfigure">
                                                        <button class="btn btn-primary btn-sm"
                                                            (click)="onConfigure.emit(element)">
                                                            <i class="fas fa-cog"></i>
                                                        </button>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isRemove">
                                                        <button class="btn btn-danger btn-sm">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isOpenGridAction">
                                                        <button mat-icon-button [matMenuTriggerFor]="menu"
                                                            aria-label="Example icon-button with a menu">
                                                            <i class="fas fa-ellipsis-v"></i>
                                                        </button>
                                                        <mat-menu #menu="matMenu">
                                                            <button mat-menu-item>
                                                                <span>Lc Details</span>
                                                            </button>
                                                            <button mat-menu-item
                                                                (click)="onOpenCoverAction.emit({data:element,name:'Certificate'})">
                                                                <span>Certificate</span>
                                                            </button>
                                                            <button mat-menu-item
                                                                (click)="onOpenCoverAction.emit({data:element,name:'Schedule'})">
                                                                <span>Schedule</span>
                                                            </button>
                                                            <button mat-menu-item>
                                                                <span>Policy Wording</span>
                                                            </button>
                                                        </mat-menu>
                                                    </ng-container>
                                                </ng-template>

                                            </td>
                                            <td mat-footer-cell *matFooterCellDef="let event">
                                                <ng-container *ngIf="col.key=='CoverName'">
                                                    <b>{{'PREMIUM.Total' | translate}}</b>
                                                </ng-container>
                                                <ng-container *ngIf="col.key=='PremiumIncludedTax'">
                                                    <div class="flex flex-wrap  justify-content-between">
                                                        <div></div>
                                                        <div><b>{{getTotalCost(menu)|commaseparator}}</b></div>
                                                    </div>
                                                </ng-container>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="expandedDetail">
                                            <td mat-cell *matCellDef="let element"
                                                [attr.colspan]="columnsToDisplay.length">
                                                <ng-container *ngIf="element.SubCovers">
                                                    <div class="example-element-detail"
                                                        [@detailExpand]="element?.expanded" *ngIf="element?.expanded">
                                                        <div class="row p-0">
                                                            <div class="col-md-11 col-lg-11 offset-1 p-0">
                                                                <table mat-table [dataSource]="element.SubCovers"
                                                                    multiTemplateDataRows matSort>
                                                                    <ng-container matColumnDef="header-row-first-group">
                                                                        <th mat-header-cell *matHeaderCellDef
                                                                            [style.text-align]="center"
                                                                            class="mat-header-cell" [attr.colspan]="3">

                                                                        </th>
                                                                    </ng-container>
                                                                    <ng-container
                                                                        matColumnDef="header-row-second-group">
                                                                        <th mat-header-cell *matHeaderCellDef
                                                                            [attr.colspan]="3"
                                                                            [style.text-align]="center"
                                                                            class="innerHead mat-header-cell">
                                                                            {{'Modify.Premium' | translate}} </th>
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngFor="let col of innerColumnHeader; let i = index;"
                                                                        [matColumnDef]="col.key" [sticky]="i===0"
                                                                        [stickyEnd]="i === 10">
                                                                        <th mat-header-cell *matHeaderCellDef
                                                                            mat-sort-header
                                                                            class="innerHead table-header mat-header-cell"
                                                                            style="white-space: pre-line !important;">
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']=='SumInsured' || innerColumnHeader[i]['display']=='Minimum' || innerColumnHeader[i]['display']=='AfterDiscount' || innerColumnHeader[i]['display']=='IncludedTax'">
                                                                                {{ 'Modify.'+innerColumnHeader[i]["display"] | translate}}&nbsp;({{currencyCode}})
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']=='Rate'">
                                                                                {{ 'Modify.'+innerColumnHeader[i]["display"] | translate}}&nbsp;(%)
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']=='ExcessPercent'">
                                                                                {{ 'Modify.Excess' | translate}}
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']!='SumInsured' && innerColumnHeader[i]['display']!='ExcessPercent' && innerColumnHeader[i]['display']!='Rate' && innerColumnHeader[i]['display']!='Minimum' && innerColumnHeader[i]['display']!='AfterDiscount' && innerColumnHeader[i]['display']!='IncludedTax' && innerColumnHeader[i]['display']!=''">
                                                                                {{ 'Modify.'+innerColumnHeader[i]["display"] | translate}}
                                                                            </ng-container>

                                                                        </th>
                                                                        <td mat-cell class="customCellInner"
                                                                            *matCellDef="let subElement">
                                                                            <ng-container
                                                                                *ngIf="!col.config; else hasConfig">
                                                                                <ng-container *ngIf="col.key=='Status'">
                                                                                    <span
                                                                                        *ngIf="subElement[col.key]=='Y'">Active</span>
                                                                                    <span
                                                                                        *ngIf="subElement[col.key]!='Y'">DeActive</span>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.key!='Status' && col.key!='CalcType'">
                                                                                    {{ subElement[col.key] }}
                                                                                </ng-container>

                                                                            </ng-container>
                                                                            <ng-template #hasConfig>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isChecked">
                                                                                    <mat-checkbox class="example-margin"
                                                                                        [(ngModel)]="subElement[col.config.model]"
                                                                                        (change)="onSelectCustomer.emit(subElement)">
                                                                                    </mat-checkbox>
                                                                                </ng-container>
                                                                                <ng-container *ngIf="col.config.select">
                                                                                    &nbsp;&nbsp;
                                                                                    <ng-container
                                                                                        *ngIf="subElement.MultiSelectYn=='Y'">
                                                                                        <mat-checkbox
                                                                                            class="example-margin"
                                                                                            [checked]="subElement.selected"
                                                                                            (change)="onChangeSubCover(subElement,element,menu,$event.checked)">
                                                                                        </mat-checkbox>
                                                                                    </ng-container>
                                                                                    <ng-container
                                                                                        *ngIf="subElement.MultiSelectYn!='Y'">
                                                                                        <mat-radio-button
                                                                                            [checked]="checkSubCoverSelection(subElement)" [disabled]="(element.isSelected=='D' && !endorseCovers) ||  checkCoverSelection(menu,element)"
                                                                                            [id]="'customRadio'+subElement[col.key]" name="customRadio" (change)="onChangeSubCover(subElement,element,menu,$event.checked)">
                                                                                        </mat-radio-button> 
                                                                                    </ng-container>
                                                                                </ng-container>
                                                                                <ng-container *ngIf="col.config.isEdit">
                                                                                    <button class="btn btn-primary btn-sm" (click)="onEdit.emit(subElement)">
                                                                                        <i class="fas fa-marker"></i>
                                                                                    </button>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isConfigure">
                                                                                    <button class="btn btn-primary btn-sm"
                                                                                        (click)="onConfigure.emit(subElement)">
                                                                                        <i class="fas fa-cog"></i>
                                                                                    </button>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isRemove">
                                                                                    <button
                                                                                        class="btn btn-danger btn-sm">
                                                                                        <i class="fas fa-trash"></i>
                                                                                    </button>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isOpenGridAction">
                                                                                    <button mat-icon-button
                                                                                        [matMenuTriggerFor]="menu"
                                                                                        aria-label="Example icon-button with a menu">
                                                                                        <i class="fas fa-ellipsis-v"></i>
                                                                                    </button>
                                                                                    <mat-menu #menu="matMenu">
                                                                                        <button mat-menu-item><span>Lc Details</span></button>
                                                                                        <button mat-menu-item (click)="onOpenCoverAction.emit({data:subElement,name:'Certificate'})">
                                                                                            <span>Certificate</span>
                                                                                        </button>
                                                                                        <button mat-menu-item (click)="onOpenCoverAction.emit({data:subElement,name:'Schedule'})">
                                                                                            <span>Schedule</span>
                                                                                        </button>
                                                                                        <button mat-menu-item><span>Policy Wording</span></button>
                                                                                    </mat-menu>
                                                                                </ng-container>
                                                                            </ng-template>
                                                                        </td>
                                                                    </ng-container>
                                                                    <tr mat-header-row
                                                                        *matHeaderRowDef="['header-row-first-group', 'header-row-second-group']">
                                                                    </tr>
                                                                    <tr mat-header-row *matHeaderRowDef="innerKeys">
                                                                    </tr>
                                                                    <tr mat-row
                                                                        *matRowDef="let element;let i = dataIndex; columns: innerKeys;"
                                                                        [ngClass]="{'striped-row': i % 2}"
                                                                        [class.example-element-row]="element.SubCovers?.length"
                                                                        [class.example-expanded-row]="element?.expanded">
                                                                    </tr>
                                                                </table>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </ng-container>

                                            </td>

                                        </ng-container>
                                        <ng-container *ngIf="!checkReferralStatus()">
                                            <tr mat-header-row
                                                *matHeaderRowDef="['header-row-first-group', 'header-row-second-group']">
                                            </tr>
                                        </ng-container>
                                        <ng-container *ngIf="checkReferralStatus()">
                                            <tr mat-header-row *matHeaderRowDef="['header-row-first-group']">
                                            </tr>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="keys"></tr>
                                        <tr mat-row *matRowDef="let element; columns: keys;let i = dataIndex;"
                                            [ngClass]="{'striped-row': i % 2}"
                                            [class.example-element-row]="element.SubCovers?.length"
                                            [class.example-expanded-row]="element?.expanded"></tr>
                                        <tr mat-row *matRowDef="let row;let j = dataIndex; columns: ['expandedDetail']"
                                            [ngClass]="{'striped-row': j % 2}" class="example-detail-row"></tr>
                                        <ng-container *ngIf="!checkReferralStatus()">
                                            <tr mat-footer-row *matFooterRowDef="keys"></tr>
                                        </ng-container>

                                    </table>
                                    <div class="grid mt-2" *ngIf="checkBenefitCovers(menu)">
                                        <div class="col-12 md:col-4 lg:col-4 xl:col-4">
                                            <h3>Benefit Covers</h3>
                                        </div>
                                    </div>
                                    <div class="grid mt-2" *ngIf="checkBenefitCovers(menu)">
                                        <div class="col-12 md:col-1 md:col-1 lg:col-1 xl:col-1"></div>
                                        <div class="col-12 md:col-10 md:col-10 lg:col-10 xl:col-10">
                                            <table class="table table-bordered p-1" style="overflow-x:clip !important;width:100%;">
                                                <thead>
                                                    <tr class="firstclass tableRowWidth" style="background-color: #042181;color:#fff">
                                                        <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Select
                                                        </th>
                                                        <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Coverage
                                                        </th>
                                                        <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Coverage Limit ({{currencyCode}})</th>
                                                        
                                                        
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                   <ng-container *ngFor="let entry of getFilterBenefitCoverList(menu);let i=index">
                                                       <tr>
                                                           <td class="p-2 text-center">
                                                              <input type="checkbox" [checked]="canbeChecked(entry)" (change)="onSelectCover(entry,$event.target.checked,menu.Vehicleid,menu,'coverList','change')" id="vehicle1" name="vehicle1">&nbsp;
                                                           </td>
                                                           <td class="p-2">{{entry.CoverName}}</td>
                                                           <td class="p-2" style="text-align: center;">
                                                               <ng-container *ngIf="((!adminSection && userType!='Issuer') || endorsementSection ) || finalizeYN=='Y'">
                                                                   <span class="spancommon span_font_size" [id]="'coverageLimit'+i">{{entry.CoverageLimit | commaseparator}}</span>
                                                               </ng-container>
                                                               <ng-container *ngIf="adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)">
                                                                   <div class="input-group">
                                                                       <input type="text" class="input-form-control without-icon" style="border-radius:5px;width: auto !important;max-width:150px;text-align:right !important; border: 1px solid;
                                                                       padding: 4px 12px;" [id]="'coverageLimit'+i"
                                                                       [(ngModel)]="entry.CoverageLimit">
                                                                         
                                                                       
                                                                   </div>
                                                               </ng-container>
                                                           </td>
                                                           
                                                       </tr>
                                                    </ng-container>
                                                </tbody>
                                            </table>
                                        </div>
                                        
                                    </div>
                                </div>
                                <div class="display2 col-12 xl:col-12 lg:col-12 ">

                                    <table mat-table [dataSource]="getFilterCoverList(menu)" class="outerTable"
                                        multiTemplateDataRows matSort>
                                        <ng-container *ngIf="checkReferralStatus()">
                                            <ng-container matColumnDef="header-row-first-group">
                                                <th mat-header-cell *matHeaderCellDef class="outerHead mat-header-cell"
                                                    [style.text-align]="center" [attr.colspan]="3">

                                                </th>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="!checkReferralStatus()">
                                            <ng-container matColumnDef="header-row-first-group">
                                                <th mat-header-cell *matHeaderCellDef class="outerHead mat-header-cell"
                                                    [style.text-align]="center" [attr.colspan]="3">

                                                </th>
                                            </ng-container>
                                            <ng-container matColumnDef="header-row-second-group">
                                                <th mat-header-cell *matHeaderCellDef [attr.colspan]="6"
                                                    class="text-center outerHead mat-header-cell">{{'Modify.Premium' | translate}}</th>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngFor="let col of columnHeader; let i = index;"
                                            [matColumnDef]="col.key" [sticky]="i===0" [stickyEnd]="i === 10">

                                            <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                class="text-center outerHead mat-header-cell"
                                                style="white-space: normal !important;">&nbsp;
                                                <ng-container
                                                    *ngIf="columnHeader[i]['display']=='SumInsured' || columnHeader[i]['display']=='Minimum' || columnHeader[i]['display']=='After Discount' || columnHeader[i]['display']=='Included Tax'">
                                                    <ng-container *ngIf="columnHeader[i]['display']=='SumInsured'">
                                                        <ng-container *ngIf="productId!='42'">
                                                            {{'Modify.'+columnHeader[i]["display"] | translate }}&nbsp;({{currencyCode}})
                                                        </ng-container>
                                                        <ng-container *ngIf="productId=='42'">
                                                            {{'Modify.CoverageLimit' | translate}}&nbsp;({{currencyCode}})
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="columnHeader[i]['display']!='SumInsured'">
                                                        {{'Modify.'+columnHeader[i]["display"] | translate }}&nbsp;({{currencyCode}})
                                                    </ng-container>
                                                </ng-container>
                                                <ng-container *ngIf="columnHeader[i]['display']=='Rate'">
                                                    <ng-container *ngIf="productId=='42'">
                                                        {{ 'Modify.'+columnHeader[i]["display"] | translate }}&nbsp;({{currencyCode}})
                                                    </ng-container>
                                                    <ng-container *ngIf="productId!='42'">
                                                        {{ 'Modify.'+columnHeader[i]["display"] | translate}}&nbsp;(%)
                                                    </ng-container>
                                                </ng-container>
                                                <ng-container *ngIf="columnHeader[i]['display']=='Excess Percent'">
                                                    {{ 'Modify.Excess' | translate}}&nbsp;(%)
                                                </ng-container>
                                                <ng-container *ngIf="columnHeader[i]['display']=='Excess Amount'">
                                                    {{ 'Modify.Excess' | translate}}<br>({{currencyCode}})
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="columnHeader[i]['display']!='SumInsured' && columnHeader[i]['display']!='Referral' && columnHeader[i]['display']!='Excess Amount' && columnHeader[i]['display']!='Excess Percent' && columnHeader[i]['display']!='Rate' && columnHeader[i]['display']!='Minimum' && columnHeader[i]['display']!='After Discount' && columnHeader[i]['display']!='Included Tax'">
                                                    {{ 'Modify.'+columnHeader[i]["display"]  | translate}}
                                                </ng-container>
                                            </th>
                                            <td mat-cell *matCellDef="let element" class="customCell"
                                                [ngClass]="{'customRowBg': col.key=='CoverName' && element?.isReferal === 'Y'}">
                                                <ng-container *ngIf="!col.config; else hasConfig">
                                                    <ng-container *ngIf="col.key=='Status'">
                                                        <span *ngIf="element[col.key]=='Y'">Active</span>
                                                        <span *ngIf="element[col.key]!='Y'">DeActive</span>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='PremiumAfterDiscount'">
                                                        <ng-container *ngIf="(element.Endorsements!=null)">
                                                            &nbsp;&nbsp;
                                                            <!-- <p-button label="?" styleClass="btn maan-btn-blue btn-circle" (click)="setDiscountDetails(menu,element,discountModal)"></p-button> -->
                                                            <button type="button"
                                                                class="btn maan-btn-blue btn-circle-alt"
                                                                title="After Discount"
                                                                (click)="setDiscountDetails(menu,element,'discount')"><i
                                                                    class="fa fa-bookmark"
                                                                    aria-hidden="true"></i></button>
                                                            <div class="flex flex-wrap  justify-content-between">
                                                                <div></div>
                                                                <div>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='Y' && !endorseSIModification )  && element.DifferenceYN=='Y'">
                                                                        0
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='Y' && !endorseSIModification) && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=0 && element.DifferenceYN=='N'">
                                                                        {{
                                                                        element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax
                                                                        |commaseparator }}
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='N' || endorseSIModification) && !element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax  && (element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax==null || element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax==0)">
                                                                        0
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="(coverModificationYN=='N' || endorseSIModification )  && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax!=0 ">
                                                                        {{
                                                                        element.Endorsements[element.Endorsements.length-1].PremiumExcludedTax
                                                                        |commaseparator }}
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="(element.Endorsements==null)">
                                                            <div class="flex flex-wrap  justify-content-between">
                                                                <div>
                                                                    <ng-container>

                                                                        &nbsp;&nbsp;
                                                                        <p-button label=""
                                                                            icon="pi pi-info-circle"
                                                                            styleClass="btn maan-btn-blue btn-circle"
                                                                            (click)="setDiscountDetails(menu,element,'discount')"></p-button>
                                                                        <!-- <button type="button"
                                                                            class="btn maan-btn-blue btn-circle"
                                                                            (click)="setDiscountDetails(menu,element,discountModal)">?
                                                                        </button> -->
                                                                    </ng-container>
                                                                </div>
                                                                <div>
                                                                    <ng-container
                                                                        *ngIf="element[col.key]==null || element[col.key]==0">
                                                                        0
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngIf="element[col.key]!=null || element[col.key]!=0">
                                                                        <span>{{ element[col.key]|commaseparator }}
                                                                        </span>
                                                                    </ng-container>
                                                                </div>
                                                            </div>
                                                        </ng-container>

                                                    </ng-container>

                                                    <ng-container *ngIf="col.key=='PremiumIncludedTax'">
                                                        <ng-container *ngIf="(element.Endorsements!=null)">
                                                            <ng-container *ngIf="(element.Endorsements.length!=0)">
                                                                <ng-template #endorseCard>
                                                                    <div
                                                                        class="popover-card customTemplate shawdowcustom ">
                                                                        <div class="card-header" status="warning">
                                                                            <div
                                                                                class="flex flex-wrap  justify-content-between">
                                                                                <div>
                                                                                    Endorsement Details!
                                                                                </div>
                                                                                <div>
                                                                                    No.Of.Endorsement ~
                                                                                    {{endorsementDetails?.EndtCount}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div class="card-body p-0">

                                                                            <div class="mt-1"
                                                                                style="background-color: #acbf8e;border:1px solid grey;padding: 4px;border-radius: 5px;">
                                                                                <!-- <span class="spancommon span_font_size"><b>Description</b>&nbsp;:&nbsp;</span> -->

                                                                                <span
                                                                                    class="spancommon span_font_size">{{endorsementDetails?.EndorsementDesc}}</span>
                                                                            </div>
                                                                            <ul class="list-group">

                                                                                <!-- <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">Current
                                                                                            Premium</span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="element.PremiumExcluedTax==null || element.PremiumExcluedTax==0"><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="element.PremiumExcluedTax!=null && element.PremiumExcluedTax!=0"><b>{{element.PremiumExcluedTax
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li>
                                                                                <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">Previous
                                                                                            Premium</span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumAfterDiscount==null || endorsementDetails?.PremiumAfterDiscount==0"><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumAfterDiscount!=null && endorsementDetails?.PremiumAfterDiscount!=0"><b>{{endorsementDetails?.PremiumAfterDiscount
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li> -->
                                                                                <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="coverModificationYN=='N'">Difference
                                                                                                Premium</ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="coverModificationYN=='Y'">
                                                                                                Premium Excluded
                                                                                                Tax</ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            ProRata({{endorsementDetails?.ProRata}}%)
                                                                                        </span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumExcludedTax==null || endorsementDetails?.PremiumExcludedTax==0"><b>0</b></ng-container>
                                                                                            <ng-container
                                                                                                *ngIf="endorsementDetails?.PremiumExcludedTax!=null && endorsementDetails?.PremiumExcludedTax!=0"><b>{{endorsementDetails?.PremiumExcludedTax
                                                                                                    |
                                                                                                    commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li>
                                                                                <ng-container
                                                                                    *ngIf="endorsementDetails?.EndorsementFees!=null">
                                                                                    <li class="list-group-item list-seperate"
                                                                                        *ngFor="let tax of endorsementDetails?.EndorsementFees">
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount==null || tax?.TaxAmount==0"><b>0</b></ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount!=null && tax?.TaxAmount!=0"><b>{{tax?.TaxAmount
                                                                                                        |
                                                                                                        commaseparator}}</b></ng-container>
                                                                                            </span>
                                                                                        </div>
                                                                                    </li>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="endorsementDetails?.Taxes!=null">
                                                                                    <li
                                                                                        class="list-group-item list-seperate">
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size"><u>Taxes</u></span>
                                                                                        </div>
                                                                                        <div>

                                                                                        </div>
                                                                                    </li>
                                                                                    <li class="list-group-item list-seperate"
                                                                                        *ngFor="let tax of endorsementDetails?.Taxes">
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                        </div>
                                                                                        <div>
                                                                                            <span
                                                                                                class="spancommon span_font_size">
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount==null || tax?.TaxAmount==0"><b>0</b></ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="tax?.TaxAmount!=null && tax?.TaxAmount!=0"><b>{{tax?.TaxAmount
                                                                                                        |
                                                                                                        commaseparator}}</b></ng-container>
                                                                                            </span>
                                                                                        </div>
                                                                                    </li>
                                                                                </ng-container>
                                                                                <li
                                                                                    class="list-group-item list-seperate">
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">Total
                                                                                            Premium</span>
                                                                                    </div>
                                                                                    <div>
                                                                                        <span
                                                                                            class="spancommon span_font_size">
                                                                                            <ng-container *ngIf="(element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==null || element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==0) "><b>0</b></ng-container>
                                                                                            <ng-container *ngIf="(element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=0)"><b>{{element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax| commaseparator}}</b></ng-container>
                                                                                        </span>
                                                                                    </div>
                                                                                </li>
                                                                            </ul>
                                                                        </div>
                                                                    </div>
                                                                </ng-template>
                                                                &nbsp;&nbsp;
                                                                <button type="button"
                                                                    class="btn maan-btn-blue btn-circle-alt"
                                                                    data-toggle="tooltip" data-placement="top"
                                                                    title="Endorsement" [ngbPopover]="endorseCard"
                                                                    placement="left"
                                                                    (click)="onGetEndorsement(element)"><i
                                                                        class="fa fa-bookmark"
                                                                        aria-hidden="true"></i></button>
                                                                <ng-container
                                                                    *ngIf="checkEndorseValue(element,'empty',menu)">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div></div>
                                                                        <div>0</div>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="!checkEndorseValue(element,'empty',menu)">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div></div>
                                                                        <div>
                                                                            <ng-container
                                                                                *ngIf="(coverModificationYN=='Y' && !endorseSIModification )  && element.DifferenceYN=='Y'">
                                                                                0
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="(coverModificationYN=='Y' && !endorseSIModification) && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=0 && element.DifferenceYN=='N'">
                                                                                {{
                                                                                element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax
                                                                                |commaseparator }}
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="(coverModificationYN=='N' || endorseSIModification) && !element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax  && (element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==null || element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax==0)">
                                                                                0
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="(coverModificationYN=='N' || endorseSIModification )  && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=null && element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax!=0 ">
                                                                                {{
                                                                                element.Endorsements[element.Endorsements.length-1].PremiumIncludedTax
                                                                                |commaseparator }}
                                                                            </ng-container>
                                                                        </div>
                                                                    </div>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-container *ngIf="(element.Endorsements==null)">
                                                            <ng-container
                                                                *ngIf="element[col.key]==null || element[col.key]==0">
                                                                <div class="flex flex-wrap  justify-content-between">
                                                                    <div></div>
                                                                    <div>0</div>
                                                                </div>
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="element[col.key]!=null || element[col.key]!=0">
                                                                <ng-container
                                                                    *ngIf="endorsementSection && element.DiffPremiumIncludedTaxFC!=null && element.DiffPremiumIncludedTaxFC!=0">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div>
                                                                            <ng-container
                                                                                *ngIf="(element.Taxes!=null && element.Taxes.length!=0)">
                                                                                <ng-template #taxCard>
                                                                                    <div class="popover-card customTemplate shawdowcustom "
                                                                                        style="z-index: 10 !important">
                                                                                        <div class="card-header"
                                                                                            status="warning">
                                                                                            Premium Details!
                                                                                        </div>
                                                                                        <div class="card-body p-0">
                                                                                            <ul class="list-group">
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Minimum
                                                                                                            Premium</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{MinimumPremium
                                                                                                            | number
                                                                                                            : '1.0'
                                                                                                            }}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Excluded
                                                                                                            Tax</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">ProRata</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{element.ProRata}}&nbsp;(%)</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Excluded
                                                                                                            Tax</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <ng-container
                                                                                                    *ngIf="dependantTaxList.length!=0">
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of dependantTaxList">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"
                                                                                                                *ngIf="tax.TaxCalcType!='A'">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngIf="taxList.length!=0">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">Premium
                                                                                                                Before
                                                                                                                Tax</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{premiumBeforeTax}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="taxList.length!=0">
                                                                                                    <li
                                                                                                        class="list-group-item list-seperate">
                                                                                                        <div>
                                                                                                            <b>Taxes</b>
                                                                                                        </div>
                                                                                                        <div>

                                                                                                        </div>
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of taxList">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>Total
                                                                                                                Premium</b></span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>{{premiumIncluedTax}}</b></span>
                                                                                                    </div>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                                &nbsp;&nbsp;
                                                                                <p-button label=""
                                                                                    [ngbPopover]="taxCard"
                                                                                    icon="pi pi-info-circle"
                                                                                    styleClass="btn maan-btn-blue btn-circle"
                                                                                    (click)="ongetTaxDetails(element)"></p-button>
                                                                                <!-- <button type="button"
                                                                                    class="btn maan-btn-blue btn-circle"
                                                                                    [ngbPopover]="taxCard"
                                                                                    placement="left"
                                                                                    (click)="ongetTaxDetails(element)">?</button> -->
                                                                            </ng-container>
                                                                        </div>
                                                                         <ng-container *ngIf="checkPremiumIncludedTax(element,menu)">
                                                                            {{ element[col.key]|commaseparator }}
                                                                        </ng-container>
                                                                        <ng-container *ngIf="!checkPremiumIncludedTax(element,menu)">
                                                                            0
                                                                        </ng-container>
                                                                    </div>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="element.DiffPremiumIncludedTax==null || element.DiffPremiumIncludedTax==0 || !endorsementSection">
                                                                    <div
                                                                        class="flex flex-wrap  justify-content-between">
                                                                        <div>
                                                                            <ng-container
                                                                                *ngIf="(element.Taxes!=null && element.Taxes.length!=0)">
                                                                                <ng-template #taxCard>
                                                                                    <div class="popover-card customTemplate shawdowcustom "
                                                                                        style="z-index: 10 !important">
                                                                                        <div class="card-header"
                                                                                            status="warning">
                                                                                            Premium Details!
                                                                                        </div>
                                                                                        <div class="card-body p-0">
                                                                                            <ul class="list-group">
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">
                                                                                                            <ng-container>Premium
                                                                                                                After
                                                                                                                Discount</ng-container>

                                                                                                        </span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">
                                                                                                            ProRata({{element?.ProRata}}%)
                                                                                                        </span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">
                                                                                                            <ng-container
                                                                                                                *ngIf="element?.PremiumAfterDiscount==null || element?.PremiumAfterDiscount==0"><b>0</b></ng-container>
                                                                                                            <ng-container
                                                                                                                *ngIf="element?.PremiumAfterDiscount!=null && element?.PremiumAfterDiscount!=0"><b>{{element?.PremiumAfterDiscount
                                                                                                                    |
                                                                                                                    commaseparator}}</b></ng-container>
                                                                                                        </span>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Minimum
                                                                                                            Premium</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{MinimumPremium
                                                                                                            | number
                                                                                                            : '1.0'
                                                                                                            }}</span>
                                                                                                    </div>
                                                                                                    <!-- </div> -->
                                                                                                </li>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">Excluded
                                                                                                            Tax</span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size">{{premiumExcluedTax}}</span>
                                                                                                    </div>
                                                                                                    <!-- </div> -->
                                                                                                </li>
                                                                                                <ng-container
                                                                                                    *ngIf="dependantTaxList.length!=0">
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of dependantTaxList">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"
                                                                                                                *ngIf="tax.TaxCalcType!='A'">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngIf="taxList.length!=0">
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"><b>Premium
                                                                                                                    Before
                                                                                                                    Tax</b></span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size"><b>{{premiumBeforeTax}}</b></span>
                                                                                                        </div>
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <ng-container
                                                                                                    *ngIf="taxList.length!=0">
                                                                                                    <li
                                                                                                        class="list-group-item list-seperate">
                                                                                                        <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                        <div>
                                                                                                            <b>Taxes</b>
                                                                                                        </div>
                                                                                                        <div>

                                                                                                        </div>
                                                                                                        <!-- </div> -->
                                                                                                    </li>
                                                                                                    <li class="list-group-item list-seperate"
                                                                                                        *ngFor="let tax of taxList">
                                                                                                        <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxDesc}}</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">({{tax.TaxRate}}&nbsp;%)</span>
                                                                                                        </div>
                                                                                                        <div>
                                                                                                            <span
                                                                                                                class="spancommon span_font_size">{{tax.TaxAmount}}</span>
                                                                                                        </div>
                                                                                                        <!-- </div> -->
                                                                                                    </li>
                                                                                                </ng-container>
                                                                                                <li
                                                                                                    class="list-group-item list-seperate">
                                                                                                    <!-- <div class="flex flex-wrap  justify-content-between"> -->
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>Total
                                                                                                                Premium</b></span>
                                                                                                    </div>
                                                                                                    <div>
                                                                                                        <span
                                                                                                            class="spancommon span_font_size"><b>{{premiumIncluedTax}}</b></span>
                                                                                                    </div>
                                                                                                    <!-- </div> -->
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                    </div>
                                                                                </ng-template>
                                                                                &nbsp;&nbsp;
                                                                                <p-button label=""
                                                                                    [ngbPopover]="taxCard"
                                                                                    icon="pi pi-info-circle"
                                                                                    styleClass="btn maan-btn-blue btn-circle"
                                                                                    (click)="ongetTaxDetails(element)"></p-button>
                                                                                <!-- <button type="button"
                                                                                    class="btn maan-btn-blue btn-circle"
                                                                                    [ngbPopover]="taxCard"
                                                                                    placement="left"
                                                                                    (click)="ongetTaxDetails(element)">?</button> -->
                                                                            </ng-container>
                                                                        </div>
                                                                        <div>
                                                                            <ng-container *ngIf="checkPremiumIncludedTax(element,menu)">
                                                                                {{ element[col.key]|commaseparator }}
                                                                            </ng-container>
                                                                            <ng-container *ngIf="!checkPremiumIncludedTax(element,menu)">
                                                                                0
                                                                            </ng-container>
                                                                        </div>
                                                                    </div>
                                                                </ng-container>

                                                            </ng-container>
                                                        </ng-container>


                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='Rate'">
                                                        &nbsp;
                                                        <ng-container *ngIf="!adminSection">
                                                            {{ element[col.key]}}
                                                        </ng-container>
                                                        <ng-container *ngIf="(adminSection)">
                                                            <input type="text" [id]="'Rate'+i" style="width: 70px;"
                                                                [(ngModel)]="element[col.key]">
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='ExcessPercent'">
                                                        &nbsp;
                                                        <ng-container *ngIf="!adminSection">
                                                            {{ element[col.key]}}
                                                        </ng-container>
                                                        <ng-container *ngIf="adminSection">
                                                            <input type="text" [id]="'ExcessPercent'+i"
                                                                style="width: 100px;" [(ngModel)]="element[col.key]">
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.key=='ExcessAmount'">
                                                        &nbsp;
                                                        <ng-container *ngIf="!adminSection">
                                                            <div style="max-width: 100px !important;"> {{
                                                                element[col.key]}}
                                                            </div>
                                                        </ng-container>
                                                        <ng-container *ngIf="(adminSection)">
                                                            <input type="text" [id]="'ExcessAmount'+i"
                                                                style="width: 100px;" [(ngModel)]="element[col.key]">
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container
                                                        *ngIf="col.key!='ExcessPercent' && col.key!='ExcessAmount' && col.key!='Rate' && columnHeader[i]['display']!='SumInsured' && col.key!='PremiumIncludedTax' && col.key!='PremiumAfterDiscount'">
                                                        <ng-container *ngIf="col.key!='CoverName'">
                                                            &nbsp;{{ element[col.key]}}
                                                        </ng-container>
                                                        <ng-container *ngIf="col.key =='CoverName'">
                                                            <div
                                                                style="min-width: 150px !important;white-space: normal !important;padding: 3px !important">
                                                                {{ element[col.key]}}&nbsp;<button
                                                                    class="fa fa-question-circle" style="border: none;"
                                                                    placement="bottom"
                                                                    (click)="covernameinfo(myView,element)">

                                                                </button>
                                                            </div>
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="columnHeader[i]['display']=='SumInsured'">
                                                        <div class="flex flex-wrap  justify-content-between"
                                                            *ngIf="productId!='42'">
                                                            <div>
                                                                &nbsp;&nbsp;
                                                                <p-button label=""
                                                                    styleClass="btn maan-btn-blue btn-circle"
                                                                    icon="pi pi-info-circle"
                                                                    (click)="setDiscountDetails(menu,element,'excess')"></p-button>
                                                                <!-- <button type="button"
                                                                        class="btn maan-btn-blue btn-circle"
                                                                        (click)="setDiscountDetails(menu,element,excessModal)">?
                                                                    </button> -->
                                                            </div>
                                                            <div>
                                                                <ng-container
                                                                    *ngIf="element[col.key]==null || element[col.key]==0">
                                                                    0
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="element[col.key]!=null || element[col.key]!=0">
                                                                    <div style="max-width: 100px !important;"><span>{{
                                                                            element[col.key]|commaseparator }}
                                                                        </span></div>
                                                                </ng-container>
                                                            </div>
                                                        </div>
                                                        <div class="d-flex justify-content-end" *ngIf="productId=='42'">
                                                            <ng-container
                                                                *ngIf="element['CoverageLimit']==null || element['CoverageLimit']==0">
                                                                0
                                                            </ng-container>
                                                            <ng-container
                                                                *ngIf="element['CoverageLimit']!=null || element['CoverageLimit']!=0">
                                                                <div style="max-width: 100px !important;"><span>{{
                                                                        element['CoverageLimit']|commaseparator }}
                                                                    </span></div>
                                                            </ng-container>
                                                        </div>
                                                    </ng-container>
                                                </ng-container>

                                                <ng-template #hasConfig>
                                                    <ng-container *ngIf="col.config.isChecked">
                                                        &nbsp;&nbsp;
                                                        <mat-checkbox class="example-margin text-center"
                                                            [checked]="canbeChecked(element)"
                                                            [disabled]="(element.isSelected=='D' && !endorseCovers) ||  checkCoverSelection(menu,element)"
                                                            [name]="element[col.config.model]"
                                                            (change)="onSelectCover(element,$event.checked,menu.Vehicleid,menu,'coverList','change')">
                                                        </mat-checkbox>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isExpand">
                                                        <ng-container *ngIf="!element?.expanded && element.SubCovers">
                                                            &nbsp;&nbsp;<button type="button"
                                                                class="btn maan-btn-blue btn-circle"
                                                                (click)="element.expanded = !element?.expanded">
                                                                <i class="fa fa-plus" aria-hidden="true"></i>
                                                            </button>
                                                        </ng-container>
                                                        <ng-container *ngIf="element?.expanded  && element.SubCovers">
                                                            &nbsp;&nbsp;<button type="button"
                                                                class="btn maan-btn-blue btn-circle"
                                                                (click)="element.expanded = !element?.expanded">
                                                                <i class="fa fa-minus" aria-hidden="true"></i>
                                                            </button>
                                                        </ng-container>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.select">
                                                        <div class="custom-control custom-radio custom-control-inline">
                                                            <input type="radio" class="custom-control-input"
                                                                id="customRadio{{element[col.key]}}" name="example"
                                                                [value]="element[col.key]"
                                                                (change)="onSelectCustomer.emit(element)">
                                                            <label class="custom-control-label"
                                                                for="customRadio{{element[col.key]}}">{{
                                                                element[col.key] }}</label>
                                                        </div>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isEdit">
                                                        <button class="btn btn-primary btn-sm"
                                                            (click)="onEdit.emit(element)">
                                                            <i class="fas fa-marker"></i>
                                                        </button>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isConfigure">
                                                        <button class="btn btn-primary btn-sm"
                                                            (click)="onConfigure.emit(element)">
                                                            <i class="fas fa-cog"></i>
                                                        </button>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isRemove">
                                                        <button class="btn btn-danger btn-sm">
                                                            <i class="fas fa-trash"></i>
                                                        </button>
                                                    </ng-container>
                                                    <ng-container *ngIf="col.config.isOpenGridAction">
                                                        <button mat-icon-button [matMenuTriggerFor]="menu"
                                                            aria-label="Example icon-button with a menu">
                                                            <i class="fas fa-ellipsis-v"></i>
                                                        </button>
                                                        <mat-menu #menu="matMenu">
                                                            <button mat-menu-item>
                                                                <span>Lc Details</span>
                                                            </button>
                                                            <button mat-menu-item
                                                                (click)="onOpenCoverAction.emit({data:element,name:'Certificate'})">
                                                                <span>Certificate</span>
                                                            </button>
                                                            <button mat-menu-item
                                                                (click)="onOpenCoverAction.emit({data:element,name:'Schedule'})">
                                                                <span>Schedule</span>
                                                            </button>
                                                            <button mat-menu-item>
                                                                <span>Policy Wording</span>
                                                            </button>
                                                        </mat-menu>
                                                    </ng-container>
                                                </ng-template>

                                            </td>
                                            <td mat-footer-cell *matFooterCellDef="let event">
                                                <ng-container *ngIf="col.key=='CoverName'">
                                                    <b>{{'PREMIUM.Total' | translate}}</b>
                                                </ng-container>
                                                <ng-container *ngIf="col.key=='PremiumIncludedTax'">
                                                    <div class="flex flex-wrap  justify-content-between">
                                                        <div></div>
                                                        <div><b>{{getTotalCost(menu)|commaseparator}}</b></div>
                                                    </div>
                                                </ng-container>
                                            </td>
                                        </ng-container>

                                        <ng-container matColumnDef="expandedDetail">
                                            <td mat-cell *matCellDef="let element"
                                                [attr.colspan]="columnsToDisplay.length">
                                                <ng-container *ngIf="element.SubCovers">
                                                    <div class="example-element-detail"
                                                        [@detailExpand]="element?.expanded" *ngIf="element?.expanded">
                                                        <div class="row p-0">
                                                            <div class="col-md-11 col-lg-11 offset-1 p-0">
                                                                <table mat-table [dataSource]="element.SubCovers"
                                                                    multiTemplateDataRows matSort>
                                                                    <ng-container matColumnDef="header-row-first-group">
                                                                        <th mat-header-cell *matHeaderCellDef
                                                                            [style.text-align]="center"
                                                                            class="mat-header-cell" [attr.colspan]="3">

                                                                        </th>
                                                                    </ng-container>
                                                                    <ng-container
                                                                        matColumnDef="header-row-second-group">
                                                                        <th mat-header-cell *matHeaderCellDef
                                                                            [attr.colspan]="3"
                                                                            [style.text-align]="center"
                                                                            class="innerHead mat-header-cell">
                                                                            {{'Modify.Premium' | translate}} </th>
                                                                    </ng-container>
                                                                    <ng-container
                                                                        *ngFor="let col of innerColumnHeader; let i = index;"
                                                                        [matColumnDef]="col.key" [sticky]="i===0"
                                                                        [stickyEnd]="i === 10">
                                                                        <th mat-header-cell *matHeaderCellDef
                                                                            mat-sort-header
                                                                            class="innerHead table-header mat-header-cell"
                                                                            style="white-space: pre-line !important;">
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']=='SumInsured' || innerColumnHeader[i]['display']=='Minimum' || innerColumnHeader[i]['display']=='AfterDiscount' || innerColumnHeader[i]['display']=='IncludedTax'">
                                                                                {{ 'Modify.'+innerColumnHeader[i]["display"] | translate}}&nbsp;({{currencyCode}})
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']=='Rate'">
                                                                                {{ 'Modify.'+innerColumnHeader[i]["display"] | translate}}&nbsp;(%)
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']=='ExcessPercent'">
                                                                                {{ 'Modify.Excess' | translate}}
                                                                            </ng-container>
                                                                            <ng-container
                                                                                *ngIf="innerColumnHeader[i]['display']!='SumInsured' && innerColumnHeader[i]['display']!='ExcessPercent' && innerColumnHeader[i]['display']!='Rate' && innerColumnHeader[i]['display']!='Minimum' && innerColumnHeader[i]['display']!='AfterDiscount' && innerColumnHeader[i]['display']!='IncludedTax' && innerColumnHeader[i]['display']!=''">
                                                                                {{ 'Modify.'+innerColumnHeader[i]["display"] | translate}}
                                                                            </ng-container>

                                                                        </th>
                                                                        <td mat-cell class="customCellInner"
                                                                            *matCellDef="let subElement">
                                                                            <ng-container
                                                                                *ngIf="!col.config; else hasConfig">
                                                                                <ng-container *ngIf="col.key=='Status'">
                                                                                    <span
                                                                                        *ngIf="subElement[col.key]=='Y'">Active</span>
                                                                                    <span
                                                                                        *ngIf="subElement[col.key]!='Y'">DeActive</span>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.key!='Status' && col.key!='CalcType'">
                                                                                    {{ subElement[col.key] }}
                                                                                </ng-container>

                                                                            </ng-container>
                                                                            <ng-template #hasConfig>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isChecked">
                                                                                    <mat-checkbox class="example-margin"
                                                                                        [(ngModel)]="subElement[col.config.model]"
                                                                                        (change)="onSelectCustomer.emit(subElement)">
                                                                                    </mat-checkbox>
                                                                                </ng-container>
                                                                                <ng-container *ngIf="col.config.select">
                                                                                    &nbsp;&nbsp;
                                                                                    <ng-container
                                                                                        *ngIf="subElement.MultiSelectYn=='Y'">
                                                                                        <mat-checkbox
                                                                                            class="example-margin"
                                                                                            [checked]="subElement.selected"
                                                                                            (change)="onChangeSubCover(subElement,element,menu,$event.checked)">
                                                                                        </mat-checkbox>
                                                                                    </ng-container>
                                                                                    <ng-container
                                                                                        *ngIf="subElement.MultiSelectYn!='Y'">
                                                                                        <mat-radio-button
                                                                                            [checked]="checkSubCoverSelection(subElement)"
                                                                                            [id]="'customRadio'+subElement[col.key]"
                                                                                            name="customRadio" [disabled]="(element.isSelected=='D' && !endorseCovers) ||  checkCoverSelection(menu,element)"
                                                                                            (change)="onChangeSubCover(subElement,element,menu,$event.checked)">
                                                                                        </mat-radio-button>
                                                                                    </ng-container>
                                                                                </ng-container>
                                                                                <ng-container *ngIf="col.config.isEdit">
                                                                                    <button
                                                                                        class="btn btn-primary btn-sm"
                                                                                        (click)="onEdit.emit(subElement)">
                                                                                        <i class="fas fa-marker"></i>
                                                                                    </button>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isConfigure">
                                                                                    <button
                                                                                        class="btn btn-primary btn-sm"
                                                                                        (click)="onConfigure.emit(subElement)">
                                                                                        <i class="fas fa-cog"></i>
                                                                                    </button>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isRemove">
                                                                                    <button
                                                                                        class="btn btn-danger btn-sm">
                                                                                        <i class="fas fa-trash"></i>
                                                                                    </button>
                                                                                </ng-container>
                                                                                <ng-container
                                                                                    *ngIf="col.config.isOpenGridAction">
                                                                                    <button mat-icon-button
                                                                                        [matMenuTriggerFor]="menu"
                                                                                        aria-label="Example icon-button with a menu">
                                                                                        <i
                                                                                            class="fas fa-ellipsis-v"></i>
                                                                                    </button>
                                                                                    <mat-menu #menu="matMenu">
                                                                                        <button mat-menu-item>
                                                                                            <span>Lc Details</span>
                                                                                        </button>
                                                                                        <button mat-menu-item
                                                                                            (click)="onOpenCoverAction.emit({data:subElement,name:'Certificate'})">
                                                                                            <span>Certificate</span>
                                                                                        </button>
                                                                                        <button mat-menu-item
                                                                                            (click)="onOpenCoverAction.emit({data:subElement,name:'Schedule'})">
                                                                                            <span>Schedule</span>
                                                                                        </button>
                                                                                        <button mat-menu-item>
                                                                                            <span>Policy Wording</span>
                                                                                        </button>
                                                                                    </mat-menu>
                                                                                </ng-container>
                                                                            </ng-template>
                                                                        </td>
                                                                    </ng-container>
                                                                    <tr mat-header-row
                                                                        *matHeaderRowDef="['header-row-first-group', 'header-row-second-group']">
                                                                    </tr>
                                                                    <tr mat-header-row *matHeaderRowDef="innerKeys">
                                                                    </tr>
                                                                    <tr mat-row
                                                                        *matRowDef="let element;let i = dataIndex; columns: innerKeys;"
                                                                        [ngClass]="{'striped-row': i % 2}"
                                                                        [class.example-element-row]="element.SubCovers?.length"
                                                                        [class.example-expanded-row]="element?.expanded">
                                                                    </tr>
                                                                </table>
                                                            </div>

                                                        </div>
                                                    </div>
                                                </ng-container>

                                            </td>

                                        </ng-container>
                                        <ng-container *ngIf="!checkReferralStatus()">
                                            <tr mat-header-row
                                                *matHeaderRowDef="['header-row-first-group', 'header-row-second-group']">
                                            </tr>
                                        </ng-container>
                                        <ng-container *ngIf="checkReferralStatus()">
                                            <tr mat-header-row *matHeaderRowDef="['header-row-first-group']">
                                            </tr>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="keys"></tr>
                                        <tr mat-row *matRowDef="let element; columns: keys;let i = dataIndex;"
                                            [ngClass]="{'striped-row': i % 2}"
                                            [class.example-element-row]="element.SubCovers?.length"
                                            [class.example-expanded-row]="element?.expanded"></tr>
                                        <tr mat-row *matRowDef="let row;let j = dataIndex; columns: ['expandedDetail']"
                                            [ngClass]="{'striped-row': j % 2}" class="example-detail-row"></tr>
                                        <ng-container *ngIf="!checkReferralStatus()">
                                            <tr mat-footer-row *matFooterRowDef="keys"></tr>
                                        </ng-container>

                                    </table>

                                </div>
                            </div>
                        </div>
                    </ng-container>
                </div>
                <!-- <div class="col-12 col-xl-12 col-lg-12" *ngIf="showGrid">
                    <div class="ClausesList" *ngIf="clauses && showGrid">
                        <div>
                            <div>


                                <div class="flex flex-wrap  justify-content-between maan-grid-item-title">
                                    <p class="mx-1" st><span class="spancommon span_font_size">Clauses List
                                            Details</span>

                                    </p>
                                    <button type="button" class="custom-btn btn-6 maan-button-data"
                                        (click)="editClauses(i)" *ngIf="button && !endorsementSection">
                                        Add Clauses
                                    </button>
                                </div>
                                <ng-container *ngIf="ClausesData">

                                    <app-grid-table [cols]="ClauseColumnHeader" [data]="ClausesData"
                                        [filterValue]="filterValue" *ngIf="userType=='Broker' && !endorsementSection">
                                    </app-grid-table>

                                    <table *ngIf="userType!='Broker'" class="styled-table">

                                        <thead>
                                            <tr>
                                                <th class="spancommon span_font_size">Select</th>

                                                <th class="spancommon span_font_size">ClauseDescription</th>
                                            </tr>
                                        </thead>

                                        <tbody
                                            *ngFor="let clause of ClausesData|paginate:{itemsPerPage: 10, currentPage:p,id: 'p'}; let i=index;">
                                            <tr>
                                                <td>
                                                    <input type="checkbox" (change)="onCheckUser(i,$event,clause)"
                                                        [disabled]="endorsementSection"
                                                        [checked]="clause.TypeId == 'D' ? true : false">
                                                </td>

                                                <td>
                                                    <div class="input-control-container">
                                                        <div class="input-form-box">
                                                            <textarea [(ngModel)]="clause.SubIdDesc" cols="90"
                                                                [disabled]="endorsementSection" rows="2"></textarea>
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </ng-container>
                            </div>
                            <div class="d-flex justify-content-end" *ngIf="userType!='Broker'">
                                <pagination-controls (pageChange)="p=$event" id="p"></pagination-controls>
                            </div>
                            <div class="d-flex justify-content-center">
                                <button class="custom-btn btn-5 ui-btn" style="margin-right:10px !important;"
                                    (click)="OnClose()">Close</button>
                                <button class="custom-btn btn-6 ml-2 ui-btn-2" *ngIf="userType!='Broker' && !endorsementSection"
                                    (click)="saveClausesData(ClausesData,'Clauses')">Submit</button>
                            </div>
                        </div>
                    </div>
                    <div class="ClausesList" *ngIf="Exclusion && showGrid">
                        <div>
                            <div>
                                <div class="flex flex-wrap  justify-content-between maan-grid-item-title">
                                    <p class="mx-1" st><span class="spancommon span_font_size"> Exclusion List
                                            Details</span>

                                    </p>
                                    <button type="button" class="btn btn-success" (click)="editExclusion(i)"
                                        *ngIf="button && !endorsementSection">
                                        Add Exclusion
                                    </button>
                                </div>
                                <ng-container *ngIf="ExclusionData">

                                    <app-grid-table [cols]="ExclusionsColumnHeader" [data]="ExclusionData"
                                        [filterValue]="filterValue" *ngIf="userType=='Broker' && !endorsementSection">
                                    </app-grid-table>
                                    <table *ngIf="userType!='Broker'" class="styled-table">

                                        <thead>
                                            <tr>
                                                <th>Select</th>

                                                <th>ExclusionDescription</th>
                                            </tr>
                                        </thead>

                                        <tbody
                                            *ngFor="let clause of ExclusionData|paginate:{itemsPerPage: 10, currentPage:s,id: 's'} ; let i=index;">
                                            <tr>
                                                <td><input type="checkbox" [disabled]="endorsementSection"
                                                        (change)="onUser(i,$event,clause)"
                                                        [checked]="clause.TypeId == 'D' ? true : false"> </td>

                                                <td>
                                                    <div class="input-control-container">
                                                        <div class="input-form-box">
                                                            <textarea [(ngModel)]="clause.SubIdDesc"
                                                                [disabled]="endorsementSection" cols="90"
                                                                rows="2"></textarea>
                                                        </div>
                                                    </div>

                                                </td>


                                            </tr>
                                        </tbody>

                                    </table>
                                </ng-container>
                            </div>
                            <div class="d-flex justify-content-end" *ngIf="userType!='Broker'">
                                <pagination-controls (pageChange)="s=$event" id="s"></pagination-controls>
                            </div>
                            <div class="d-flex justify-content-center">
                                <button class="custom-btn btn-5 ui-btn" style="margin-right:10px !important;"
                                    (click)="OnClose()">Close</button>
                                <button class="custom-btn btn-6 ml-2 ui-btn-2" *ngIf="userType!='Broker' && !endorsementSection"
                                    (click)="saveClausesData(ExclusionData,'Exclusion')">Submit</button>
                            </div>
                        </div>
                    </div>
                    <div class="ClausesList" *ngIf="warranty && showGrid">
                        <div>
                            <div>
                                <div class="flex flex-wrap  justify-content-between maan-grid-item-title">
                                    <p class="mx-1" st><span class="spancommon span_font_size">Warranty List
                                            Details</span>

                                    </p>
                                    <button type="button" class="btn btn-success" (click)="editWarranty(i)"
                                        *ngIf="button && !endorsementSection">
                                        Add Warranties
                                    </button>
                                </div>
                                <ng-container *ngIf="WarrantyData">
                                    <app-grid-table [cols]="WarrantiesColumnHeader" [data]="WarrantyData"
                                        [filterValue]="filterValue" *ngIf="userType=='Broker' && !endorsementSection">
                                    </app-grid-table>
                                    <table *ngIf="userType!='Broker'" class="styled-table">
                                        <thead>
                                            <tr>
                                                <th>Select</th>

                                                <th>WarrantiesDescription</th>
                                            </tr>
                                        </thead>

                                        <tbody
                                            *ngFor="let clause of WarrantyData|paginate:{itemsPerPage: 10, currentPage:pa, id:'pa'}; let i=index;">
                                            <tr>
                                                <td><input type="checkbox" [disabled]="endorsementSection"
                                                        (change)="onCheck(i,$event,clause)"
                                                        [checked]="clause.TypeId == 'D' ? true : false"> </td>

                                                <td>
                                                    <div class="input-control-container">
                                                        <div class="input-form-box">
                                                            <textarea [(ngModel)]="clause.SubIdDesc" cols="90"
                                                                [disabled]="endorsementSection" rows="2"></textarea>
                                                        </div>
                                                    </div>
                                                </td>


                                            </tr>
                                        </tbody>

                                    </table>
                                </ng-container>
                            </div>
                            <div class="d-flex justify-content-end" *ngIf="userType!='Broker'">
                                <pagination-controls (pageChange)="pa=$event" id="pa"></pagination-controls>
                            </div>
                            <div class="d-flex justify-content-center">
                                <button style="margin-right:10px !important;" class="custom-btn btn-5 ui-btn "
                                    (click)="OnClose()">Close</button>
                                <button class="custom-btn btn-6 ml-2 ui-btn-2" *ngIf="userType!='Broker' && !endorsementSection"
                                    (click)="saveClausesData(WarrantyData,'Warranty')">Submit</button>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>
            <!-- <div class="flex flex-wrap" *ngIf="(subuserType=='low' && !endorsementSection) && !showGrid"> -->
                <!-- <ng-container >
                    <h3 style="margin-left: 15px;">Excess Details</h3><br>
                </ng-container> -->
                <!-- <div class="grid mt-2" >
                    <div class="col-12 md:col-1 md:col-1 lg:col-1 xl:col-1"></div>
                    <div class="col-12 md:col-10 md:col-10 lg:col-10 xl:col-10">
                         <table class="table table-bordered p-1" style="overflow-x:clip !important;width:100%;">
                             <thead>
                                 <tr class="firstclass" style="background-color: #042181;color:#fff">
                                     <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Section Name
                                     </th>
                                     <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Cover Name</th>
                                     <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Excess Description</th>
                                     <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Excess (%)</th>
                                     <th scope="col" class="spancommon span_font_size p-2" style="text-align:center;">Excess Amount ({{currencyCode}})</th>
                                     
                                     
                                 </tr>
                             </thead>
                             <tbody>
                                    <ng-container *ngFor="let excess of excessList">
                                        <tr *ngIf="checkExcessData(excess)">
                                            <td class="text-center">{{getSectionName(excess)}}</td>
                                            <td class="text-center">{{getExcessCoverName(excess)}}</td>
                                            <td class="text-center">{{excess.ExcessDescription}}</td>
                                            <td class="text-center">
                                                <ng-container
                                                    *ngIf="((!adminSection && userType!='Issuer') || (endorsementSection) ) || finalizeYN=='Y'">
                                                    <span class="spancommon span_font_size">{{excess.ExcessPercentage}}</span>
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                                    <input type="text"
                                                        style="width: auto !important;max-width:150px;text-align:left !important"
                                                        [(ngModel)]="excess.ExcessPercentage">
                                                </ng-container>
                                            </td>
                                            <td class="text-center">
                                                 <ng-container
                                                    *ngIf="((!adminSection && userType!='Issuer') || (endorsementSection) ) || finalizeYN=='Y'">
                                                    <span class="spancommon span_font_size">{{excess.ExcessAmount}}</span>
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                                    <input type="text"
                                                        style="width: auto !important;max-width:150px;text-align:left !important"
                                                        [(ngModel)]="excess.ExcessAmount">
                                                </ng-container>
                                            </td>

                                        </tr>
                                    </ng-container>
                                    
                            </tbody>
                        </table>
                    </div>
                </div>  -->
            <ng-container *ngIf="(subuserType=='low' && !endorsementSection)">
                <div class="flex flex-wrap justify-content-center mb-2"
                    *ngIf="finalizeYN=='N'">
                    <p-button label="Calculate" (click)="onUpdateFactor('calculate')" class="p-3 text-l mr-0"
                        styleClass="mb-4"></p-button>
                </div>
            </ng-container>
            
            <!-- </div> -->
            
            <div class="flex flex-wrap justify-content-center mb-2" *ngIf="adminSection">
                <p-button label="Calculate" (click)="onUpdateFactor('calculate')" class="p-3 text-l mr-0"
                    styleClass="mb-4"></p-button>
            </div>
            <ng-container *ngIf="userType!='Issuer'">
            <div class="grid">
                <!-- <div class="lg:col-3 md:col-3 col-12" *ngIf="(subuserType=='low' && !endorsementSection)">
                    <label class="input-form-label">Do You Finalize this Quote?</label>
                    <div class="flex justify-content-start gap-3 mt-2">
                        <div class="flex align-items-center">
                            <p-radioButton name="Yes" value="Y" [(ngModel)]="finalizeYN"
                                inputId="finalize_Yes"></p-radioButton>
                            <span for="finalize_Yes" class="ml-2">Yes</span>
                        </div>
                        <div class="flex align-items-center">
                            <p-radioButton name="No" value="N" [(ngModel)]="finalizeYN"
                                inputId="finalize_No"></p-radioButton>
                            <span for="finalize_No" class="ml-2">No</span>
                        </div>
                    </div>  
                </div> -->
                <div class="lg:col-3 md:col-3 col-12" *ngIf="isMannualReferal != 'Y' && (coverSection && (((!statusValue || checkManualReferral()) && !adminSection) || (statusValue && adminSection ))) && ((!this.endorsementSection) || (this.endorsementSection && this.endorsementCategory=='Financial')) && gridshow && insuranceId!='100028'" >
                    <label class="input-form-label">{{ 'Modify.DoYouLiketoChooseEMIOption?' | translate}}</label>
                    <div class="flex justify-content-start gap-3 mt-1">
                        <div class="flex align-items-center">
                            <p-radioButton name="emiYN" value="Y" (click)="onEmiYNChange()" [(ngModel)]="emiYN"
                                inputId="emi_Yes"></p-radioButton>
                            <span for="emi_Yes" class="ml-2">{{ 'Modify.Yes' | translate}}</span>
                        </div>
                        <div class="flex align-items-center">
                            <p-radioButton name="emiYN" value="N" (click)="onEmiYNChange()" [(ngModel)]="emiYN"
                                inputId="emi_No"></p-radioButton>
                            <span for="emi_No" class="ml-2">{{ 'Modify.No' | translate}}</span>
                        </div>
                    </div>
                </div>
                <div class="lg:col-3 md:col-3 col-12" *ngIf="((!statusValue || checkManualReferral()) && !adminSection) && ((!this.endorsementSection) || (this.endorsementSection && this.endorsementCategory=='Financial'))">
                    <label class="input-form-label">{{ 'Modify.DoYouLiketoMovethisQuotetoReferralManually?' | translate}}</label>
                    <div class="flex justify-content-start gap-3 mt-2">
                        <div class="flex align-items-center">
                            <p-radioButton name="referral" value="Y" [(ngModel)]="isMannualReferal"
                                inputId="referral_Yes"></p-radioButton>
                            <span for="referral_Yes" class="ml-2">{{ 'Modify.Yes' | translate}}</span>
                        </div>
                        <div class="flex align-items-center">
                            <p-radioButton name="referral" value="N" [(ngModel)]="isMannualReferal"
                                inputId="referral_No"></p-radioButton>
                            <span for="referral_No" class="ml-2">{{ 'Modify.No' | translate}}</span>
                        </div>
                    </div>
                </div>
                <ng-container *ngIf="isMannualReferal == 'Y'">
                    <div class="lg:col-3 md:col-3 col-12" *ngIf="((!statusValue || checkManualReferral()) && !adminSection) && ((!this.endorsementSection) || (this.endorsementSection && this.endorsementCategory=='Financial'))">
                        <div class="mb-3">
                                <label class="input-form-label">{{ 'Modify.Remarks' | translate}}</label><br>
                                <textarea pInputTextarea cols="40" rows="2" [(ngModel)]="remarks"
                                    style="height: 45px;"></textarea>
                        </div>
                    </div>
                </ng-container>
                <div class="lg:col-5 md:col-5 xl:col-5 col-12  mb-3" style="margin-left: 0px;">
                    <label class="input-form-label">Finalize this Quote?</label>
                    <div class="flex justify-content-start gap-3">
                        <div class="flex align-items-center">
                            <p-radioButton name="Yes" value="Y" [(ngModel)]="finalizeYN"
                                inputId="finalize_Yes"></p-radioButton>
                            <span for="finalize_Yes" class="ml-2">Yes</span>
                        </div>
                        <div class="flex align-items-center">
                            <p-radioButton name="No" value="N" [(ngModel)]="finalizeYN"
                                inputId="finalize_No"></p-radioButton>
                            <span for="finalize_No" class="ml-2">No</span>
                        </div>
                    </div>
                </div>
            </div>
            
            
            <div class="lg:col-12 md:col-12 col-12 ml-3" *ngIf="emiSection && Emilist1.length!=0 && emiYN=='Y' && isMannualReferal != 'Y'">
                <table class="firstclass" style="width:50%;">
                    <thead>
                        <tr class="firstclass">
                            <th scope="col" colspan="3"></th>
                            <th scope="col" colspan="4" style="text-align:center;" class="spancommon span_font_size">
                                {{ 'Modify.InstallmentAmount' | translate}} ({{localCurrency}})
                            </th>
                        </tr>
                        <tr class="firstclass">
                            <th scope="col" class="spancommon span_font_size" style="text-align:center;">{{ 'Modify.EMIMonth' | translate}}
                            </th>
                            <th scope="col" class="spancommon span_font_size" style="text-align:center;">
                                {{ 'Modify.InstallmentType' | translate}}</th>
                            <th scope="col" class="spancommon span_font_size" style="text-align:center;">Due Date
                            </th>
                            <th scope="col" class="spancommon span_font_size" *ngIf="yearlySection" id="first"
                                style="text-align:center">{{ 'Modify.(12 Months)' | translate}}
                            </th>
                            <th scope="col" class="spancommon span_font_size" *ngIf="nineMonthSection" id="second"
                                style="text-align:center">{{ 'Modify.(9 Months)' | translate}}
                            </th>
                            <th scope="col" class="spancommon span_font_size" id="sixth" style="text-align:center"
                                *ngIf="eightMonthSection">{{ 'Modify.(8 Months)' | translate}}
                            </th>
                            <th scope="col" class="spancommon span_font_size" id="third" style="text-align:center"
                                *ngIf="sixMonthSection">{{ 'Modify.(6 Months)' | translate}}
                            </th>
                            <th scope="col" class="spancommon span_font_size" id="fifth" style="text-align:center"
                                *ngIf="fiveMonthSection">{{ 'Modify.(5 Months)' | translate}}
                            </th>
                            <th scope="col" class="spancommon span_font_size" id="fourth" style="text-align:center"
                                *ngIf="threeMonthSection">{{ 'Modify.(3 Months)' | translate}}
                            </th>


                        </tr>
                    </thead>
                    <tbody>
                        <ng-container>
                            <tr *ngFor="let list of Emilist1;let i=index" class="firstclass">
                                <td class="spancommon span_font_size"
                                    style="text-align:center;border: 0.5px solid grey;">
                                    {{list.EmiMonth}}</td>
                                <td class="spancommon span_font_size"
                                    style="text-align:center;border: 0.5px solid grey;">
                                    {{list.InstallmentDesc}}</td>
                                <td class="spancommon span_font_size"
                                    style="text-align:center;border: 0.5px solid grey;">
                                    {{list.DueDate}}</td>
                                <td class="spancommon span_font_size" *ngIf="yearlySection" id="first"
                                    style="text-align:center;border: 0.5px solid grey;">
                                    {{list.yearlyAmount | commaseparator}}</td>
                                <td class="spancommon span_font_size" *ngIf="nineMonthSection" id="second"
                                    style="text-align:center;border: 0.5px solid grey;">
                                    {{list.nineAmount|commaseparator}}</td>
                                <td class="spancommon span_font_size" *ngIf="eightMonthSection"
                                    style="text-align:center;border: 0.5px solid grey;" id="sixth">
                                    {{list.eightAmount | commaseparator}}</td>
                                <td class="spancommon span_font_size" *ngIf="sixMonthSection" id="third"
                                    style="text-align:center;border: 0.5px solid grey;">
                                    {{list.sixAmount | commaseparator}}</td>
                                <td class="spancommon span_font_size" *ngIf="fiveMonthSection"
                                    style="text-align:center;border: 0.5px solid grey;" id="fifth">
                                    {{list.fiveAmount | commaseparator}}</td>
                                <td class="spancommon span_font_size" *ngIf="threeMonthSection"
                                    style="text-align:center;border: 0.5px solid grey;" id="fourth">
                                    {{list.threeAmount | commaseparator}}</td>
                            </tr>
                        </ng-container>
                    </tbody>

                </table>

            </div>
            <div class="col-12 col-md-6" *ngIf="isMannualReferal != 'Y' && emiYN=='Y' && Emilist1.length!=0">
                <div class="mb-3 mt-3">
                        <label class="input-form-label spancommon span_font_size">{{ 'Modify.EMIPeriod' | translate}}</label>
                        <div class="flex justify-content-start gap-3 mt-1">
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="0" [(ngModel)]="emiPeriod"
                                    inputId="emi_None"></p-radioButton>
                                <span for="emi_None" class="ml-2">{{ 'Modify.None' | translate}}</span>
                            </div>
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="3" [(ngModel)]="emiPeriod"
                                    inputId="emi_three"></p-radioButton>
                                <span for="emi_three" class="ml-2">{{ 'Modify.3Months' | translate}}</span>
                            </div>
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="5" [(ngModel)]="emiPeriod"
                                    inputId="emi_five"></p-radioButton>
                                <span for="emi_five" class="ml-2">{{ 'Modify.5Months' | translate}}</span>
                            </div>
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="6" [(ngModel)]="emiPeriod"
                                    inputId="emi_six"></p-radioButton>
                                <span for="emi_six" class="ml-2">{{ 'Modify.6Months' | translate}}</span>
                            </div>
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="8" [(ngModel)]="emiPeriod"
                                    inputId="emi_eight"></p-radioButton>
                                <span for="emi_eight" class="ml-2">{{ 'Modify.8Months' | translate}}</span>
                            </div>
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="9" [(ngModel)]="emiPeriod"
                                    inputId="emi_nine"></p-radioButton>
                                <span for="emi_nine" class="ml-2">{{ 'Modify.9Months' | translate}}</span>
                            </div>
                            <div class="flex align-items-center">
                                <p-radioButton name="emiPeriod" (change)="onEMIChange()" value="12" [(ngModel)]="emiPeriod"
                                    inputId="emi_twelve"></p-radioButton>
                                <span for="emi_twelve" class="ml-2">{{ 'Modify.12Months' | translate}}</span>
                            </div>
                        </div>
                </div>
            </div>
            </ng-container>
            <ng-container >
            <p-divider  *ngIf="isMannualReferal != 'Y' && (coverSection && (((!statusValue || checkManualReferral()) && !adminSection) || (statusValue && adminSection ))) && ((!this.endorsementSection) || (this.endorsementSection && this.endorsementCategory=='Financial'))"></p-divider>
            <div 
                *ngIf="(coverSection && (((!statusValue || checkManualReferral()) && !adminSection) || (statusValue && adminSection ))) && ((!this.endorsementSection) || (this.endorsementSection && this.endorsementCategory=='Financial'))">
                
                <div *ngIf="statusValue && adminSection">
                    <div class="grid">
                        <div class="col-12 md:col-4 lg:col-4 xl:xol-4" *ngIf="fromWorkFlow==null">
                            <div class="input-control-container">
                                <label class="input-form-label">{{ 'Modify.ReferralStatus' | translate}}</label><span
                                    class="text-danger">*</span>
                                <ng-select class="input-form-select" appendTo="body" [disabled]="!adminSection"
                                    [(ngModel)]="statusValue" [items]="statusList" bindValue="Code"
                                    bindLabel="CodeDesc">
                                </ng-select>
                            </div>
                        </div>
                        <div class="col-12 md:col-3 lg:col-3 xl:xol-3" *ngIf="fromWorkFlow!=null">
                            <div class="input-control-container">
                                <label class="input-form-label">Status</label><span
                                    class="text-danger">*</span>
                                    <p-dropdown inputId="make" class="w-full" styleClass="w-full" [disabled]="!adminSection" [(ngModel)]="statusValue"
                                     [options]="workFlowStatusList" 
                                    optionLabel="ItemValue" optionValue="ItemCode" placeholder="- - -Select- - -">
                                </p-dropdown>
                                
                                <!-- <ng-select class="input-form-select" appendTo="body" 
                                    [(ngModel)]="" [items]="" bindValue=""
                                    bindLabel="">
                                </ng-select> -->
                            </div>
                        </div>
                        <div class="col-12 md:col-4 lg:col-4 xl:xol-4"
                            *ngIf="statusValue && adminSection && statusValue!='RE' && statusValue!='RR' && SourceType!='Premia Broker' && SourceType!='Premia Direct' && SourceType!='Premia Agent'">
                            <div class="input-control-container">
                                <label class="input-form-label">{{ 'Modify.ModifyCommission' | translate}} (%)</label>
                                <!-- <p-selectButton [options]="modifyOptions" [(ngModel)]="modifyCommissionYN"
                                    optionLabel="label" optionValue="value"></p-selectButton> -->
                                <div class="custom-radio-btn" style="position: relative;top: 1rem;right: 0.3rem;">
                                    <div class="radio-toolbar">
                                        <input id="commission_Yes" type="radio" [(ngModel)]="modifyCommissionYN"
                                            name="commission" value="Y">
                                        <label for="commission_Yes" class="yes">{{ 'Modify.Yes' | translate}}</label>
                                        <input type="radio" id="commission_No" [(ngModel)]="modifyCommissionYN"
                                            name="commission" value="N">
                                        <label for="commission_No" class="no">{{ 'Modify.No' | translate}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-12 md:col-4 lg:col-4 xl:col-4"
                            *ngIf="modifyCommissionYN=='Y' && SourceType!='Premia Broker' && SourceType!='Premia Direct' && SourceType!='Premia Agent'">
                            <label class="input-form-label">{{ 'Modify.Commission' | translate}} (%)<span class="text-required">*</span></label>
                                    <input type="text" class="w-full"
                                        [(ngModel)]="commissionPercent" pInputText name="commissionPercent" maxlength="5">
                        </div>


                    </div>
                    <div class="grid">
                        <div class="col-12 md:col-4 lg:col-4 xl:col-4 ml-4" *ngIf="statusValue=='RR'">
                                <label class="input-form-label">{{ 'Modify.RejectedReason' | translate}}</label>
                                    <input type="text" pInputText [(ngModel)]="rejectedReason" maxlength="100" [disabled]="!adminSection"
                                        class="w-full">
                        </div>
                        <div class="col-12 md:col-4 lg:col-4 xl:col-4">
                                <label class="input-form-label">{{ 'Modify.Remarks' | translate}}<span class="text-required">*</span></label>
                                    <textarea cols="120" rows="2" pInputTextarea  [(ngModel)]="remarks" [disabled]="!adminSection"
                                        class="w-full" maxlength="1000"></textarea>
                        </div>
                    </div>
                </div>
            </div>
            </ng-container>
            <!-- <ng-container *ngIf="fromWorkFlow!=null">
                <div class="grid">
                    <div class="col-12 md:col-3 lg:col-3 xl:xol-3">
                        <div class="input-control-container">
                            <label class="input-form-label">Status</label><span
                                class="text-danger">*</span>
                                <p-dropdown inputId="make" class="w-full" styleClass="w-full" [disabled]="!adminSection" [(ngModel)]="statusValue"
                                 [options]="workFlowStatusList" 
                                optionLabel="ItemValue" optionValue="ItemCode" placeholder="- - -Select- - -">
                            </p-dropdown>
                            
                        </div>
                    </div>
                    <div class="col-12 md:col-3 lg:col-3 xl:col-3">
                        <label class="input-form-label">{{ 'Modify.Remarks' | translate}}<span class="text-required">*</span></label>
                            <textarea cols="120" rows="2" pInputTextarea  [(ngModel)]="remarks" [disabled]="!adminSection"
                                class="w-full" maxlength="1000"></textarea>
                </div>
                </div>
            </ng-container> -->
        </div>
        <div class="lg:col-3 md:col-3 col-12 p-0" *ngIf="vehicleDetailsList.length!=1 && vehicleDetailsList.length!=0">
            <div class="flex flex-wrap  justify-content-between">
                <div>
                    <h3><i class="fas fa-book mx-1"></i>&nbsp;{{ 'Modify.OverAllPremium' | translate}}</h3>
                </div>
            </div>
            <div *ngIf="coverSection">
                <div style="margin: 0px !important;top:0rem;bottom: 0rem !important;padding-top: 9px !important;">

                </div>
                <div class="p-1"
                    style="min-height: 175px !important;max-height: 440px !important;border-bottom: 0px solid grey !important;">

                    <div class="row p-0">
                        <div class="col-md-12 col-12 col-lg-12 col-sm-12"
                            style="padding: 1px !important;min-height:150px !important;max-height: 420px !important;overflow-y: scroll !important;overflow-x: hidden !important;margin-bottom: 0px !important;">
                            <table class="table" style="padding: 6px !important;">
                                <thead>
                                    <tr>
                                        <th scope="col">
                                            <ng-container *ngIf="productId=='5'"><b>{{ 'PolicyGrid.RegistrationNo' | translate}}</b></ng-container>
                                            <ng-container *ngIf="productId=='4'"><b>{{ 'Modify.Passengers' | translate}}</b></ng-container>
                                            <ng-container
                                                *ngIf="productId!='59' && productId!='4' && productId!='5' && productId!='19' && productId!='14' && productId!='32'"><b>{{'Modify.Product' | translate}}</b></ng-container>
                                            <ng-container
                                                *ngIf="productId=='59' || productId=='19' || productId=='14' || productId=='32'"><b>{{'Modify.Section' | translate}}</b></ng-container>
                                        </th>
                                        <th scope="col"></th>
                                        <th scope="col" style="text-align: end;"><b>{{'Modify.Premium' | translate}}</b></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let menu of vehicleDetailsList">
                                        <td>
                                            <ng-container *ngIf="productId=='5'">
                                                <span class="spancommon" style="color:navy;font-size: 13px;cursor: pointer;" (click)="onSelectSectionIndex(menu)">
                                                &nbsp;<u>
                                                    <ng-container *ngIf="menu.SectionName">
                                                        {{menu.SectionName}}  &nbsp;|&nbsp;
                                                    </ng-container> 
                                                    {{ menu.RiskDetails.Registrationnumber }}
                                                </u></span>
                                            </ng-container>
                                            <ng-container *ngIf="productId=='4'">
                                                <ng-container *ngIf="menu.RiskDetails.TravelId=='1'">
                                                    <span class="spancommon"
                                                        style="color:navy;font-size: 13px;">{{'Modify.Kids' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                                </ng-container>
                                                <ng-container *ngIf="menu.RiskDetails.TravelId=='2'">
                                                    <span class="spancommon"
                                                        style="color:navy;font-size: 13px;">{{'Modify.Adults' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                                </ng-container>
                                                <ng-container *ngIf="menu.RiskDetails.TravelId=='3'">
                                                    <span class="spancommon"
                                                        style="color:navy;font-size: 13px;">{{'Modify.Seniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                                </ng-container>
                                                <ng-container *ngIf="menu.RiskDetails.TravelId=='4'">
                                                    <span class="spancommon" style="color:navy;font-size: 13px;">{{'Modify.SuperSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                                </ng-container>
                                                <ng-container *ngIf="menu.RiskDetails.TravelId=='5'">
                                                    <span class="spancommon" style="color:navy;font-size: 13px;">{{'Modify.GrandSeniors' | translate}}&nbsp;({{menu.RiskDetails.TotalPassengers}})</span>

                                                </ng-container>
                                                <span class="spancommon" style="color:navy;font-size: 13px;">
                                                    &nbsp;|&nbsp;
                                                    {{menu.RiskDetails.DestinationCountry}}
                                                    &nbsp;|&nbsp; {{ menu.RiskDetails.TravelStartDate }} &nbsp;~&nbsp;
                                                    {{
                                                    menu.RiskDetails.TravelEndDate }}</span>
                                            </ng-container>
                                            <ng-container
                                                *ngIf="productId!='59' && productId!='4' && productId!='5' && productId!='19' && productId!='14' && productId!='32'">
                                                <span class="spancommon" style="color:navy;font-size: 13px;">
                                                    {{menu.LocationName}}
                                                </span>
                                            </ng-container>
                                            <ng-container *ngIf="productId=='59'">
                                                <span class="spancommon" style="color:navy;font-size: 13px;cursor: pointer;" (click)="onSelectSectionIndex(menu)">
                                                    {{menu.LocationName}}
                                                </span>
                                            </ng-container>
                                            <ng-container
                                                *ngIf="productId=='19' || productId=='14' || productId=='32'">
                                                <ng-container *ngIf="enableSections">
                                                    <mat-checkbox class="example-margin"
                                                        [checked]="checkSelectedSections(menu)"
                                                        [disabled]="checkSectionDisable(menu)"
                                                        (change)="onSelectSections($event.checked,menu)">
                                                        <span class="spancommon"
                                                            style="color:navy;font-size: 12px;cursor: pointer;line-height: 11px !important;"
                                                            (click)="onSelectSectionIndex(menu)">
                                                            {{menu.LocationName}}
                                                        </span>
                                                    </mat-checkbox>
                                                </ng-container>
                                                <ng-container *ngIf="!enableSections">
                                                    <span class="spancommon"
                                                        style="color:navy;font-size: 13px;cursor: pointer;"
                                                        (click)="onSelectSectionIndex(menu)">
                                                        {{menu.LocationName}}
                                                    </span>
                                                </ng-container>
                                            </ng-container>
                                        </td>
                                        <td></td>
                                        <td style="text-align: end;">
                                            <ng-container *ngIf="checkReferralStatus()">
                                                0
                                            </ng-container>
                                            <ng-container *ngIf="!checkReferralStatus()">
                                                <ng-container
                                                    *ngIf="getTotalCost(menu)==undefined || getTotalCost(menu)=='0' || getTotalCost(menu)==0">
                                                    0
                                                </ng-container>
                                                <ng-container
                                                    *ngIf="getTotalCost(menu)!=undefined && getTotalCost(menu)!='0' && getTotalCost(menu)!=0">
                                                    {{getTotalCost(menu)|commaseparator}}
                                                </ng-container>
                                            </ng-container>
                                        </td>
                                    </tr>
                                </tbody>
                                <!-- <tfoot>
                                    <tr>
                                        <td><b>Total</b></td>
                                        <td></td>
                                        <td style="text-align: end;">{{totalPremium | number :
                                            '1.2-2'}}</td>
                                    </tr>
                                </tfoot> -->
                            </table>
                        </div>
                    </div>
                    <div class="flex flex-wrap  justify-content-between botomdisplay">
                        <div><span class="spancommon" style="color:rgb(22, 22, 37);font-size: 16px;"><b>{{'PREMIUM.Total' | translate}}</b></span>
                        </div>
                        <div style="text-align: end;"><span class="spancommon"
                                style="color:rgb(75, 75, 161);font-size: 16px;"><b>
                                    <ng-container *ngIf="checkReferralStatus()">
                                        0
                                    </ng-container>
                                    <ng-container *ngIf="!checkReferralStatus()">
                                        {{totalPremium | number : '1.3-3'}}
                                    </ng-container>
                                </b></span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" *ngIf="otpSection">
        <div class="col-md-5 col-lg-4 col-xl-4">
            <div class="customImage"></div>
        </div>
        <div class="col-md-6 col-lg-7 col-xl-7 offset-lg-1 offset-md-1 customAuthPanel">
            <div class="card-header">
                <div class="flex flex-wrap  justify-content-between">
                    <div>
                        <span class="mx-1">
                            {{'Modify.OtpVerification' | translate}}
                        </span>
                    </div>
                    <div>

                    </div>
                </div>
            </div>
            <div class="card-body">
                <div class="text-end">
                    <h5>Generated OTP ~ &nbsp;&nbsp; {{otpGenerated}}</h5>
                </div>
                <div class="row">
                    <div class="col-md-10 col-lg-10 col-10 offset-1">
                        <div class="input-control-container">
                            <label class="input-form-label">OTP Number</label><span class="text-danger">*</span>
                            <div class="input-form-box">
                                <input type="text" class="input-form-control without-icon" maxlength="10"
                                    [(ngModel)]="otpValue" name="otpValue" required appNumbersOnly>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center">
                    Not Received OTP?
                    <button class="btn btn-primary" (click)="generateOtp()" [disabled]="OtpBtnEnable">
                        Resend OTP
                        <span *ngIf="OtpBtnEnable">in ( {{ OtpBtnTime }} seconds)</span>
                    </button>
                </div>
                <div class="text-center mt-4">

                    <button class="custom-btn btn-6 maan-button-data mx-2" [disabled]="otpValue == ''"
                        (click)="onOtpValidate()" style="width: 11rem" matRipple>Submit</button>
                </div>
            </div>
        </div>
    </div>
    <div class="row botomdisplay">
        <div class="text-center my-3">
            <p-button label="<< Back" styleClass="mr-3 mb-3 p-button-outlined" (click)="ongetBack()"></p-button>&nbsp;
            <p-button label="Buy Policy"
                *ngIf="!adminSection && userType=='Issuer' && statusValue == 'RA' && !otpSection && !endorsementSection"
                (click)="updateFinalizeYN('proceed')" class="p-3 text-l mr-0"></p-button>
            <p-button label="Buy Policy"
                *ngIf="!adminSection && (userType!='Issuer'  || (userType=='Issuer' && subuserType=='low' && endorsementSection)) && (statusValue == 'RA' || (userType=='Issuer' && subuserType=='low' && endorsementSection)) && !otpSection"
                (click)="onFormSubmit()" class="p-3 text-l mr-0" styleClass="mb-3"></p-button>
            <p-button label="Buy Policy"
                *ngIf="!adminSection && (userType!='Issuer') && statusValue != 'RA' && !otpSection"
                (click)="onFormSubmit()" class="p-3 text-l mr-0" styleClass="mb-3"></p-button>
            <p-button label="Buy Policy"
                *ngIf="userType=='Issuer' && subuserType=='low'  && statusValue != 'RA' && !endorsementSection"
                (click)="updateFinalizeYN('proceed')" class="p-3 text-l mr-0" styleClass="mb-3"></p-button>
            <p-button label="Proceed" *ngIf="adminSection" (click)="onUpdateFactor('')" class="p-3 text-l mr-0"
                styleClass="mb-3"></p-button>
        </div>
    </div>
</div>

<ng-template #Add>
    <div class="card">
        <table>
            <thead>
                <td>Select</td>
                <td>Description</td>
                <td>SubId</td>
            </thead>
            <tbody>
                <td><input type="checkbox"> </td>
                <td><textarea>Clauses Details</textarea></td>
                <td>1</td>
            </tbody>

        </table>
    </div>
</ng-template>

<ng-template #mymodal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"><span class="spancommon span_font_size">Vehicle
                Details</span></h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="maan-grid-item popover-card customTemplatess shawdowcustom">

            <div class="maan-grid-item-title">
                <div class="flex flex-wrap  justify-content-between">
                    <div>
                        <span class="mx-1">
                            <i class="fa fa-user mx-1"></i>
                        </span>
                        <span class="spancommon span_font_size" style="font-weight:600">Customer Details</span>
                    </div>
                    <div>
                        <ng-container>
                        </ng-container>
                    </div>
                </div>
            </div>
            <div class="maan-grid-item-body">
                <div class="row mt-1  ml-1">
                    <div class="col-12 col-md-3 ">
                        <div class="input-control-container">
                            <label class="input-form-label"><span class="spancommon span_font_size">Customer
                                    Name</span></label>
                            <div class="input-form-radio-box">
                                <span class="spancommon span_font_size">{{title}}&nbsp;{{clientName}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-3">
                        <div class="input-control-container">
                            <label class="input-form-label"><span class="spancommon span_font_size">Customer
                                    ID</span></label>
                            <div class="input-form-radio-box">
                                <span class="spancommon span_font_size">{{idNumber}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-3">
                        <div class="input-control-container">
                            <label class="input-form-label"><span class="spancommon span_font_size">Customer
                                    Type</span>
                            </label>
                            <div class="input-form-radio-box">
                                <span class="spancommon span_font_size">{{clientType}}</span>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-3">
                        <div class="input-control-container">
                            <label class="input-form-label">
                                <span class="spancommon span_font_size">Mobile Number</span>
                            </label>
                            <div class="input-form-radio-box">
                                <span class="spancommon span_font_size">{{mobileNo}}</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="maan-grid-item">
                <div class="maan-grid-item-title">
                    <div class="flex flex-wrap  justify-content-between">
                        <div>
                            <span class="mx-1">
                                <i class="fas fa-car mx-1"></i>
                            </span><span class="spancommon span_font_size" style="font-weight:600">Motor
                                Details</span>
                        </div>
                        <div>
                        </div>
                    </div>

                </div>
                <div class="maan-grid-item-body">
                    <ul class="list-group">
                        <li class="customList">
                            <div class="row mt-1  ml-1">
                                <div class="col-12 col-md-3 ">
                                    <div class="input-control-container">
                                        <label class="input-form-label"><span
                                                class="spancommon span_font_size">Make</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span class="spancommon span_font_size">{{motorDetails?.Vehiclemake}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label"><span
                                                class="spancommon span_font_size">Model</span></label>
                                        <div class="input-form-radio-box">
                                            <span class="spancommon span_font_size">
                                                {{motorDetails?.Vehcilemodel}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Body Type</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span class="spancommon span_font_size">{{motorDetails?.VehicleType}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Vehicle Usage</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span class="spancommon span_font_size">
                                                {{motorDetails?.Motorusage}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="customList">
                            <div class="row mt-1  ml-1">
                                <div class="col-12 col-md-3 ">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Registration No</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span
                                                class="spancommon span_font_size">{{motorDetails?.Registrationnumber}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Engine No</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span
                                                class="spancommon span_font_size">{{motorDetails?.EngineNumber}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Engine Capacity</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span
                                                class="spancommon span_font_size">{{motorDetails?.ResEngineCapacity}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Manufacture Year</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span
                                                class="spancommon span_font_size">{{motorDetails?.ManufactureYear}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                        <li class="customList">
                            <div class="row mt-1  ml-1">
                                <div class="col-12 col-md-3 ">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Owner category</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span
                                                class="spancommon span_font_size">{{motorDetails?.OwnerCategory}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Motor Category</span>
                                        </label>
                                        <div class="input-form-radio-box"><span
                                                class="spancommon span_font_size">{{motorDetails?.ReqMotorCategory}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Seating Capacity</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span class="spancommon span_font_size">
                                                {{motorDetails?.SeatingCapacity}}</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-12 col-md-3">
                                    <div class="input-control-container">
                                        <label class="input-form-label">
                                            <span class="spancommon span_font_size">Tare Weight</span>
                                        </label>
                                        <div class="input-form-radio-box">
                                            <span class="spancommon span_font_size">{{motorDetails?.Tareweight}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer" style="box-shadow: inset 0px 0px 0px #b8b9be,inset -3px 0px 0px #FFE!important;">
        <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Ok</button>
    </div>
</ng-template>
<ng-template #mymodalEdit let-modal>
    <div class="modal-header">
        <h4 class="modal-title spancommon span_font_size" id="modal-basic-title">Vehicle Details</h4>
        <button type="button" class="close" #closeModal aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="maan-grid-item popover-card customTemplatess shawdowcustom" style="display: block;"
            data-keyboard="false" data-bs-backdrop="static">
            <div class="maan-grid-item-title">
                <div class="flex flex-wrap  justify-content-between">
                    <div>
                        <span class="mx-1 spancommon span_font_size" style="font-weight:600"><i
                                class="fas fa-book mx-1"></i>Policy Details</span>
                    </div>
                    <div>

                    </div>
                </div>

            </div>
            <div class="maan-grid-item-body">
                <div class="row ml-1">
                    <div class="col-12 col-md-6">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Insurance
                                Type</label><span class="text-danger">*</span>
                            <ng-select class="input-form-select" appendTo="body" [items]="typeList"
                                [(ngModel)]="typeValue" bindValue="Code" bindLabel="CodeDesc">
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-12 col-md-6">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Insurance
                                Class</label><span class="text-danger">*</span>
                            <ng-select class="input-form-select" disabled appendTo="body" [items]="classList"
                                [(ngModel)]="classValue" bindValue="Code" bindLabel="CodeDesc">
                            </ng-select>
                        </div>
                    </div>
                </div>
                <div class="row  ml-1">
                    <div class="col-12 col-md-4">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Body Type</label><span
                                class="text-danger">*</span>
                            <ng-select class="input-form-select" disabled appendTo="body" [items]="motorTypeList"
                                [(ngModel)]="bodyTypeValue" (change)="onChangeBodyType()" bindValue="Code"
                                bindLabel="CodeDesc">
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-12 col-md-4">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Motor Usage</label><span
                                class="text-danger">*</span>
                            <ng-select class="input-form-select" disabled appendTo="body" [items]="motorUsageList"
                                [(ngModel)]="motorUsageValue" bindValue="Code" bindLabel="CodeDesc">
                            </ng-select>
                        </div>
                    </div>
                    <div class="col-12 col-md-3 col-lg-3 mt-2">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Claims YN?</label>
                            <div class="input-form-radio-box">
                                <div class="radio-toolbar">
                                    <input id="claims_Yes" type="radio" name="claimsYN" [(ngModel)]="claimsYN"
                                        value="Y">
                                    <label for="claims_Yes" class="yes spancommon span_font_size">Yes</label>
                                    <input id="claims_No" type="radio" name="claimsYN" [(ngModel)]="claimsYN" value="N">
                                    <label for="claims_No" class="no spancommon span_font_size">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4 col-lg-4 mt-2" *ngIf="typeValue=='10'">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">GPS Tracking
                                Enabled?</label>
                            <div class="input-form-radio-box">
                                <div class="radio-toolbar">
                                    <input id="orginwarehouse_Yes" type="radio" name="gpsTracking" [(ngModel)]="gpsYn"
                                        value="Y">
                                    <label for="orginwarehouse_Yes" class="yes spancommon span_font_size">Yes</label>
                                    <input id="orginwarehouse_No" type="radio" name="gpsTracking" [(ngModel)]="gpsYn"
                                        value="N">
                                    <label for="orginwarehouse_No" class="no spancommon span_font_size">No</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row  ml-1">
                    <div class="col-12 col-md-4" *ngIf="classValue=='1' || classValue=='2'">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Vehicle Sum Insured
                                ({{currencyCode}}) &nbsp;<span class="text-danger">*</span></label>
                            <div class="input-form-box">
                                <input type="text" digitOnly [(ngModel)]="vehicleSI" autocomplete="off"
                                    (keydown)="onVehicleValueChange($event)" (keyup)="CommaFormatted()"
                                    class="input-form-control without-icon">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4" *ngIf="classValue=='1' || classValue=='2'">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Accessories Sum Insured
                                ({{currencyCode}})</label>
                            <div class="input-form-box">
                                <input type="text" digitOnly [(ngModel)]="accessoriesSI" autocomplete="off"
                                    (keydown)="onVehicleValueChange($event)" (keyup)="accessoriesCommaFormatted()"
                                    class="input-form-control without-icon">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4" *ngIf="classValue=='1' || classValue=='2'">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">WindShield Sum Insured
                                ({{currencyCode}})</label>
                            <div class="input-form-box">
                                <input type="text" digitOnly [(ngModel)]="windShieldSI" autocomplete="off"
                                    (keydown)="onVehicleValueChange($event)" (keyup)="WindSICommaFormatted()"
                                    class="input-form-control without-icon">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row  ml-1">
                    <div class="col-12 col-md-4" *ngIf="classValue=='1' || classValue=='2'">
                        <div class="input-control-container">
                            <label class="input-form-label spancommon span_font_size">Extended TPPD Sum Insured
                                ({{currencyCode}})</label>
                            <div class="input-form-box">
                                <input type="text" digitOnly [(ngModel)]="tppdSI" autocomplete="off"
                                    (keydown)="onVehicleValueChange($event)" (keyup)="TppdCommaFormatted()"
                                    class="input-form-control without-icon">
                            </div>
                        </div>
                    </div>
                    <div class="col-12 col-md-4 col-lg-4" *ngIf="productId!='4'">
                        <label class="input-form-label spancommon span_font_size">Policy Start Date</label>
                        <mat-form-field appearance="fill">
                            <input matInput [matDatepicker]="picker" [min]="minDate" [max]="maxDate"
                                (dateChange)="onStartDateChange()" [(ngModel)]="policyStartDate">
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                    <div class="col-12 col-md-4 col-lg-4" *ngIf="productId!='4'">
                        <label class="input-form-label spancommon span_font_size">Policy End Date</label>
                        <mat-form-field appearance="fill">
                            <input matInput [matDatepicker]="picker2" [min]="endMinDate"
                                (dateChange)="onChangeEndDate()" [(ngModel)]="policyEndDate">
                            <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                            <mat-datepicker #picker2></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <div class="maan-btn maan-btn-red maan-button-data col-lg-2" (click)="submitForm(menu,modal)"><span
                class="spancommon span_font_size" style="position:relative;left:1.5rem;top:0.2rem">Submit</span>
        </div>
        <button class="custom-btn btn-5 col-lg-2 spancommon span_font_size" (click)="modal.dismiss('Cross click')"
            style="margin-left:10px;">Close</button>
    </div>
</ng-template>

<ng-template #excessModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"><span class="spancommon span_font_size">Excess Details</span>
        </h4>
        <button type="button" class="close" #excessModalClose aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <div class="row">
            <div class="col-md-12 col-lg-12 col-xl-12">
                <table class="table">
                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col" style="text-align: end;"><b>Excess (%)</b></th>
                            <th scope="col" style="text-align: end;"><b>Excess Amount ({{currencyCode}})</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Excess</td>
                            <td style="text-align: end;">
                                <ng-container
                                    *ngIf="((!adminSection && userType!='Issuer') || (endorsementSection) ) || finalizeYN=='Y'">
                                    <span class="spancommon span_font_size">{{excessPercent}}</span>
                                </ng-container>
                                <ng-container
                                    *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                    <input type="text"
                                        style="width: auto !important;max-width:150px;text-align:left !important"
                                        [(ngModel)]="excessPercent">
                                </ng-container>
                            </td>
                            <td style="text-align: end;">
                                <ng-container
                                    *ngIf="((!adminSection && userType!='Issuer') || (endorsementSection)) || finalizeYN=='Y'">
                                    <ng-container
                                        *ngIf="excessAmount==null || excessAmount=='0.0' || excessAmount=='0'">
                                        0
                                    </ng-container>
                                    <ng-container
                                        *ngIf="excessAmount!=null && excessAmount!='0.0' && excessAmount!='0'">
                                        <span class="spancommon span_font_size">{{excessAmount | commaseparator}}</span>
                                    </ng-container>
                                </ng-container>
                                <ng-container
                                    *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                    <input type="text"
                                        style="width: auto !important;max-width:150px;text-align:left !important"
                                        [(ngModel)]="excessAmount">
                                </ng-container>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- <div class="modal-footer">
        <button class="custom-btn btn-5 col-lg-2 spancommon span_font_size" *ngIf="((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y'"  (click)="modal.dismiss('Cross click')"
            style="margin-left:10px;">Close</button>
        <button class="custom-btn btn-6 maan-button-data  mx-2" *ngIf="adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)" (click)="SaveLoadingDetails(modal)">Submit
        </button>

    </div> -->
</ng-template>
<p-dialog header="Excess Details" class="p-su-header" [(visible)]="showExcessSection" [modal]="true" styleClass="w-10 md:w-8 lg:w-6"
    [draggable]="false" [resizable]="false">
    <div class="body">
        <div class="grid">
            <div class="lg:col-12 md:col-12 col-12 ml-3">
                <table class="table p-1" style="overflow-x:clip !important;">
                    <thead>
                        <tr>
                            <th scope="col"></th>
                            <th scope="col" style="text-align: end;">
                                <b style="color:#d81b60">Excess (%)</b></th>
                            <th scope="col" style="text-align: end;">
                                <b style="color:#d81b60">Excess Amount ({{currencyCode}})</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td class="ui-ex" >Excess</td>
                            <td style="text-align: end">
                                <ng-container
                                    *ngIf="((!adminSection && userType!='Issuer') || (endorsementSection) ) || finalizeYN=='Y'">
                                    <span class="spancommon span_font_size">{{excessPercent}}</span>
                                </ng-container>
                                <ng-container
                                    *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                    <input pInputText id="ratePercent" class="searchText" [(ngModel)]="excessPercent">
                                    <!-- <input type="text"  style="width: auto !important;max-width:150px;text-align:left !important"
                                        [(ngModel)]="excessPercent"> -->
                                </ng-container>
                            </td>
                            <td style="text-align: end">
                                <ng-container
                                    *ngIf="((!adminSection && userType!='Issuer') || (endorsementSection)) || finalizeYN=='Y'">
                                    <ng-container
                                        *ngIf="excessAmount==null || excessAmount=='0.0' || excessAmount=='0'">
                                        0
                                    </ng-container>
                                    <ng-container
                                        *ngIf="excessAmount!=null && excessAmount!='0.0' && excessAmount!='0'">
                                        <span class="spancommon span_font_size">{{excessAmount | commaseparator}}</span>
                                    </ng-container>
                                </ng-container>
                                <ng-container
                                    *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                    <input pInputText id="ratePercent" class="searchText" [(ngModel)]="excessAmount">
                                    <!-- <input type="text"  style="width: auto !important;max-width:150px;text-align:left !important"
                                        [(ngModel)]="excessAmount"> -->
                                </ng-container>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div class="flex flex-wrap justify-content-end">
        <p-button label="Close" styleClass="mr-3 mb-3 p-button-outlined"
            *ngIf="((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y'"
            (click)="showExcessSection=!showExcessSection"></p-button>&nbsp;
        <p-button label="Submit" *ngIf="adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)"
            (click)="SaveLoadingDetails()" class="p-3 text-l mr-0"></p-button>
    </div>
</p-dialog>
<p-dialog header="Premium Details" [(visible)]="showDiscountSection" [modal]="true" styleClass="w-10 md:w-8 lg:w-6"
    [draggable]="false" [resizable]="false">
    <div class="body">
        <div class="grid">
            <div class="lg:col-12 md:col-12 col-12 ml-3">
                <table class="table p-1" style="overflow-x:clip !important;" *ngIf="!discountEndtSection">
                    <thead>
                        <tr>
                            <th scope="col" style="border:0.5px solid grey !important;padding: 4px;"><b>Description</b>
                            </th>
                            <th scope="col" style="text-align: center;border:0.5px solid grey !important;padding: 4px;">
                                <b>Rate</b></th>
                            <th scope="col" style="text-align: end;border:0.5px solid grey !important;padding: 4px;">
                                <b>Amount ({{currencyCode}})</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngIf="productId!='42'">
                            <td style="border:0.5px solid grey !important;padding: 8px;">Sum Insured</td>
                            <td style="border:0.5px solid grey !important;padding: 8px;"></td>
                            <td style="text-align: end;border:0.5px solid grey !important;padding: 8px;"><span
                                    class="spancommon span_font_size">{{sumInsured | commaseparator}}</span></td>
                        </tr>
                        <tr>
                            <td style="max-width: 300px;border:0.5px solid grey !important;padding: 8px;">
                                {{CoverName}}&nbsp;Premium</td>
                            <td style="border:0.5px solid grey !important;padding: 8px;">
                                <ng-container *ngIf="calcType=='A'">
                                    <ng-container
                                        *ngIf="((!adminSection && userType!='Issuer') || endorsementSection ) || finalizeYN=='Y'">
                                        <span class="spancommon span_font_size">{{ratePercent}}</span>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)">
                                        <div class="input-group">
                                            <input pInputText id="ratePercent" class="searchText"
                                                [(ngModel)]="ratePercent" (keyup)="checkRangeCoverRate()"
                                                style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                maxlength="25">
                                            <div class="input-group-append">
                                                <span class="input-group-text" style="padding: 0.05rem 0.5rem;"
                                                    id="basic-addon2">{{currencyCode}}</span>
                                            </div>
                                        </div>
                                        <b class="text-danger referal_data" *ngIf="coverRateError">{{minRateYN}}{{getValidationHeader()}}</b><br>
                                    </ng-container>
                                </ng-container>
                                <ng-container *ngIf="calcType=='P'">
                                    <ng-container
                                        *ngIf="((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y'">
                                        <span class="spancommon span_font_size">{{ratePercent}}</span>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)">
                                        <div class="flex flex-wrap">
                                            <input pInputText id="ratePercent" class="searchText"
                                                [(ngModel)]="ratePercent" (keyup)="checkRangeCoverRate()"
                                                style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                maxlength="25">
                                            <div>
                                                &nbsp;<span class="input-group-text" style="padding: 0.05rem 0.5rem;"
                                                    id="basic-addon2">%</span>
                                            </div>
                                        </div>
                                        <b class="text-danger referal_data" *ngIf="coverRateError">{{getValidationHeader()}}</b><br>

                                    </ng-container>
                                </ng-container>
                            </td>
                            <td style="text-align: end;border:0.5px solid grey !important;padding: 8px;">
                                <span class="spancommon span_font_size">{{beforeDiscount | commaseparator}}</span>
                            </td>
                        </tr>
                        <!-- <tr>
                            <td></td>
                            <td style="text-align: end;">
                                <ng-container *ngIf="calcType=='P'">
                                    <ng-container *ngIf="!adminSection && userType!='Issuer'">
                                        <span class="spancommon span_font_size">{{ratePercent}}</span>
                                    </ng-container>
                                    <ng-container *ngIf="(adminSection || userType=='Issuer')">
                                        <input type="text"  style="width: auto !important;max-width:80px;text-align:right !important"
                                            [(ngModel)]="ratePercent">
                                    </ng-container>
                                </ng-container>
                            </td>
                            
                        </tr> -->
                        <ng-container *ngIf="discountList.length!=0">
                            <tr>
                                <th scope="col"
                                    style="border:0.5px solid grey !important;padding: 8px;text-align: start;"
                                    colspan="3">Discounts</th>

                            </tr>
                            <tr *ngFor="let discount of discountList">
                                <td style="border:0.5px solid grey !important;padding: 8px;text-align: start;">{{discount.DiscountDesc}}</td>
                                <td style="border:0.5px solid grey !important;padding: 8px;text-align: end;">
                                    <ng-container
                                        *ngIf="(adminSection || ((userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))) && discount.DiscountCalcType!='A'">
                                        <ng-container *ngIf="discount.DiscountCalcType!='P'">
                                            <ng-container *ngIf="discount.DiscountRate!=null && discount.DiscountRate!=0">
                                                {{discount.DiscountRate}}
                                            </ng-container>
                                            <ng-container *ngIf="discount.DiscountRate==null || discount.DiscountRate==0">
                                                <span class="spancommon span_font_size">0</span>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="discount.DiscountCalcType=='P'">
                                            <div class="flex flex-wrap">
                                                <input pInputText [id]="'Rate'+i" class="searchText"
                                                    [(ngModel)]="discount['DiscountRate']" (keyup)="checkDiscountRate(discount,'P')"
                                                    style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                    maxlength="5">
                                                    <br *ngIf="discount.RateError"><b class="text-danger referal_data" *ngIf="discount.RateError">{{getLoadingHeader(discount)}}</b>
                                                <!-- <div >
                                                  &nbsp;<span class="input-group-text" style="padding: 0.05rem 0.5rem;" id="basic-addon2">%</span>
                                                </div> -->
                                            </div>
                                            <!-- <input type="text" [id]="'Rate'+i" class="input-form-control without-icon"
                                                style="width: auto !important;max-width:80px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingRate']" maxlength="5"> -->
                                        </ng-container>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y' ) && discount.DiscountCalcType!='A'">
                                        <ng-container *ngIf="discount.DiscountRate==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="discount.DiscountRate!=0 && discount.DiscountRate!=null">
                                            <span class="spancommon span_font_size">{{discount.DiscountRate}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                                <td style="border:0.5px solid grey !important;padding: 8px;text-align: end;">
                                    <ng-container
                                        *ngIf="(adminSection || ((userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)))">
                                        <ng-container *ngIf="discount.DiscountCalcType!='A'">
                                            <ng-container *ngIf="discount.DiscountAmount!=null && discount.DiscountAmount!=0">
                                                {{discount.DiscountAmount | commaseparator}}
                                                
                                            </ng-container>
                                            <ng-container *ngIf="discount.DiscountAmount==null || discount.DiscountAmount==0">
                                                <span class="spancommon span_font_size">0</span>
                                            </ng-container>
                                        </ng-container>
                                        
                                        <ng-container *ngIf="discount.DiscountCalcType=='A'">
                                            <div class="flex flex-wrap">
                                                <input pInputText [id]="'Rate'+i" class="searchText"
                                                    [(ngModel)]="discount['DiscountAmount']" (keyup)="checkDiscountRate(discount,'A')"
                                                    style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                    maxlength="5">
                                                    <br *ngIf="discount.RateError"><b class="text-danger referal_data" *ngIf="discount.RateError">{{minRateYN}} {{getLoadingHeader(discount)}}</b>
                                                <!-- <div >
                                                  &nbsp;<span class="input-group-text" style="padding: 0.05rem 0.5rem;" id="basic-addon2">%</span>
                                                </div> -->
                                            </div>
                                            <!-- <input type="text" [id]="'Rate'+i" class="input-form-control without-icon"
                                                style="width: auto !important;max-width:80px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingRate']" maxlength="5"> -->
                                        </ng-container>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y' )">
                                        <ng-container *ngIf="discount.DiscountAmount==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="loading.DiscountAmount!=0 && loading.DiscountAmount!=null">
                                            <span class="spancommon span_font_size">{{discount.DiscountAmount | commaseparator}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                            </tr>
                        </ng-container>

                        <ng-container *ngIf="loadingList.length!=0">
                            <tr>
                                <th scope="col"
                                    style="text-align: start;border:0.5px solid grey !important;padding: 8px;"
                                    colspan="3">Loadings</th>
                            </tr>
                            <tr *ngFor="let loading of loadingList;let i=index">
                                <td style="border:0.5px solid grey !important;padding: 8px;">{{loading.LoadingDesc}}
                                </td>
                                <td style="text-align: end;border:0.5px solid grey !important;padding: 8px;">
                                    <ng-container
                                        *ngIf="(adminSection || ((userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))) && loading.LoadingCalcType!='A'">
                                        <ng-container *ngIf="loading.LoadingCalcType!='P'">
                                            <ng-container *ngIf="loading.LoadingRate!=null">
                                                <span class="spancommon span_font_size">0</span>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingCalcType=='P'">
                                            <div class="flex flex-wrap">
                                                <input pInputText [id]="'Rate'+i" class="searchText"
                                                    [(ngModel)]="loading['LoadingRate']" (keyup)="checkLoadingRate(loading,'P')"
                                                    style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                    maxlength="5">
                                                    <br *ngIf="loading.RateError"><b class="text-danger referal_data" *ngIf="loading.RateError">{{minRateYN}}{{getLoadingHeader(loading)}}</b>
                                                <!-- <div >
                                                  &nbsp;<span class="input-group-text" style="padding: 0.05rem 0.5rem;" id="basic-addon2">%</span>
                                                </div> -->
                                            </div>
                                            <!-- <input type="text" [id]="'Rate'+i" class="input-form-control without-icon"
                                                style="width: auto !important;max-width:80px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingRate']" maxlength="5"> -->
                                        </ng-container>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y' ) && loading.LoadingCalcType!='A'">
                                        <ng-container *ngIf="loading.LoadingRate==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingRate!=0 && loading.LoadingRate!=null">
                                            <span class="spancommon span_font_size">{{loading.LoadingRate}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                                <td style="text-align: end;border:0.5px solid grey !important;padding: 8px;">
                                    <ng-container
                                        *ngIf="(adminSection  || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                        <ng-container *ngIf="loading.LoadingCalcType!='A'">
                                            <ng-container
                                                *ngIf="loading.LoadingAmount==0 || loading.LoadingAmount==null">
                                                0
                                            </ng-container>
                                            <ng-container
                                                *ngIf="loading.LoadingAmount!=0 && loading.LoadingAmount!=null">
                                                <span class="spancommon span_font_size">{{loading.LoadingAmount}}</span>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingCalcType=='A'">
                                            <input pInputText [id]="'Amount'+i" class="searchText"
                                                (keyup)="premiumComma(i,loading.LoadingAmount);checkLoadingRate(loading,'A')"
                                                [(ngModel)]="loading['LoadingAmount']"
                                                style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important">
                                                <br *ngIf="loading.RateError"><b class="text-danger referal_data" *ngIf="loading.RateError">{{minRateYN}}{{getLoadingHeader(loading)}}</b>
                                            <!-- <input type="text" [id]="'Amount'+i" class="input-form-control without-icon"
                                                (keyup)="premiumComma(i,loading.LoadingAmount)"
                                                style="width: auto !important;max-width:300px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingAmount']"> -->
                                        </ng-container>

                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y')">
                                        <ng-container *ngIf="loading.LoadingAmount==0 || loading.LoadingAmount==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingAmount!=0 && loading.LoadingAmount!=null">
                                            <span class="spancommon span_font_size">{{loading.LoadingAmount |
                                                commaseparator}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                            </tr>

                        </ng-container>


                    </tbody>
                    <tfoot>
                        <tr>
                            <td style="border:0.5px solid grey !important;padding: 8px;"><b>Total</b></td>
                            <td style="border:0.5px solid grey !important;padding: 8px;"></td>
                            <td style="text-align: end;border:0.5px solid grey !important;padding: 8px;"><span
                                    class="spancommon span_font_size">
                                    <b>{{afterDiscount | commaseparator}}</b></span></td>
                        </tr>
                    </tfoot>
                </table>
                <table class="table" *ngIf="discountEndtSection">
                    <thead>
                        <tr>
                            <th scope="col"><b>Description</b></th>
                            <th scope="col" style="text-align: end;"><b>Rate</b></th>
                            <th scope="col" style="text-align: end;"><b>Amount ({{currencyCode}})</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Actual SumInsured</td>
                            <td style="text-align: end;">

                            </td>
                            <td style="text-align: end;">
                                <span class="spancommon span_font_size">{{sumInsured | commaseparator}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td>Difference SumInsured</td>
                            <td style="text-align: end;">

                            </td>
                            <td style="text-align: end;">
                                <span class="spancommon span_font_size">{{differenceSI | commaseparator}}</span>
                            </td>
                        </tr>
                        <tr>
                            <td>Premium Before Discount</td>
                            <td style="text-align: end;">
                                <ng-container *ngIf="!adminSection">
                                    <span class="spancommon span_font_size">{{ratePercent}}</span>
                                </ng-container>
                                <ng-container *ngIf="(adminSection)">
                                    <input type="text"
                                        style="width: auto !important;max-width:80px;text-align:right !important"
                                        [(ngModel)]="ratePercent">
                                </ng-container>
                            </td>
                            <td style="text-align: end;">
                                <span class="spancommon span_font_size">{{beforeDiscount | commaseparator}}</span>
                            </td>
                        </tr>
                        <ng-container *ngIf="discountList.length!=0">
                            <tr>
                                <th scope="col">Discounts</th>
                                <td></td>
                                <td></td>
                            </tr>
                            <tr *ngFor="let discount of discountList">
                                <td style="border:0.5px solid grey !important;padding: 8px;text-align: start;">{{discount.DiscountDesc}}</td>
                                <td style="border:0.5px solid grey !important;padding: 8px;text-align: end;">
                                    <ng-container
                                        *ngIf="(adminSection || ((userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))) && discount.DiscountCalcType!='A'">
                                        <ng-container *ngIf="discount.DiscountCalcType!='P'">
                                            <ng-container *ngIf="discount.DiscountRate!=null && discount.DiscountRate!=0">
                                                {{discount.DiscountRate}}
                                            </ng-container>
                                            <ng-container *ngIf="discount.DiscountRate==null || discount.DiscountRate==0">
                                                <span class="spancommon span_font_size">0</span>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="discount.DiscountCalcType=='P'">
                                            <div class="flex flex-wrap">
                                                <input pInputText [id]="'Rate'+i" class="searchText"
                                                    [(ngModel)]="discount['DiscountRate']" (keyup)="checkDiscountRate(discount,'P')"
                                                    style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                    maxlength="5">
                                                    <br *ngIf="discount.RateError"><b class="text-danger referal_data" *ngIf="discount.RateError">{{minRateYN}}{{getLoadingHeader(discount)}}</b>
                                                <!-- <div >
                                                  &nbsp;<span class="input-group-text" style="padding: 0.05rem 0.5rem;" id="basic-addon2">%</span>
                                                </div> -->
                                            </div>
                                            <!-- <input type="text" [id]="'Rate'+i" class="input-form-control without-icon"
                                                style="width: auto !important;max-width:80px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingRate']" maxlength="5"> -->
                                        </ng-container>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y' ) && discount.DiscountCalcType!='A'">
                                        <ng-container *ngIf="discount.DiscountRate==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="discount.DiscountRate!=0 && discount.DiscountRate!=null">
                                            <span class="spancommon span_font_size">{{discount.DiscountRate}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                                <td style="border:0.5px solid grey !important;padding: 8px;text-align: end;">
                                    <ng-container
                                        *ngIf="(adminSection || ((userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)))">
                                        <ng-container *ngIf="discount.DiscountCalcType!='A'">
                                            <ng-container *ngIf="discount.DiscountAmount!=null && discount.DiscountAmount!=0">
                                                {{discount.DiscountAmount | commaseparator}}
                                                
                                            </ng-container>
                                            <ng-container *ngIf="discount.DiscountAmount==null || discount.DiscountAmount==0">
                                                <span class="spancommon span_font_size">0</span>
                                            </ng-container>
                                        </ng-container>
                                        
                                        <ng-container *ngIf="discount.DiscountCalcType=='A'">
                                            <div class="flex flex-wrap">
                                                <input pInputText [id]="'Rate'+i" class="searchText"
                                                    [(ngModel)]="discount['DiscountAmount']" (keyup)="checkDiscountRate(discount,'A')"
                                                    style="border-radius:5px;width: auto !important;max-width:80px;text-align:right !important"
                                                    maxlength="5">
                                                    <br *ngIf="discount.RateError"><b class="text-danger referal_data" *ngIf="discount.RateError">{{minRateYN}}{{getLoadingHeader(discount)}}</b>
                                                <!-- <div >
                                                  &nbsp;<span class="input-group-text" style="padding: 0.05rem 0.5rem;" id="basic-addon2">%</span>
                                                </div> -->
                                            </div>
                                            <!-- <input type="text" [id]="'Rate'+i" class="input-form-control without-icon"
                                                style="width: auto !important;max-width:80px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingRate']" maxlength="5"> -->
                                        </ng-container>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y' )">
                                        <ng-container *ngIf="discount.DiscountAmount==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="loading.DiscountAmount!=0 && loading.DiscountAmount!=null">
                                            <span class="spancommon span_font_size">{{discount.DiscountAmount | commaseparator}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                            </tr>
                        </ng-container>

                        <ng-container *ngIf="loadingList.length!=0">
                            <tr>
                                <th scope="col" style="text-align: start;" colspan="3">Loadings</th>
                            </tr>
                            <tr *ngFor="let loading of loadingList;let i=index">
                                <td>{{loading.LoadingDesc}}</td>
                                <td style="text-align: end;">
                                    <ng-container
                                        *ngIf="(adminSection  || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)) && loading.LoadingCalcType!='A'">
                                        <ng-container *ngIf="loading.LoadingCalcType!='P'">
                                            <ng-container *ngIf="loading.LoadingRate!=null">
                                                <span class="spancommon span_font_size">0</span>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingCalcType=='P'">
                                            <input type="text" [id]="'Rate'+i" class="input-form-control without-icon"
                                                style="width: auto !important;max-width:80px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingRate']" maxlength="5">
                                        </ng-container>
                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y') && loading.LoadingCalcType!='A'">
                                        <ng-container *ngIf="loading.LoadingRate==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingRate!=0 && loading.LoadingRate!=null">
                                            <span class="spancommon span_font_size">{{loading.LoadingRate}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                                <td style="text-align: end;">
                                    <ng-container
                                        *ngIf="(adminSection  || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection))">
                                        <ng-container *ngIf="loading.LoadingCalcType!='A'">
                                            <ng-container
                                                *ngIf="loading.LoadingAmount==0 || loading.LoadingAmount==null">
                                                0
                                            </ng-container>
                                            <ng-container
                                                *ngIf="loading.LoadingAmount!=0 && loading.LoadingAmount!=null">
                                                <span class="spancommon span_font_size">{{loading.LoadingAmount}}</span>
                                            </ng-container>
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingCalcType=='A'">
                                            <input type="text" [id]="'Amount'+i" class="input-form-control without-icon"
                                                (keyup)="premiumComma(i,loading.LoadingAmount)"
                                                style="width: auto !important;max-width:300px;text-align:right !important"
                                                [(ngModel)]="loading['LoadingAmount']">
                                        </ng-container>

                                    </ng-container>
                                    <ng-container
                                        *ngIf="(((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y')">
                                        <ng-container *ngIf="loading.LoadingAmount==0 || loading.LoadingAmount==null">
                                            0
                                        </ng-container>
                                        <ng-container *ngIf="loading.LoadingAmount!=0 && loading.LoadingAmount!=null">
                                            <span class="spancommon span_font_size">{{loading.LoadingAmount |
                                                commaseparator}}</span>
                                        </ng-container>

                                    </ng-container>
                                </td>
                            </tr>

                        </ng-container>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td><b>Total</b></td>
                            <td></td>
                            <td style="text-align: end;"><span class="spancommon span_font_size">
                                    <b>{{beforeDiscount | commaseparator}}</b></span></td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
    <div class="flex flex-wrap justify-content-end">
        <p-button label="Close" styleClass="mr-3 mb-3 p-button-outlined"
            *ngIf="((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y'"
            (click)="showDiscountSection=!showDiscountSection"></p-button>&nbsp;
        <p-button label="Submit" *ngIf="(adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)) && checkSubmitValue()"
            (click)="SaveLoadingDetails()" class="p-3 text-l mr-0"></p-button>

    </div>
</p-dialog>
<ng-template #discountModal let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"><span class="spancommon span_font_size">Premium
                Details</span></h4>
        <button type="button" class="close" #discountModalClose aria-label="Close"
            (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        <!-- <div class="flex flex-wrap  justify-content-between">
            <div></div>
            <div>
                Cover Name - <b>{{CoverName}}</b>
            </div>
        </div> -->

    </div>
    <!-- <div class="modal-footer">
        <button class="custom-btn btn-5 col-lg-2 spancommon span_font_size" *ngIf="((!adminSection && userType!='Issuer') || endorsementSection) || finalizeYN=='Y'" (click)="modal.dismiss('Cross click')"
            style="margin-left:10px;">Close</button>
        <button class="custom-btn btn-6 maan-button-data  mx-2" *ngIf="adminSection || (userType=='Issuer' && finalizeYN!='Y' && !endorsementSection)" (click)="SaveLoadingDetails(modal)">Submit
        </button>
    </div> -->
</ng-template>
<ng-template #myView let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title"><span class="spancommon span_font_size">Cover
                Details</span></h4>
        <h4 class="modal-title text-right" id="modal-basic-title"><span class="spancommon span_font_size">
                CoverName:{{CoverName}}
            </span></h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">×</span>
        </button>
    </div>
    <div class="modal-body">
        
    </div>

</ng-template>
<p-dialog class="p-su-header" header="Factor Details" [(visible)]="coverBenefitDisplay" [modal]="true" styleClass="w-10 md:w-10 lg:w-10" [draggable]="false" [resizable]="false">
    <div class="grid">
        <div class="col-12 lg:col-12 md:col-12 xl:col-12">
            <p-table [value]="CoverList" [tableStyle]="{'min-width':'50rem'}" [paginator]="true" [rows]="5">
                <ng-template pTemplate="header">
                    <tr>
                        <th *ngFor="let column of CoverHeader">{{column}}</th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-cover>
                    <tr>
                        <td>{{cover?.BenefitId}}</td>
                        <td>{{cover?.BenefitDescription}}</td>
                        <td>{{cover?.CalcType}}</td>
                        <td>{{cover?.SectionDesc}}</td>
                        <td>{{cover?.Value}}</td>
                        <td>{{cover?.LongDesc}}</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
    <div class="flex justify-content-center">
        <p-button class=" text-l pi-button mr-0"  (click)="coverBenefitDisplay=!coverBenefitDisplay">Close</p-button>
    </div>
</p-dialog>
<p-dialog class="p-su-header" header="Factor Details" [(visible)]="factorDetailModal" [modal]="true" styleClass="w-10 md:w-8 lg:w-6" [draggable]="false" [resizable]="false">
    <div class="grid">
        <div class="col-12 lg:col-12 md:col-12 xl:col-12">
            <ng-container *ngIf="factorViewList.length!=0">
                <table class="table table-bordered" style="width: 100%;margin-top:15px">
                    <thead>
                        <tr>
                            <th scope="col" style="padding: 8px;"><b>Factor Name</b></th>
                            <th scope="col" style="text-align: center;padding: 8px;"><b>Own Damage</b></th>
                            <th scope="col" style="text-align: center;padding: 8px;" *ngIf="insuranceId!='100028'"><b>Wind Screen</b></th>
                            <th scope="col" style="text-align: center;padding: 8px;" *ngIf="insuranceId!='100028'"><b>Theft</b></th>
                            <th scope="col" style="text-align: center;padding: 8px;" *ngIf="insuranceId!='100028'"><b>Fire</b></th>
                            <th scope="col" style="text-align: center;padding: 8px;" *ngIf="insuranceId!='100028'"><b>Third party</b></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let factor of factorViewList">
                            <td style="text-align: start;padding: 8px;">
                                <ng-container *ngIf="factor.FactorName=='Annual Peril Risk Premium Amount' || factor.FactorName=='Annual Peril Risk Premium Rate'">
                                   <b>{{factor.FactorName}}</b>
                                </ng-container>
                                <ng-container *ngIf="factor.FactorName!='Annual Peril Risk Premium Amount' && factor.FactorName!='Annual Peril Risk Premium Rate'">
                                    {{factor.FactorName}}
                                </ng-container>
                            </td>
                            <td style="text-align: end;padding: 8px;">
                                <ng-container *ngIf="factor.FactorName=='Annual Peril Risk Premium Amount' || factor.FactorName=='Annual Peril Risk Premium Rate'">
                                    <b>{{factor.OwnDamage | commaseparator}}</b>
                                </ng-container>
                                <ng-container *ngIf="factor.FactorName!='Annual Peril Risk Premium Amount' && factor.FactorName!='Annual Peril Risk Premium Rate'">
                                   {{factor.OwnDamage | commaseparator}}
                                </ng-container>
                            </td>
                            <td style="text-align: end;padding: 8px;" *ngIf="insuranceId!='100028'">
                                <ng-container *ngIf="factor.FactorName=='Annual Peril Risk Premium Amount' || factor.FactorName=='Annual Peril Risk Premium Rate'">
                                    <b>{{factor.Windscreen | commaseparator}}</b>
                                </ng-container>
                                <ng-container *ngIf="factor.FactorName!='Annual Peril Risk Premium Amount' && factor.FactorName!='Annual Peril Risk Premium Rate'">
                                    {{factor.Windscreen | commaseparator}}
                                </ng-container>
                            </td>
                            <td style="text-align: end;padding: 8px;" *ngIf="insuranceId!='100028'">
                                <ng-container *ngIf="factor.FactorName=='Annual Peril Risk Premium Amount' || factor.FactorName=='Annual Peril Risk Premium Rate'">
                                   <b>{{factor.Theft | commaseparator}}</b>
                                </ng-container>
                                <ng-container *ngIf="factor.FactorName!='Annual Peril Risk Premium Amount' && factor.FactorName!='Annual Peril Risk Premium Rate'">
                                    {{factor.Theft | commaseparator}}
                                </ng-container>
                            </td>
                            <td style="text-align: end;padding: 8px;" *ngIf="insuranceId!='100028'">
                                <ng-container *ngIf="factor.FactorName=='Annual Peril Risk Premium Amount' || factor.FactorName=='Annual Peril Risk Premium Rate'">
                                   <b>{{factor.Fire | commaseparator}}</b>
                                </ng-container>
                                <ng-container *ngIf="factor.FactorName!='Annual Peril Risk Premium Amount' && factor.FactorName!='Annual Peril Risk Premium Rate'">
                                    {{factor.Fire | commaseparator}}
                                </ng-container>
                            </td>
                            <td style="text-align: end;padding: 8px;" *ngIf="insuranceId!='100028'">
                                <ng-container *ngIf="factor.FactorName=='Annual Peril Risk Premium Amount' || factor.FactorName=='Annual Peril Risk Premium Rate'">
                                    <b>{{factor.ThirdParty | commaseparator}}</b>
                                </ng-container>
                                <ng-container *ngIf="factor.FactorName!='Annual Peril Risk Premium Amount' && factor.FactorName!='Annual Peril Risk Premium Rate'">
                                    {{factor.ThirdParty | commaseparator}}
                                </ng-container>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </ng-container>
            <ng-container *ngIf="factorViewList.length==0">
                <div class="flex flex-wrap justify-content-center">
                    No Data Available
                </div>
            </ng-container>
        </div>
    </div>
    <div class="row" *ngIf="factorPremiumDetails && insuranceId!='100028'">
        <div class="flex flex-wrap justify-content-center">
            <b><u>ANNUAL PREMIUM DETAILS</u></b>
        </div>
        <div class="col-12 lg:col-7 md:col-7 xl:col-7 md:col-offset-3 lg:col-offset-3 xl:col-offset-3">
            <table class="table table-bordered" style="width: 100%;margin-top:15px">
                <tbody>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Risk Premium Amount</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.RiskPremiumAmt | commaseparator}}</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Risk Premium Rate</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.RiskPremiumRate | commaseparator}}</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Target Loss Ratio</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.TargetLossRatio | commaseparator}}</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Minimum Rate</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.MinRate | commaseparator}}</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Minimum Premium</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.MinPremium | commaseparator}}</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Final Premium Amount (excl VAT)</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.FinalPremiumAmtExclTax | commaseparator}}</b></td>
                    </tr>
                    <tr>
                        <td style="text-align: start;padding: 8px;"><b>Final Premium Rate (excl VAT)</b></td>
                        <td style="text-align: end;padding: 8px;"><b>{{factorPremiumDetails.FinalPremiumRateExclTax | commaseparator}}</b></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
    <div class="flex justify-content-center">
        <p-button class=" text-l pi-button mr-0"  (click)="factorDetailModal=!factorDetailModal">Close</p-button>
    </div>
</p-dialog>
<p-dialog class="p-su-header" header="Clauses Details" [(visible)]="onClauses" [modal]="true" styleClass="w-10 md:w-8 lg:w-6" [draggable]="false" [resizable]="false">
    <div class="flex flex-wrap justify-content-between mt-2" *ngIf="userType!='Broker'">
        <div>
            <label for="username">Section</label>
            <p-dropdown inputId="make" class="w-full" styleClass="w-full" [(ngModel)]="termsSectionId" [options]="termsSectionList" (onChange)="viewCondition('change')"
                optionLabel="SectionName" optionValue="SectionId" placeholder="- - -Select- - -">
            </p-dropdown>
        </div>
        <div *ngIf="!newAddClauses">
            <p-button label="Add New Clause" icon="pi pi-plus" (click)="onAddClause()"></p-button>
        </div>
    </div>
    <div class="grid mt-2">
        <div class="col-12 md:col-12 lg:col-12 mt-2">
            <p-table #dtEmployee [value]="ClausesData" *ngIf="userType=='Broker' && !newAddClauses"
            [tableStyle]="{'min-width':'50rem'}" [paginator]="true"
             [rows]="5">
             <ng-template pTemplate="header">
                <tr>
                    <th [pSortableColumn]="column" *ngFor="let column of columns">{{column}} <p-sortIcon [field]="column"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-customer>
              <tr>
                <td>{{ customer.SubId }}</td>
                <td>{{ customer.SubIdDesc }}</td>
              </tr>
            </ng-template>
            </p-table>
            <table class="table table-bordered mt-2 p-2 w-full" *ngIf="userType!='Broker' && !newAddClauses">
                <thead>
                    <tr>
                        <th class="p-2">Select</th>
                        <th class="p-2">Description</th>
                    </tr>
                </thead>
    
                <tbody
                    *ngFor="let clause of ClausesData; let i=index;">
                    <tr>
                        <td class="flex flex-wrap justify-content-center" style="border-bottom: 0px solid grey !important;">
                            <div class="mt-2" >
                                <input type="checkbox" (change)="onCheckUser(i,$event,clause)" [disabled]="endorsementSection"
                                [checked]="clause.selected == true ? true : false">
                            </div>
                           
                        </td>
    
                        <td class="p-2">
                            <textarea [(ngModel)]="clause.SubIdDesc" class="w-full" cols="60" pInputText [disabled]="endorsementSection"
                                rows="2"></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
            <ng-container *ngIf="newAddClauses">
                <button class="btn btn-primary" style="float:right;margin-bottom:13px;" (click)="addItem()">Add
                  New</button>
                <table class="mt-5 ml-2">
                  <thead>
                      <th>Clauses Description</th>
                      <th>Delete</th>
                  </thead>
                  <tbody>
                      <tr *ngFor="let row of jsonList;let i = index">
                          <td>
                            <div class="input-control-container">
                                <div class="input-form-box">
                                    <textarea  [(ngModel)]="row.SubIdDesc" cols="60" rows="2"></textarea>
                                </div>
                            </div>
                          </td>
                          <td class="mt-2">
                              <button class="btn btn-primary" (click)="deleteClauses(row)"> <i
                                      class="fa fa-trash"></i></button>
                          </td>
                      </tr>

                  </tbody>
              </table>
              </ng-container>
        </div>
    </div>
    <div class="flex flex-wrap justify-content-center mt-2">
        <ng-container *ngIf="!newAddClauses">
            <div>
                <p-button label="Close" class="p-button-outlined" styleClass="p-button-outlined" (click)="OnClose()"></p-button>&nbsp;
            </div>
            <div>
                <p-button label="Submit" *ngIf="userType!='Broker'" class="p-button-success" (click)="saveClausesData(ClausesData,'Clauses')"></p-button>
            </div>
        </ng-container>
        <ng-container *ngIf="newAddClauses">
            <p-button class="mr-4 mb-4" label="Save" (click)="saveChanges()"></p-button>
            <!-- <button type="button" class="btn btn-primary ml-3" (click)="saveChanges()">Save
                changes</button> -->
        </ng-container>
    </div>
</p-dialog>
<p-dialog class="p-su-header" header="Exclusion Details" [(visible)]="onExclusion" [modal]="true" styleClass="w-10 md:w-8 lg:w-6" [draggable]="false" [resizable]="false">
    <div class="flex flex-wrap justify-content-between mt-2" >
        <div>
            <label for="username">Section</label>
            <p-dropdown inputId="make" class="w-full" styleClass="w-full" [(ngModel)]="termsSectionId" [options]="termsSectionList" (onChange)="viewCondition('change')"
                optionLabel="SectionName" optionValue="SectionId" placeholder="- - -Select- - -">
            </p-dropdown>
        </div>
        <ng-container *ngIf="userType!='Broker' && !newAddExclusion">
            <div *ngIf="!newAddExclusion">
                <p-button label="Add New Exclusion" icon="pi pi-plus" (click)="onAddExclusion()"></p-button>
            </div>
        </ng-container>
        <!-- <div>
            <p-button label="Add New Exclusion" icon="pi pi-plus" (click)="onAddExclusion()"></p-button>
        </div> -->
    </div>
    <div class="grid mt-2">
        <div class="col-12 md:col-12 lg:col-12 mt-2">
            <p-table #dtEmployee [value]="ExclusionData" *ngIf="userType=='Broker' && !newAddExclusion"
            [tableStyle]="{'min-width':'50rem'}" [paginator]="true"
             [rows]="5">
             <ng-template pTemplate="header">
                <tr>
                    <th [pSortableColumn]="column" *ngFor="let column of columns">{{column}} <p-sortIcon [field]="column"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-customer>
              <tr>
                <td>{{ customer.SubId }}</td>
                <td>{{ customer.SubIdDesc }}</td>
              </tr>
            </ng-template>
            </p-table>
            <table class="table table-bordered mt-2 p-2 w-full" *ngIf="userType!='Broker' && !newAddExclusion">
                <thead>
                    <tr>
                        <th class="p-2">Select</th>
    
                        <th class="p-2">Description</th>
                    </tr>
                </thead>
    
                <tbody
                    *ngFor="let clause of ExclusionData; let i=index;">
                    <tr>
                        <td class="flex flex-wrap justify-content-center" style="border-bottom: 0px solid grey !important;">
                            <div class="mt-2" >
                                <input type="checkbox" (change)="onCheckExclusion(i,$event,clause)" [disabled]="endorsementSection"
                                [checked]="clause.selected == true ? true : false">
                            </div>
                           
                        </td>
    
                        <td class="p-2">
                            <textarea [(ngModel)]="clause.SubIdDesc" class="w-full" cols="60" pInputText [disabled]="endorsementSection"
                                rows="2"></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
        <ng-container *ngIf="newAddExclusion" class="mt-3">
            <div style="float: right !important;">
            <p-button class="mb-4" label="Add New" (click)="addExclusion()"></p-button>
            </div>
            <!-- <button class="btn btn-primary" (click)="addExclusion()">Add New</button> -->
            <table class="mt-5 ml-2">
              <thead>
                  <th>Exclusion Description</th>
                  <th>Delete</th>
              </thead>
              <tbody>
                  <tr *ngFor="let row of ExclusionList;let i = index">
                    
                      <div class="input-control-container">
                        <div class="input-form-box">
                            <textarea  [(ngModel)]="row.SubIdDesc" cols="60" rows="2"></textarea>
                        </div>
                    </div>
                      
                      <td style="height:20px;">
                        <p-button class="mr-4 mb-4" (click)="deleteExclusion(row)">
                            <i class="fa fa-trash"></i>
                        </p-button>
                          <!-- <button class="btn btn-primary" (click)="deleteExclusion(row)"> <i
                                  class="fa fa-trash"></i></button> -->
                      </td>
                  </tr>

              </tbody>
          </table>
          </ng-container>
    </div>
    <div class="flex flex-wrap justify-content-center mt-2">
        <ng-container *ngIf="!newAddExclusion">
        <div>
            <p-button label="Close" class="p-button-outlined" styleClass="p-button-outlined" (click)="OnClose()"></p-button>&nbsp;
        </div>
        <div>
            <p-button label="Submit" *ngIf="userType!='Broker'" class="p-button-success" (click)="saveClausesData(ExclusionData,'Exclusion')"></p-button>
        </div>
    </ng-container>
    <ng-container *ngIf="newAddExclusion">
        <p-button class="mr-4 mb-4" label="Save" (click)="saveExclusion()"></p-button>
        <!-- <button type="button" class="btn btn-primary ml-3" (click)="saveExclusion()">Save</button> -->
    </ng-container>
    </div>
</p-dialog>
<p-dialog class="p-su-header" header="Warranties Details" [(visible)]="onWarranty" [modal]="true" styleClass="w-10 md:w-8 lg:w-6" [draggable]="false" [resizable]="false">
    <div class="flex flex-wrap justify-content-between mt-2" >
        <div>
            <label for="username">Section</label>
            <p-dropdown inputId="make" class="w-full" styleClass="w-full" [(ngModel)]="termsSectionId" [options]="termsSectionList" (onChange)="viewCondition('change')"
                optionLabel="SectionName" optionValue="SectionId" placeholder="- - -Select- - -">
            </p-dropdown>
        </div>
        <div *ngIf="userType!='Broker' && !newAddWarranty">
            <p-button label="Add New Warranty" icon="pi pi-plus" (click)="onAddWarranty()"></p-button>
        </div>
    </div>
    <div class="grid mt-2">
        <div class="col-12 md:col-12 lg:col-12 mt-2">
            <p-table #dtEmployee [value]="WarrantyData" *ngIf="userType=='Broker' && !newAddWarranty"
            [tableStyle]="{'min-width':'50rem'}" [paginator]="true"
             [rows]="5">
             <ng-template pTemplate="header">
                <tr>
                    <th [pSortableColumn]="column" *ngFor="let column of columns">{{column}} <p-sortIcon [field]="column"></p-sortIcon></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-customer>
              <tr>
                <td>{{ customer.SubId }}</td>
                <td>{{ customer.SubIdDesc }}</td>
              </tr>
            </ng-template>
            </p-table>
            <table class="table table-bordered mt-2 p-2 w-full" *ngIf="userType!='Broker' && !newAddWarranty">
                <thead>
                    <tr>
                        <th class="p-2">Select</th>
    
                        <th class="p-2">Description</th>
                    </tr>
                </thead>
    
                <tbody
                    *ngFor="let clause of WarrantyData; let i=index;">
                    <tr>
                        <td class="flex flex-wrap justify-content-center" style="border-bottom: 0px solid grey !important;">
                            <div class="mt-2" >
                                <input type="checkbox" (change)="onCheckWarranties(i,$event,clause)" [disabled]="endorsementSection"
                                [checked]="clause.selected == true ? true : false">
                            </div>
                           
                        </td>
    
                        <td class="p-2">
                            <textarea [(ngModel)]="clause.SubIdDesc" class="w-full" cols="60" pInputText [disabled]="endorsementSection"
                                rows="2"></textarea>
                        </td>
                    </tr>
                </tbody>
            </table>

            <ng-container *ngIf="newAddWarranty">
                <p-button label="Add New" style="float:right" (click)="addwarranty()"></p-button>
                <!-- <button class="btn btn-primary" style="float:right" (click)="addwarranty()">Add New</button> -->
                <table class="mt-3 ml-2 maan-grid-item-body">
                    <thead>
                        <th>Warrranty Description</th>
                        <th>Delete</th>
                    </thead>
                    <tbody>
                        <tr *ngFor="let row of json;let i = index">
                            <div class="input-control-container">
                                <div class="input-form-box">
                                    <textarea  [(ngModel)]="row.SubIdDesc" cols="60" rows="2"></textarea>
                                </div>
                            </div>
                            <td class="tbl-content">
                                <p-button (click)="delete(row)">
                                    <i class="fa fa-trash"></i>
                                </p-button>
                                <!-- <button class="btn btn-primary" (click)="delete(row)"> <i
                                        class="fa fa-trash"></i></button> -->
                            </td>
                        </tr>
    
                    </tbody>
                </table>
               </ng-container>
        </div>
        
    </div>
    <div class="flex flex-wrap justify-content-center mt-2">
        <ng-container *ngIf="!newAddWarranty">
        <div>
            <p-button label="Close" class="p-button-outlined" styleClass="p-button-outlined" (click)="OnClose()"></p-button>&nbsp;
        </div>
        <div>
            <p-button label="Submit" *ngIf="userType!='Broker'" class="p-button-success" (click)="saveClausesData(WarrantyData,'Warranty')"></p-button>
        </div>
        </ng-container>
        <ng-container *ngIf="newAddWarranty">
            <p-button (click)="saveWarranty()">Save</p-button>
            <!-- <button type="button" class="btn btn-primary ml-3" (click)="saveWarranty()">Save</button> -->
        </ng-container>
    </div>
</p-dialog>
<div id="toast" class="toastDisplay errorToast" style="display:none;color:#ffffff">
    <img (click)="sharedService.fnOnToastCloseClick()" align="right" src="./assets/img/close_white.png" alt="Warning"
        style="vertical-align:baseline; text-align:right;cursor:pointer;">
    <div class="paragraphFontSize" id="toastSpan" style="color:#ffffff!important;text-align: center;">
        <img src="./assets/img/error.png" alt="Warning" style="margin-left: 10px;float: left;">
        <span [innerHtml]="sharedService.errorApiMsg"></span>
    </div>
</div>

<div id="successToast" class="toastDisplaySuccess errorToast successToastMsg" style="display:none;color:#ffffff">
    <img (click)="sharedService.fnOnSuccessToastCloseClick()" align="right" src="./assets/img/close_white.png"
        alt="Warning" style="vertical-align:baseline; text-align:right;cursor:pointer;">
    <div class="paragraphFontSize" id="toastSpan" style="color:#ffffff!important;text-align: center;">
        <img src="./assets/img/checkbox/white_tick_only.png" style="margin-left: 10px;float: left;">
        <span [innerHtml]="sharedService.successApiMsg"></span>
    </div>
</div>