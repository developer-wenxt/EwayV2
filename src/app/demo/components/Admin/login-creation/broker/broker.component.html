<div class="grid">
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="Company">Company *</label>
        <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="insuranceId"  (onChange)="changebroker();getMobileCodeList();getCountryList()" [options]="companyList" optionLabel="CodeDesc" optionValue="Code">
        </p-dropdown> 
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="Channel">Channel *</label>
        <p-dropdown  class="w-full" styleClass="w-full" [options]="channelList" (onChange)="getBrokerList()"  [(ngModel)]="channelId" optionLabel="CodeDesc" optionValue="Code"  >
        </p-dropdown> 
    </div>
    <div class="col-12 lg:col-2 md:col-2 lg:col-2 "></div>
    <div class="col-12 lg:col-2 md:col-2 lg:col-2 ">
        <p-button label="Add New Broker" size="small" (click)="showDialogBrokerDetails('AddBroker')"></p-button>
    </div>
</div> 
<ng-container >
    <!-- <h5>Selected Documents</h5><br> -->
    <p-table #dtEmployeeExist [value]="brokerData" [tableStyle]="{'min-width':'50rem'}" [paginator]="true" [rows]="5"
    [globalFilterFields]="['LoginId','UserName','UserMail','CreatedBy','UserMobile']">
        <ng-template pTemplate="caption">
            <div class="flex flex wrap justify-content-end">
            <div class="table-header">
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" (input)="dtEmployeeExist.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                </span>
            </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>S.No</th>
                <th>Login Id </th>
                <th>Broker Name </th>
                <th>MailID </th>
                <th>Created Date</th>
                <th>Mobile No</th>
                <th>Status </th>
                <th>Action </th>
                <!-- <th>Configure </th>
                <th>View </th> -->
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data let-i="rowIndex">
          <tr>
            <td>{{i+1}}</td>
            <td>{{data.LoginId}}</td>
            <td>{{data.UserName}}</td>
            <td>{{data.UserMail}}</td>
            <td>{{data.CreatedBy}}</td>
            <td>{{data.UserMobile}}</td>
            <td >
                <ng-container *ngIf="data.Status=='Y'">Active</ng-container>
                <ng-container *ngIf="data.Status=='N'">DeActive</ng-container>
                <ng-container *ngIf="data.Status=='P'">Pending</ng-container>
            <td>
                <span class="p-buttonset">
                    <button pButton pRipple icon="pi pi-pencil" title="Edit" class="p-button-outlined" (click)="EditDetailsView(data)" ></button>
                    <button pButton pRipple icon="pi pi-cog" title="Configure" (click)="op.toggle($event)" class="p-button-outlined" ></button>
                    <button pButton pRipple icon="pi pi-eye" title="View" (click)="brokerDetailsView(data)"  class="p-button-outlined"></button>
                </span>
            </td>
          </tr>
          <p-overlayPanel #op [style]="{ width: 'auto'}" >
            <div class="input-control-container">
                <!-- <label >Industry Type *</label><br> -->
                <div class="input-form-radio-box mt-2">
                    <div class="radio-toolbar1 radio-toolbar">
                        <input id="Branch" type="radio" name="rentOwnHome" (click)="branchDataList(data.LoginId)"  value="Branch">
                        <label for="Branch" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Branch</label>
                        <input id="Product" type="radio" name="rentOwnHome"   value="Product" (click)="ProductDataList(data)">
                        <label for="Product" ><img style="max-width: 30px;max-height: 10px;">Product</label>
                        <input id="Cover" type="radio" name="rentOwnHome"   value="Cover" (click)="ConfigPopUp('Cover',data)"> 
                        <label for="Cover" ><img style="max-width: 30px;max-height: 10px;" >Cover</label>
                        <input id="Deposit" type="radio" name="rentOwnHome"   value="Deposit" (click)="depositList(data.LoginId)">
                        <label for="Deposit" ><img style="max-width: 30px;max-height: 10px;" >Deposit</label>
                        <input id="PaymentTypes" type="radio" name="rentOwnHome"   value="PaymentTypes" (click)="PaymentTypes(data)">
                        <label for="PaymentTypes" ><img style="max-width: 30px;max-height: 10px;" >Payment Types</label>
                        <!-- <input id="ChangePassword" type="radio" name="rentOwnHome"   value="ChangePassword"  (click)="ChangePasswordClick(data)">
                        <label for="ChangePassword" ><img style="max-width: 30px;max-height: 10px;" >Change Password</label> -->
                    </div>
                </div>
            </div>
        </p-overlayPanel>
    
        </ng-template>
    </p-table>
</ng-container>
<p-dialog #brokerDetails header="Broker Details" [modal]="true" [(visible)]="brokerDialogVisible" [style]="{ width: '75rem' }" [baseZIndex]="10000">
    <span class="p-text-dark block mb-5"><b>Broker SetUp</b></span>
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="CustomerCode" class="font-semibold w-6rem">Customer Code</label>
            <div class="p-inputgroup"> 
                <input type="text" id="CustomerCode" pInputText placeholder="Customer Code" [(ngModel)]="customerCode" />
                <button type="button" pButton icon="pi pi-search" class="p-button-outlined" (click)="customerSearchvisible=true" ></button>
            </div>
            <div class="input-form-error" *ngIf="customerCodeError">
                <div class="error-text text-danger">
                  Please  Enter UserName
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Name" class="font-semibold w-6rem">Name</label>
            <input pInputText id="Name" class="w-full"  [(ngModel)]="userName" />
            <div class="input-form-error" *ngIf="userNameError">
                <div class="error-text text-danger">
                  Please  Enter UserName
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Channel" class="font-semibold w-6rem">Channel *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="channelId" [disabled]="subUserType" [options]="channelList"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="channelId" [options]="channelList"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="channelId == 'Sales'">
            <label for="Approver" class="font-semibold w-6rem">Approver *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="approvalId" [options]="approverList"
                optionLabel="loginId" optionValue="loginId" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Insurance" class="font-semibold w-6rem">Insurance / Broker Company *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="insuranceId" [options]="companyList" [disabled]="subUserType!='SuperAdmin'" 
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="CoreApp" class="font-semibold w-6rem">CoreApp Code *</label>
            <input pInputText id="CoreApp" class="w-full" [(ngModel)]="coreAppBrokerCode"/>
            <div class="input-form-error" *ngIf="coreAppBrokerCodeError">
                <div class="error-text text-danger">
                  Please  Enter coreApp Broker Code
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Regulatory" class="font-semibold w-6rem">Regulatory Code *</label>
            <input pInputText id="Regulatory" class="w-full" [(ngModel)]="regulatoryCode" />
            <div class="input-form-error" *ngIf="regulatoryCodeError">
                <div class="error-text text-danger">
                  Please  Enter Regulatory Code
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
            <label for="ExcemptedYN" class="font-semibold w-6rem">Tax ExcemptedYN *</label>
            <div class="flex flex-warp">
            <div class="flex align-items-center mr-1">
                <p-radioButton name="Yes" value="Y" [(ngModel)]="taxExcemptedYN" inputId="ingredient2"></p-radioButton>
                <span for="ingredient2" class="ml-1">Yes</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="No" value="N"  [(ngModel)]="taxExcemptedYN" inputId="ingredient3"></p-radioButton>
                <span for="ingredient3" class="ml-1">No</span>
            </div>
        </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="taxExcemptedYN=='Y'">
            <label >Tax Excempted Code *</label>
                <input  pInputText type="text" class="w-full" [(ngModel)]="taxExcemptedCode" maxlength="50">
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Credit" class="font-semibold w-6rem">Credit Limit *</label>
            <input pInputText id="Credit" class="w-full"  [disabled]="editSection"  [(ngModel)]="creditLimit"/>
            <div class="input-form-error" *ngIf="creditLimitError">
                <div class="error-text text-danger">
                  Please  Enter CreditLimit
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="subUserType=='bank'">
            <label >Bank</label>
            <p-dropdown  class="w-full" styleClass="w-full"  [(ngModel)]="bankCode" [options]="bankList" 
                        optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
    </div>
    <p-divider class="mt-3 mb-3" />
    <span class="p-text-dark block mb-5"><b>Login  Information</b></span>
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="LogInId" class="font-semibold w-6rem">LogIn Id *</label>
            <input pInputText id="LogInId" class="w-full" [disabled]="editSection" [(ngModel)]="brokerLoginId"/>
            <div class="input-form-error" *ngIf="brokerLoginIdError">
                <div class="error-text text-danger">
                  Please  Enter Login Id
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="editSection">
        <label class="input-form-label">Do You Like to Change Password?<span class="text-danger">*</span></label>
            <div class="input-form-radio-box">
                <div class="radio-toolbar radio-toolbar1">
                    <input id="changePasswrd_Yes" type="radio" name="changePassYN" [(ngModel)]="changePasswordYN" value="Y">
                    <label for="changePasswrd_Yes" >Yes</label>
                    <input id="changePasswrd_No" type="radio" name="changePassYN" [(ngModel)]="changePasswordYN" value="N">
                    <label for="changePasswrd_No">No</label>
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="changePasswordYN=='Y' || !editSection">
            <label for="Password1" class="font-semibold w-6rem" *ngIf="!editSection">Password *</label>
            <label *ngIf="changePasswordYN=='Y'">New Password<span class="text-danger">*</span></label>
            <input type="password" pInputText id="Password1" class="w-full" [(ngModel)]="password" *ngIf="changePasswordYN=='Y' || !editSection" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="changePasswordYN=='Y' || !editSection">
            <label for="Password2" class="font-semibold w-6rem" *ngIf="!editSection">Re-Enter Password *</label>
            <label *ngIf="changePasswordYN=='Y'">Re-Enter New Password<span class="text-danger">*</span></label>
            <input type="password" pInputText id="Password2" class="w-full" [(ngModel)]="repassword" *ngIf="changePasswordYN=='Y' || !editSection" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="EffectiveDate" class="font-semibold w-6rem">Effective Date *</label>
            <p-calendar  appendTo="body"
            [showIcon]="true" 
            inputId="icondisplay" 
            styleClass="w-full"
            [(ngModel)]="effectiveDate"
            dateFormat="dd/mm/yy"
            class="w-full"/>
            <div class="input-form-error" *ngIf="effectiveDateError">
                <div class="error-text text-danger">
                  Please  Select Date
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Remarks" class="font-semibold w-6rem">Remarks *</label>
            <textarea pInputTextarea id="Remarks" [(ngModel)]="remarks" class="w-full" ></textarea>
            <div class="input-form-error" *ngIf="remarksError">
                <div class="error-text text-danger">
                  Please  Enter Remarks
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
            <label for="ExcemptedYN" class="font-semibold w-6rem">Status *</label>
            <div class="flex flex-warp">
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="Active" value="Y" [(ngModel)]="statusValue" inputId="ingredient2"></p-radioButton>
                    <span for="Active" class="ml-1">Active</span>
                </div>
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="Pending" value="P" [(ngModel)]="statusValue" inputId="ingredient3"></p-radioButton>
                    <span for="Pending" class="ml-1">Pending</span>
                </div>
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="DeActive" value="N" [(ngModel)]="statusValue" inputId="ingredient3"></p-radioButton>
                    <span for="DeActive" class="ml-1">DeActive</span>
                </div>
            </div>
        </div>
    </div>

    <p-divider class="mt-3 mb-3" />
    <span class="p-text-dark block mb-5"><b>Personal Information</b></span>
    <div class="grid">
        
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Address1" class="font-semibold w-6rem">Address1</label>
            <input pInputText id="Address1" [(ngModel)]="address1" class="w-full" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Address2" class="font-semibold w-6rem">Address2</label>
            <input pInputText id="Address2"  [(ngModel)]="address2" class="w-full" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Email" class="font-semibold w-6rem">Email*</label>
            <input pInputText id="Email" class="w-full" [(ngModel)]="userMail"/>
            <div class="input-form-error" *ngIf="userMailError">
                <div class="error-text text-danger">
                  Please  Enter Mail ID
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Country" class="font-semibold w-6rem">Country *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="countryCode" [options]="countryList" (onChange)="onCountryChange('change',null,null)"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Region" class="font-semibold w-6rem">Region*</label>
            <p-dropdown  class="w-full" styleClass="w-full" [options]="stateList" (onChange)="onStateChange('change',null)" [(ngModel)]="stateCode"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
            <div class="input-form-error" *ngIf="stateCodeError">
                <div class="error-text text-danger">
                  Please  Select Region
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="District" class="font-semibold w-6rem">District *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="cityCode" [options]="cityList"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
            <div class="input-form-error" *ngIf="cityCodeError">
                <div class="error-text text-danger">
                  Please  Select District
                </div>
            </div>
        </div>
       
       
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="POBox" class="font-semibold w-6rem">PO Box</label>
            <input pInputText id="POBox" class="w-full" [(ngModel)]="pobox" maxlength="50" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="ContactPerson" class="font-semibold w-6rem">ContactPerson Name</label>
            <input pInputText id="ContactPerson" class="w-full"  [(ngModel)]="contactPersonName" maxlength="100" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Designation" class="font-semibold w-6rem">Designation</label>
            <input pInputText id="Designation" class="w-full" [(ngModel)]="designation" maxlength="100"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Mobile" class="font-semibold w-6rem">Mobile No *</label>
            <div class="flex flex-warp">
                <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                    <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="mobileCode" [options]="mobileCodeList"
                        optionLabel="CodeDesc" optionValue="Code" >
                    </p-dropdown> 
                    <div class="input-form-error" *ngIf="mobileCodeError">
                        <div class="error-text text-danger">
                          Please  Select Mobile Code
                        </div>
                    </div>
                </div>
                <div class="col-12 lg:col-8 md:col-8 lg:col-8" >
                    <input pInputText id="Mobile" class="w-full" [(ngModel)]="userMobile" maxlength="10" />
                    <div class="input-form-error" *ngIf="userMobileError">
                        <div class="error-text text-danger">
                          Please  Enter Mobile Number
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="WhatsApp" class="font-semibold w-6rem">WhatsApp No </label>
            <div class="flex flex-warp">
                <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                    <p-dropdown  class="w-full" styleClass="w-full"  [(ngModel)]="whatsAppCode" [options]="mobileCodeList" 
                        optionLabel="CodeDesc" optionValue="Code" >
                    </p-dropdown> 
                </div>
                <div class="col-12 lg:col-8 md:col-8 lg:col-8">
                    <input pInputText id="WhatsApp" class="w-full" [(ngModel)]="whatsAppNo" maxlength="10" />
                </div>
            </div>
        </div>
        
    </div>
    <div class="flex justify-content-center gap-2">
        <p-button label="Cancel" styleClass="p-button-outlined"  (click)="brokerDialogVisible=false" />
        <p-button label="Submit" (click)="onProceed()"/>
    </div>
</p-dialog> 
 <!-- <p-dialog header="Broker Details" [modal]="true" [(visible)]="brokerDialogVisible" [style]="{ width: '75rem' }">
    <span class="p-text-dark block mb-5"><b>Personal Information</b></span>
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="CustomerCode" class="font-semibold w-6rem">Customer Code</label>
            <div class="p-inputgroup">
                <input type="text" id="CustomerCode" pInputText placeholder="Customer Code" [(ngModel)]="customerCode" />
                <button type="button" pButton icon="pi pi-search" class="p-button-outlined" ></button>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Name" class="font-semibold w-6rem">Name</label>
            <input pInputText id="Name" class="w-full"  [(ngModel)]="userName" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Channel" class="font-semibold w-6rem">Channel *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="channelId" [disabled]="subUserType" [options]="channelList"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Insurance" class="font-semibold w-6rem">Insurance / Broker Company *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="insuranceId" [options]="companyList" [disabled]="subUserType!='SuperAdmin'" 
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Address1" class="font-semibold w-6rem">Address1</label>
            <input pInputText id="Address1" [(ngModel)]="address1" class="w-full" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Address2" class="font-semibold w-6rem">Address2</label>
            <input pInputText id="Address2"  [(ngModel)]="address2" class="w-full" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Country" class="font-semibold w-6rem">Country *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="countryCode" [options]="countryList" (onChange)="onCountryChange('change')"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Region" class="font-semibold w-6rem">Region *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [options]="stateList" (onChange)="onStateChange('change')" [(ngModel)]="stateCode"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="District" class="font-semibold w-6rem">District *</label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="cityCode" [options]="cityList"
                optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Email" class="font-semibold w-6rem">Email*</label>
            <input pInputText id="Email" class="w-full" [(ngModel)]="userMail"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="POBox" class="font-semibold w-6rem">PO Box</label>
            <input pInputText id="POBox" class="w-full" [(ngModel)]="pobox" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="ContactPerson" class="font-semibold w-6rem">ContactPerson Name</label>
            <input pInputText id="ContactPerson" class="w-full"  [(ngModel)]="contactPersonName"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Designation" class="font-semibold w-6rem">Designation</label>
            <input pInputText id="Designation" class="w-full" [(ngModel)]="designation"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Mobile" class="font-semibold w-6rem">Mobile No *</label>
            <div class="flex flex-warp">
                <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                    <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="mobileCode" [options]="mobileCodeList"
                        optionLabel="CodeDesc" optionValue="Code" >
                    </p-dropdown> 
                </div>
                <div class="col-12 lg:col-8 md:col-8 lg:col-8" >
                    <input pInputText id="Mobile" class="w-full" [(ngModel)]="userMobile" />
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="WhatsApp" class="font-semibold w-6rem">WhatsApp No *</label>
            <div class="flex flex-warp">
                <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                    <p-dropdown  class="w-full" styleClass="w-full"  [(ngModel)]="whatsAppCode" [options]="mobileCodeList" 
                        optionLabel="CodeDesc" optionValue="Code" >
                    </p-dropdown> 
                </div>
                <div class="col-12 lg:col-8 md:col-8 lg:col-8">
                    <input pInputText id="WhatsApp" class="w-full" [(ngModel)]="whatsAppNo"/>
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="CoreApp" class="font-semibold w-6rem">CoreApp Code *</label>
            <input pInputText id="CoreApp" class="w-full" [(ngModel)]="coreAppBrokerCode"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Regulatory" class="font-semibold w-6rem">Regulatory Code *</label>
            <input pInputText id="Regulatory" class="w-full" [(ngModel)]="regulatoryCode" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
            <label for="ExcemptedYN" class="font-semibold w-6rem">Tax ExcemptedYN *</label>
            <div class="flex flex-warp">
            <div class="flex align-items-center mr-1">
                <p-radioButton name="Yes" value="Y" [(ngModel)]="taxExcemptedYN" inputId="ingredient2"></p-radioButton>
                <span for="ingredient2" class="ml-1">Yes</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="No" value="N"  [(ngModel)]="taxExcemptedYN" inputId="ingredient3"></p-radioButton>
                <span for="ingredient3" class="ml-1">No</span>
            </div>
        </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="taxExcemptedYN=='Y'">
            <label >Tax Excempted Code *</label>
                <input  pInputText type="text" class="w-full" [(ngModel)]="taxExcemptedCode" maxlength="50">
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Credit" class="font-semibold w-6rem">Credit Limit *</label>
            <input pInputText id="Credit" class="w-full"  [disabled]="editSection"  [(ngModel)]="creditLimit"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="subUserType=='bank'">
            <label >Bank</label>
            <p-dropdown  class="w-full" styleClass="w-full"  [(ngModel)]="bankCode" [options]="bankList" 
                        optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
    </div>
    <p-divider class="mt-3 mb-3" />
    <span class="p-text-dark block mb-5"><b>Login  Information</b></span>
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="LogInId" class="font-semibold w-6rem">LogIn Id *</label>
            <input pInputText id="LogInId" class="w-full" [disabled]="editSection" [(ngModel)]="brokerLoginId"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="editSection">
        <label class="input-form-label">Do You Like to Change Password?<span class="text-danger">*</span></label>
            <div class="input-form-radio-box">
                <div class="radio-toolbar radio-toolbar1">
                    <input id="changePasswrd_Yes" type="radio" name="changePassYN" [(ngModel)]="changePasswordYN" value="Y">
                    <label for="changePasswrd_Yes" >Yes</label>
                    <input id="changePasswrd_No" type="radio" name="changePassYN" [(ngModel)]="changePasswordYN" value="N">
                    <label for="changePasswrd_No">No</label>
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="changePasswordYN=='Y' || !editSection">
            <label for="Password1" class="font-semibold w-6rem" *ngIf="!editSection">Password *</label>
            <label *ngIf="changePasswordYN=='Y'">New Password<span class="text-danger">*</span></label>
            <input pInputText id="Password1" class="w-full" [(ngModel)]="password" *ngIf="changePasswordYN=='Y' || !editSection" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="changePasswordYN=='Y' || !editSection">
            <label for="Password2" class="font-semibold w-6rem" *ngIf="!editSection">Re-Enter Password *</label>
            <label *ngIf="changePasswordYN=='Y'">Re-Enter New Password<span class="text-danger">*</span></label>
            <input pInputText id="Password2" class="w-full" [(ngModel)]="repassword" *ngIf="changePasswordYN=='Y' || !editSection" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="EffectiveDate" class="font-semibold w-6rem">Effective Date *</label>
            <p-calendar  
            [showIcon]="true" 
            inputId="icondisplay" 
            styleClass="w-full"
            [(ngModel)]="effectiveDate"
            class="w-full"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Remarks" class="font-semibold w-6rem">Remarks *</label>
            <textarea pInputTextarea id="Remarks" [(ngModel)]="remarks" class="w-full" ></textarea>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
            <label for="ExcemptedYN" class="font-semibold w-6rem">Status *</label>
            <div class="flex flex-warp">
            <div class="flex align-items-center mr-1">
                <p-radioButton name="Active" value="Y" [(ngModel)]="statusValue" inputId="ingredient2"></p-radioButton>
                <span for="Active" class="ml-1">Active</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="Pending" value="P" [(ngModel)]="statusValue" inputId="ingredient3"></p-radioButton>
                <span for="Pending" class="ml-1">Pending</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="DeActive" value="N" [(ngModel)]="statusValue" inputId="ingredient3"></p-radioButton>
                <span for="DeActive" class="ml-1">DeActive</span>
            </div>
        </div>
        </div>
    </div>
    <div class="flex justify-content-center gap-2">
        <p-button label="Cancel" styleClass="p-button-outlined"  />
        <p-button label="Submit" (click)="onProceed()"/>
    </div>
</p-dialog> -->
<p-dialog  header="Broker Details" [modal]="true"  [(visible)]="visibleBrokerDetails"  [style]="{ width: '90rem' }" [baseZIndex]="10000" 
        [breakpoints]="{ '1199px': '75vw', '575px': '90vw' }" [maximizable]="true">
        <div class="grid ">
            <div class="col-12 lg:col-5 md:col-5 lg:col-5">
                <p-card header="Personal Details">
                    <hr>
                    <div class="flex flex-warp justify-content-end">
                        <div class="col-8 lg:col-8 md:col-8 lg:col-8" *ngIf="userName!=null && userName!=''">
                            <p class="font-semibold broker_name">Broker Name </p>
                            <p>{{userName}}</p>
                        </div>
                        <div class="col-3 lg:col-3 md:col-3 lg:col-3">
                            <p-button label="Edit" (click)="EditDetailsView(viewBrokerDetails);brokerDetails.moveOnTop()" class="p-button-outlined" styleClass="p-button-outlined" />
                            <!-- <i class="pi pi-check-circle" style="color: green"></i> -->
                        </div>
                        <div class="col-1 lg:col-1 md:col-1 lg:col-1">
                            <!-- <p-button label="Edit"  class="p-button-outlined" styleClass="p-button-outlined" /> -->
                            
                        </div>
                    </div>
                        <div class="grid ">
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="customerCode!=null && customerCode!=''">
                                <p  class="font-semibold broker_name">Customer Code </p>
                                <p>{{customerCode}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" >
                                <p  class="font-semibold broker_name">Address </p>
                                <p *ngIf="address1!=null && address1!='' || address2!=null && address2!=''">{{address1}},{{address2}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4 flex-warp" *ngIf="userMail!=null && userMail!=''">
                                <p  class="font-semibold broker_name">Email </p>
                                <p>{{userMail}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" >
                                <p  class="font-semibold broker_name">Mobile No </p>
                                <p>{{userMobile}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" >
                                <p  class="font-semibold broker_name">PO Box</p>
                                <p>{{pobox}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" >
                                <p  class="font-semibold broker_name">Contact Person</p>
                                <p>{{contactPersonName}}</p>
                            </div>
                        </div>
                </p-card>
            </div>
            <div class="col-12 lg:col-5 md:col-5 lg:col-5">
                <p-card header="Branch">
                    <hr>
                        <div class="grid ">
                            <div class="col-8 lg:col-3 md:col-3 lg:col-3" *ngIf="channelId!=null && channelId!=''">
                                <p  class="font-semibold broker_name">Channel </p>
                                <p>{{channelId}}</p>
                                
                            </div>
                            <div class="col-12 lg:col-9 md:col-9 lg:col-9" *ngIf="companyName!=null && companyName!=''">
                                <p  class="font-semibold broker_name">Insurance/Broker Company </p>
                                <p>{{companyName}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="countryCode!=null && countryCode!=''">
                                <p  class="font-semibold broker_name">Country </p>
                                <p>{{countryCode}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="stateName!=null && stateName!=''">
                                <p  class="font-semibold broker_name">Region </p>
                                <p>{{stateName}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="cityName!=null && cityName!=''">
                                <p  class="font-semibold broker_name">District </p>
                                <p>{{cityName}}</p>
                            </div>
                            <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="creditLimit!=null && creditLimit!=''">
                                <p  class="font-semibold broker_name">Credit Limit</p>
                                <p>{{creditLimit}}</p>
                            </div>
                            <!-- <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                                <p  class="font-semibold broker_name">Contact Person</p>
                                <p></p>
                            </div> -->
                        </div>
                </p-card>
            </div>
            <div class="col-12 lg:col-2 md:col-2 lg:col-2">
                <p-card header="Account Status">
                    <hr>
                    <div class="col-12">
                    <p *ngIf="Status=='Y'">Active &nbsp; <p-badge [value]="" severity="success" /></p>
                    <p *ngIf="Status=='N'">DeActive &nbsp; <p-badge [value]="" severity="danger" /></p>
                   </div>
                   <div class="col-12">
                       <p  class="font-semibold broker_name">Login Id</p>
                       <p>{{brokerLoginId}}</p>
                    </div>
                    <div class="col-12">
                    <p-button label="Change Password"  class="p-button-outlined" styleClass="p-button-outlined" (click)="passwordField()" />
                    </div>
                    <!--  -->
                        <!-- <p  class="font-semibold broker_name">Last Login Date</p>
                        <p>12/06/2024</p> -->
                    <!--  -->
                </p-card>
            </div>
            <!-- <div class="col-12 lg:col-12 md:col-12 lg:col-12" *ngIf="ChangePass">
                <div class="grid">
                <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                    <label for="username">New Password*</label><br>
                    <input pInputText type="Password"   class="w-full" [(ngModel)]="password"
                    styleClass="w-full"  
                    placeholder="Enter New Password"/>
                </div>
                <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                    <label for="username">Re-Enter New Password*</label><br>
                    <input pInputText type="Password"   class="w-full" [(ngModel)]="repassword"
                    styleClass="w-full" 
                    placeholder="Enter Re-Enter New Password"/>
                </div>
                <div class="col-12 lg:col-4 md:col-4 lg:col-4 mt-4">
                    <p-button label="Submit"  (click)="passChanged()" />
                </div>
            </div>
            </div> -->
            <div class="col-12 lg:col-12 md:col-12 lg:col-12" *ngIf="ViewProducts.length!=0">
                <p-card header="Products">
                    <hr>
                    <div class="grid" >
                   <div class="col-12 lg:col-2 md:col-2 lg:col-2" *ngFor="let product of ViewProducts">
                       <p  class="font-semibold broker_name"><i class="pi pi-bars" style="font-size: 1rem"></i> &nbsp;{{product.ProductName}}</p>
                       <hr>
                       <p>Quote &nbsp; <p-badge [value]="product.QuoteTotalCount" /></p>
                       <p>Policy &nbsp; <p-badge [value]="product.PolicyTotalCount" /></p>
                       <p>Endorsement &nbsp; <p-badge [value]="product.EndtTotalCount" /></p>
                    </div>
                    </div>
                </p-card>
            </div>
            <div class="col-12 lg:col-6 md:col-6 lg:col-6">
                <p-card header="Period">
                    <hr>
                <div class="grid" >
                   <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                       <p class="font-semibold broker_name">Last Login Date</p>
                       <p>{{LastLoginDate}}</p>
                    </div>
                    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                        <p class="font-semibold broker_name">Last Policy Date</p>
                        <p>{{LastPolicyDate}}</p>
                     </div>
                     <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                        <p class="font-semibold broker_name">Last Quote Date</p>
                        <p>{{LastQuoteDate}}</p>
                     </div>
                     <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                         <p class="font-semibold broker_name">Collected Premium</p>
                         <p>{{CollectedPremium}}</p>
                    </div>
                    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="PolicyCommission!=0 && PolicyCommission!=null && PolicyCommission!=''">
                        <p class="font-semibold broker_name" >Policy Commission</p>
                        <p>{{PolicyCommission}}</p>
                    </div>
                </div>
                    <!-- <div class="col-12">
                    <p-button label="Change Password"  class="p-button-outlined" styleClass="p-button-outlined" (click)="passwordField()" />
                    </div> -->
                    <!--  -->
                        <!-- <p  class="font-semibold broker_name">Last Login Date</p>
                        <p>12/06/2024</p> -->
                    <!--  -->
                </p-card>
            </div>
            <div class="col-12 lg:col-6 md:col-6 lg:col-6">
                <p-card header="Users">
                    <hr>
                <div class="grid" *ngFor="let item of userDataList">
                   <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                       <b><p class="font-semibold broker_name">{{item.UserName}}</p></b>
                       <p class="font-semibold broker_name">{{item.LoginId}}</p>
                    </div>
                </div>
                </p-card>
            </div>
        </div>
       
</p-dialog>

<p-dialog  header="Branch " [modal]="true"  [(visible)]="branchPopup"  [style]="{ width: '75rem' }" >
    <p-table  [tableStyle]="{'min-width': '60rem'}" [value]="branchData" [rows]="5" [paginator]="true">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                Branch 
                <p-button icon="pi pi-plus"  label="Add Branch" (click)="showDialogBrokerDetails('branchDetail')" />
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Branch Name</th>
                <th>Effective Date</th>
                <th>Mobile No</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-branch>
            <tr>
                <td>{{branch.BranchName}}</td>
                <td>{{branch.EffectiveDateStart}}</td>
                <td>{{branch.Mobile}}</td>
                <td *ngIf="branch.Status=='Y'">Active</td>
                <td *ngIf="branch.Status=='N'">DeActive</td>
                <td><p-button icon="pi pi-pencil"  styleClass="p-button-outlined"  (click)="editBranch(branch)" /></td>
            </tr>
        </ng-template>
    </p-table> 
</p-dialog>
<p-dialog  header="Branch Details" [modal]="true"  [(visible)]="branchDetailsPopup"  [style]="{ width: '80rem' }" >
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="BranchName" class="font-semibold w-6rem">Branch Name&nbsp;<span class="text-danger">*</span></label>
            <div class="p-inputgroup">
                <input type="text" id="BranchName" pInputText placeholder="Branch Name" [(ngModel)]="brokerBranchName" [disabled]="checkCompanyId()" />
                <button type="button" pButton icon="pi pi-search"  class="p-button-outlined" (click)="showDialogBrokerDetails('branchSPDetail')"></button>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Insurance" class="font-semibold w-6rem">Insurance Company Branch&nbsp;<span class="text-danger">*</span></label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="branchName" [options]="branchList"    
                        optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
            <label for="ExcemptedYN" class="font-semibold w-6rem">Branch Type&nbsp;<span class="text-danger">*</span></label>
            <div class="flex flex-warp">
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="Main" value="Main"  inputId="Main" [(ngModel)]="branchType"></p-radioButton>
                    <span for="Main" class="ml-1">Main</span>
                </div>
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="Sub" value="Sub"  inputId="Sub" [(ngModel)]="branchType"></p-radioButton>
                    <span for="Sub" class="ml-1">Sub</span>
                </div>
            </div>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="SalePointCode" class="font-semibold w-6rem">Sale PointCode&nbsp;<span class="text-danger">*</span></label>
            <input pInputText id="SalePointCode" class="w-full" [(ngModel)]="salePointCode" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Address1" class="font-semibold w-6rem">Address 1 </label>
            <input pInputText id="Address1" class="w-full" [(ngModel)]="address1" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Address2" class="font-semibold w-6rem">Address 2</label>
            <input pInputText id="Address2" class="w-full" [(ngModel)]="address2" />
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Email" class="font-semibold w-6rem">Email</label>
            <input pInputText id="Email" class="w-full"   [(ngModel)]="email"/>
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="MobileNo" class="font-semibold w-6rem">Mobile No</label>
            <input pInputText id="MobileNo" class="w-full" [(ngModel)]="mobile"/>
        </div>
        
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="EffectiveDate" class="font-semibold w-6rem">Effective Date&nbsp;<span class="text-danger">*</span></label>
            <p-calendar  dateFormat="dd/mm/yy" inputId="EffectiveDate" class="w-full" styleClass="w-full" appendTo="body"  [(ngModel)]="effectiveDate" /> 
        </div>

        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Remarks" class="font-semibold w-6rem">Remarks</label>
            <textarea pInputTextarea id="Remarks" class="w-full" [(ngModel)]="remarks"></textarea>
        </div>

        <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
            <label for="ExcemptedYN" class="font-semibold w-6rem">Status&nbsp;<span class="text-danger">*</span></label>
            <div class="flex flex-warp">
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="Yes" value="Y"  inputId="Active" [(ngModel)]="statusValue"></p-radioButton>
                    <span for="Active" class="ml-1">Active</span>
                </div>
                <div class="flex align-items-center mr-1">
                    <p-radioButton name="No" value="N"  inputId="DeActive" [(ngModel)]="statusValue"></p-radioButton>
                    <span for="DeActive" class="ml-1">DeActive</span>
                </div>
            </div>
        </div>
    </div>
    <div class="flex justify-content-center gap-2">
        <p-button label="Cancel" styleClass="p-button-outlined" (click)="branchDetailsPopup=false" />
        <p-button label="Submit" (click)="onFormSubmit()" />
    </div>
</p-dialog>
<p-dialog  header="Branch Search" [modal]="true"  [(visible)]="branchSPDetailsPopup"  [style]="{ width: '80rem' }" >
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="RegulatoryCode" class="font-semibold w-6rem">Regulatory Code</label>
            <div class="p-inputgroup">
                <input type="text" id="RegulatoryCode" pInputText placeholder="Enter Your Regulatory Code" (keyup)="searchBranchName('change',$event.target.value,null)" [(ngModel)]="searchBranchValue" />
            </div>
        </div>
    </div>
    <ng-container *ngIf="SalePointCodeList.length==0 && searchBranchValue">
        <div class="flex flex-warp justify-content-center">
            <b>No Branch Available</b>
        </div>
    </ng-container>
    <ng-container *ngIf="SalePointCodeList.length!=0">
        <p-table [value]="SalePointCodeList"  [tableStyle]="{'min-width': '60rem'}" *ngIf="existingProduct"  [paginator]="true" [rows]="5">
            <ng-template pTemplate="header">
                <tr>
                    <th>Select</th>
                    <th>Branch Name</th>
                    <th>Salepoint Code</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product>
                <tr>
                    <td>
                        <mat-radio-button [id]="'type'+i"
                            [name]="'customBranchRadio'+i" (change)="se(customer)">
                        </mat-radio-button>
                    </td>
                    <td>{{product.CodeDesc}}</td>
                    <td>{{product.Code}}</td>
                </tr>
            </ng-template>
        </p-table>
    </ng-container>
    <ng-template pTemplate="summary" >
        <div class="flex justify-content-center gap-2">
            <p-button label="Cancel" styleClass="p-button-outlined" (click)="branchSPDetailsPopup=!branchSPDetailsPopup" />
            <p-button label="Submit" *ngIf="selectedSPCode" (click)="onSaveBranchName()" />
        </div>
    </ng-template>
</p-dialog>



<p-dialog  header="Product" [modal]="true"  [(visible)]="productPopup"  [style]="{ width: '90rem' }" >
    <p-table #dtEmployeeProduct [value]="newList"  [tableStyle]="{'min-width': '60rem'}" *ngIf="existingProduct"
    [globalFilterFields]="['ProductName','SumInsuredEnd','CommissionPercent','BackDays','EffectiveDateStart']"  [paginator]="true" [rows]="5">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                Existing Products
                <div class="flex flex-warp align-items-center justify-content-end">
                    <p-button icon="pi pi-pencil" label="Edit/Remove Product" (click)="showDialogBrokerDetails('EditProduct')" styleClass="p-button-outlined" />&nbsp;&nbsp;
                    <p-button icon="pi pi-plus" label="Add Product" (click)="showDialogBrokerDetails('AddProduct')" />
                </div>
                <div class="table-header">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" (input)="dtEmployeeProduct.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                    </span>
                </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Product Name</th>
                <th>Max SumInsured</th>
                <th>Commission (%)</th>
                <th>Backdays</th>
                <th>Status</th>
                <th>Start Date</th>
                <th>Endrosement</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product>
            <tr>
                <td>
                    <ng-container *ngIf="product.ProductId!='5'">
                        {{product.ProductName}}
                    </ng-container>
                    <ng-container *ngIf="product.ProductId=='5'">
                        {{product.ProductName}}&nbsp;-&nbsp;{{product.PolicyTypeDesc}}
                    </ng-container>
                </td>
                <td>{{product.SumInsuredEnd}}</td>
                <td>{{product.CommissionPercent}}</td>
                <td>{{product.BackDays}}</td>
                <td *ngIf="product.Status=='Y'">Active</td><td *ngIf="product.Status=='N'">DeActive</td>
                <td>{{product.EffectiveDateStart}}</td>
                <td>
                    <button pButton pRipple icon="pi pi-cog" title="Configure" (click)="onGetEndorsement(product)"  class="p-button-outlined" ></button>
                </td>
            </tr>
        </ng-template>
    </p-table> 
    <ng-container *ngIf="productEndorsement">
        <div class="grid">
            <div class="col-12 lg:col-4 md:col-4 lg:col-4">
                <label for="Channel">Endorsement Category&nbsp;<span class="text-danger">*</span></label>
                <p-dropdown  class="w-full" styleClass="w-full" [options]="categoryList"  [(ngModel)]="categoryId" optionLabel="CodeDesc" optionValue="Code"  >
                </p-dropdown> 
            </div>
        </div>
        <p-table #dtEmployeeEndt [tableStyle]="{'min-width': '80rem'}" [value]="endorseData" [scrollable]="true" 
        [globalFilterFields]="['ProductName','SumInsuredEnd','CommissionPercent','BackDays','EffectiveDateStart']" [paginator]="true" [rows]="5">
            <ng-template pTemplate="caption">
                <div class="flex align-items-center justify-content-between">
                    Endorsements
                    <div class="table-header">
                        <span class="p-input-icon-left">
                            <i class="pi pi-search"></i>
                            <input pInputText type="text" (input)="dtEmployeeEndt.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                        </span>
                    </div>
                </div>
            </ng-template>
            <ng-template pTemplate="header">
                <tr>
                    <th>Select</th>
                    <th>Type</th>
                    <th>CoreApp Code</th>
                    <th>Regulatory Code</th>
                    <th>Effective Date</th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-product let-i="rowIndex">
                <tr>
                    <td>
                        <mat-checkbox class="example-margin text-center" [checked]="onCheckEndorseSelect(product)" (change)="onSelectProduct(product,$event.checked,i)">
                        </mat-checkbox> 
                    </td>
                    <td>{{product.EndtType}}</td>
                    <td>{{product.CoreAppCode}}</td>
                    <td>{{product.RegulatoryCode}}</td>
                    <td>{{product.EffectiveDateStart}}</td>
                </tr>
            </ng-template>
        </p-table>
        <div class="flex flex-warp justify-content-center gap-2">
            <p-button label="Cancel" styleClass="p-button-outlined" (click)="productEndorsement=!productEndorsement;existingProduct=!existingProduct" />
                <p-button label="Submit" (click)="onsubmitEndorsement()" />
        </div>
    </ng-container>
    <p-table #dtEmployeeProductAdd [tableStyle]="{'min-width': '80rem'}" *ngIf="addProduct" [value]="newslist" [scrollable]="true" 
    [globalFilterFields]="['ProductName','SumInsuredEnd','CommissionPercent','BackDays','EffectiveDateStart']" [paginator]="true" [rows]="5">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                Add New Products
                <div class="table-header">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" (input)="dtEmployeeProductAdd.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                    </span>
                </div>
                <!-- <div class="flex flex-warp align-items-center justify-content-end">
                    <p-button icon="pi pi-pencil" label="Edit/Remove Product" styleClass="p-button-outlined" />&nbsp;&nbsp;
                    <p-button icon="pi pi-plus" label="Add Product"  />
                </div> -->
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Select</th>
                <th>Product Name</th>
                <th>Max SumInsured</th>
                <th>Commission (%)</th>
                <th>Backdays</th>
                <th>CreditYN</th>
                <th>CheckerYN</th>
                <th>Status</th>
                <th>Effective Date</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-i="rowIndex">
            <tr>
                <td>
                    <mat-checkbox class="example-margin text-center"  [checked]="checkSelectedProducts(product)" (change)="onChangeSelectedProduct(product,$event.checked,i)">
                                                       
                    </mat-checkbox> 
                </td>
                <td>
                    <ng-container *ngIf="product.ProductId!='5'">
                        {{product.ProductName}}
                    </ng-container>
                    <ng-container *ngIf="product.ProductId=='5'">
                        {{product.ProductName}}&nbsp;-&nbsp;{{product.PolicyTypeDesc}}
                    </ng-container>
                </td>
                <td>
                    <input pInputText id="sumInsured" class="w-full" [(ngModel)]="product.SumInsuredEnd" maxlength="16" />
                </td>
                <td>
                    <input pInputText id="CommissionPercent" class="w-full" [(ngModel)]="product.CommissionPercent" />
                </td>
                <td> <input pInputText id="BackDays" class="w-full" [(ngModel)]="product.BackDays" /></td>
                <td>
                    <div class="input-control-container">
                        <div class="input-form-radio-box mt-2">
                            <div class="radio-toolbar1 radio-toolbar">
                                <input [id]="'CreditYes'+i" type="radio" [name]="'Credit'+i"  [(ngModel)]="product.CreditYn" value="Y">
                                <label [for]="'CreditYes'+i" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Yes</label>
                                <input  [id]="'CreditNo'+i" type="radio" [name]="'Credit'+i" [(ngModel)]="product.CreditYn"  value="N" >
                                <label [for]="'CreditNo'+i" ><img style="max-width: 30px;max-height: 10px;">No</label>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="input-control-container">
                        <div class="input-form-radio-box mt-2">
                            <div class="radio-toolbar1 radio-toolbar">
                                <input [id]="'CheckerYes'+i" type="radio" [name]="'Checker'+i"  [(ngModel)]="product.CheckerYn" value="Y">
                                <label [for]="'CheckerYes'+i" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Yes</label>
                                <input  [id]="'CheckerNo'+i" type="radio" [name]="'Checker'+i" [(ngModel)]="product.CheckerYn"  value="N" >
                                <label [for]="'CheckerNo'+i" ><img style="max-width: 30px;max-height: 10px;">No</label>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="input-control-container">
                        <div class="input-form-radio-box mt-2">
                            <div class="radio-toolbar1 radio-toolbar">
                                <input [id]="'StatusYes'+i" type="radio" [name]="'status'+i" [(ngModel)]="product.Status"  value="Y">
                                <label [for]="'StatusYes'+i" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Active</label>
                                <input  [id]="'StatusNo'+i" type="radio" [name]="'status'+i" [(ngModel)]="product.Status"  value="N" >
                                <label [for]="'StatusNo'+i" ><img style="max-width: 30px;max-height: 10px;">DeActive</label>
                            </div>
                        </div>
                    </div>  
                </td>
                <td style="min-width: 100px">
                    <p-calendar  [showIcon]="true" [inputId]="'icondisplay'+i" dateFormat="dd/mm/yy" (onSelect)="changeEffectiveDate(product)" appendTo="body" styleClass="w-full" [showButtonBar]="true" [(ngModel)]="product.EffectiveDateStart" class="w-full"/>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary" >
            <div class="flex justify-content-center gap-2">
                <p-button label="Cancel" styleClass="p-button-outlined" (click)="showDialogBrokerDetails('ProductCancel',null)" />
                <p-button label="Submit" (click)="onSaveProductDetails()" />
            </div>
        </ng-template>
    </p-table> 
    <p-table #dtEmployeeProductEdit [tableStyle]="{'min-width': '60rem'}" *ngIf="editProduct" [value]="newList" [scrollable]="true"
    [globalFilterFields]="['ProductName','SumInsuredEnd','CommissionPercent','BackDays','EffectiveDateStart']"  [paginator]="true" [rows]="5">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                Edit/Remove Products
                <div class="table-header">
                    <span class="p-input-icon-left">
                        <i class="pi pi-search"></i>
                        <input pInputText type="text" (input)="dtEmployeeProductEdit.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                    </span>
                </div>
                <!-- <div class="flex flex-warp align-items-center justify-content-end">
                    <p-button icon="pi pi-pencil" label="Edit/Remove Product" styleClass="p-button-outlined" />&nbsp;&nbsp;
                    <p-button icon="pi pi-plus" label="Add Product"  />
                </div> -->
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Select</th>
                <th>Product Name</th>
                <th>Max SumInsured</th>
                <th>Commission (%)</th>
                <th>Backdays</th>
                <th>CreditYN</th>
                <th>CheckerYN</th>
                <th>Status</th>
                <th>Effective Date</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-product let-i="rowIndex">
            <tr>
                <td>
                    <mat-checkbox class="example-margin text-center" [checked]="checkSelectedProductss(product)" (change)="onChangeSelectedProduc(product,$event.checked,j)">
                                                       
                    </mat-checkbox> 
                </td>
                <td>
                    <ng-container *ngIf="product.ProductId!='5'">
                        {{product.ProductName}}
                    </ng-container>
                    <ng-container *ngIf="product.ProductId=='5'">
                        {{product.ProductName}}&nbsp;-&nbsp;{{product.PolicyTypeDesc}}
                    </ng-container>
                </td>
                <td>
                    <input pInputText id="sumInsured" class="w-full" [(ngModel)]="product.SumInsuredEnd" maxlength="16" />
                </td>
                <td>
                    <input pInputText id="CommissionPercent" class="w-full" [(ngModel)]="product.CommissionPercent" />
                </td>
                <td> <input pInputText id="BackDays" class="w-full" [(ngModel)]="product.BackDays" /></td>
                <td>
                    <div class="input-control-container">
                        <div class="input-form-radio-box mt-2">
                            <div class="radio-toolbar1 radio-toolbar">
                                <input [id]="'CreditYes'+i" type="radio" [name]="'Credit'+i"  [(ngModel)]="product.CreditYn" value="Y">
                                <label [for]="'CreditYes'+i" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Yes</label>
                                <input  [id]="'CreditNo'+i" type="radio" [name]="'Credit'+i" [(ngModel)]="product.CreditYn"  value="N" >
                                <label [for]="'CreditNo'+i" ><img style="max-width: 30px;max-height: 10px;">No</label>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="input-control-container">
                        <div class="input-form-radio-box mt-2">
                            <div class="radio-toolbar1 radio-toolbar">
                                <input [id]="'CheckerYes'+i" type="radio" [name]="'Checker'+i"  [(ngModel)]="product.CheckerYn" value="Y">
                                <label [for]="'CheckerYes'+i" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Yes</label>
                                <input  [id]="'CheckerNo'+i" type="radio" [name]="'Checker'+i" [(ngModel)]="product.CheckerYn"  value="N" >
                                <label [for]="'CheckerNo'+i" ><img style="max-width: 30px;max-height: 10px;">No</label>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="input-control-container">
                        <div class="input-form-radio-box mt-2">
                            <div class="radio-toolbar1 radio-toolbar">
                                <input [id]="'StatusYes'+i" type="radio" [name]="'status'+i" [(ngModel)]="product.Status"  value="Y">
                                <label [for]="'StatusYes'+i" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Active</label>
                                <input  [id]="'StatusNo'+i" type="radio" [name]="'status'+i" [(ngModel)]="product.Status"  value="N" >
                                <label [for]="'StatusNo'+i" ><img style="max-width: 30px;max-height: 10px;">DeActive</label>
                            </div>
                        </div>
                    </div>  
                </td>
                <td style="min-width: 100px">
                    <p-calendar  [showIcon]="true" [inputId]="'icondisplay'+i" dateFormat="dd/mm/yy" (onSelect)="changeEffectiveDate(product)" appendTo="body" styleClass="w-full" [(ngModel)]="product.EffectiveDateStart" class="w-full"/>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary" >
            <div class="flex justify-content-center gap-2">
                <p-button label="Cancel" styleClass="p-button-outlined" (click)="showDialogBrokerDetails('ProductCancel',null)" />
                <p-button label="Submit" (click)="onSaveProductDetails()" />
            </div>
        </ng-template>
    </p-table> 
</p-dialog>



<p-dialog  header="Cover"  [modal]="true"  [(visible)]="coverPopup"  [style]="{ width: '75rem' }">
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Insurance" class="font-semibold w-6rem">Product&nbsp;<span class="text-danger">*</span></label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="productValue" [options]="productList"    
                    (onChange)="onChangeProduct()"    optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Insurance" class="font-semibold w-6rem">Section&nbsp;<span class="text-danger">*</span></label>
            <p-dropdown  class="w-full" styleClass="w-full" [(ngModel)]="sectionValue" [options]="sectionList"    
            (onChange)="onChangeSection()"    optionLabel="CodeDesc" optionValue="Code" >
            </p-dropdown> 
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4">
            <label for="Insurance" class="font-semibold w-6rem">Type&nbsp;<span class="text-danger">*</span></label>
            <div class="input-control-container">
                <div class="input-form-radio-box mt-2">
                    <div class="radio-toolbar1 radio-toolbar">
                        <input id="CoverTypeYes" type="radio" name="CoverType" [(ngModel)]="CoverType" (change)="onChangeSection()"  value="1">
                        <label for="CoverTypeYes" style="background-color: primary;" ><img style="max-width: 30px;max-height: 10px;" >Included</label>
                        <input  id="CoverTypeNo" type="radio" name="CoverType" [(ngModel)]="CoverType" (change)="onChangeSection()"  value="2" >
                        <label for="CoverTypeNo" ><img style="max-width: 30px;max-height: 10px;">Excluded</label>
                    </div>
                </div>
            </div>  
        </div>
        <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="selectedCoverListInc.length!=0 || selectedCoverListExc.length!=0">
            <label for="Insurance" class="font-semibold w-6rem">Effective Date&nbsp;<span class="text-danger">*</span></label>
            <p-calendar  [showIcon]="true" [inputId]="'icondisplay'" dateFormat="dd/mm/yy" appendTo="body" styleClass="w-full" [(ngModel)]="coverEffectiveDate" class="w-full"/>
            <div class="input-form-error" *ngIf="coverEffectiveError">
                <div class="error-text text-danger">
                  Please Select Valid Effective Date
                </div>
            </div>
        </div>
    </div>
    <p-table [value]="tableData" [tableStyle]="{'min-width': '60rem'}" [rows]="5" [paginator]="true">
        <ng-template pTemplate="header">
            <tr>
                <th>Select</th>
                <th>Cover</th>
                <th>Start Date</th>
                <th>End Date</th>
                <th>Status</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-cover>
            <tr>
                <td>
                    <mat-checkbox class="example-margin text-center" (change)="onSelectCustomer(cover,$event.checked)">
                    </mat-checkbox> 
                </td>
                <td>{{cover.CoverName}}</td>
                <td>{{cover.EffectiveDateStart}}</td>
                <td>{{cover.EffectiveDateEnd}}</td>
                <td><ng-container *ngIf="cover.Status=='Y'">Active</ng-container><ng-container *ngIf="cover.Status=='N'">DeActive</ng-container><ng-container *ngIf="cover.Status=='P'">Pending</ng-container> </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary" >
            <div class="flex justify-content-center gap-2">
                <p-button label="Cancel" styleClass="p-button-outlined" (click)="coverPopup=!coverPopup" />&nbsp;&nbsp;
                <p-button label="Submit" *ngIf="selectedCoverListInc.length!=0 || selectedCoverListExc.length!=0" (click)="onSaveCover()" />
                <!-- <p-button label="Submit" /> -->
            </div>
        </ng-template>
    </p-table> 
</p-dialog>
<p-dialog  header="Deposit" [modal]="true"  [(visible)]="depositPopup"  [style]="{ width: '75rem' }"  >
    <p-table [value]="branchDatas" [tableStyle]="{'min-width': '60rem'}" *ngIf="paymentTable" [rows]="5"
    [paginator]="true">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                
                Existing Deposit Details
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>CBC NO</th>
                <th>Broker</th>
                <th>Deposit Amount</th>
                <th>Utilised Amount</th>
                <th>Policy RefundAmt</th>
                <th>Status</th>
                <th>Action</th>
                <!-- <th>View</th> -->
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-data>
            <tr>
                <td>{{data.CbcNo}}</td>
                <td>{{data.BrokerName}}</td>
                <td>{{data.DepositAmount}}</td>
                <td>{{data.DepositUtilised}}</td>
                <td>{{data.PolicyRefundAmt}}</td>
                <td *ngIf="data.Status=='Y'">Active</td><td *ngIf="data.Status=='N'">DeActive</td>
                <td> <p-button icon="pi pi-pencil"  (click)="showDialogBrokerDetails1('DepositAdd',data)" /></td>
            </tr>
        </ng-template>
    </p-table> 

    <p-table [value]="CbcDatas" [tableStyle]="{'min-width': '60rem'}" *ngIf="paymentTableAdd" [rows]="5"
    [paginator]="true">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                Existing Payment Details
                <p>CBCNO:{{cbcnos}}</p>
                <p-button icon="pi pi-plus" label="Add New" (click)="showDialogBrokerDetails('paymentTableAdd')" />
            </div>
        </ng-template>
        <ng-template pTemplate="header">
            <tr>
                <th>Deposit No</th>
                <th>Deposit Type</th>
                <th>Payment Type</th>
                <th>Name</th>
                <th>Entry Date</th>
                <th>Amount</th>

            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-cbc>
            <tr>
                <td>{{cbc.DepositNo}}</td>
                <td>{{cbc.DepositType}}</td>
                <td>{{cbc.PaymentTypeDesc}}</td>
                <td>{{cbc.PayeeName}}</td>
                <td>{{cbc.EntryDate}}</td>
                <td>{{cbc.Premium}}</td>
            </tr>
        </ng-template>
        <ng-template pTemplate="summary" >
            <div class="flex justify-content-center gap-2">
                <p-button label="Back" styleClass="p-button-outlined" (click)="showDialogBrokerDetails('PaymentAddCancel')" />
                <!-- <p-button label="Submit" /> -->
            </div>
        </ng-template>
    </p-table> 
</p-dialog>
<p-dialog  header="Existing Payment details" [modal]="true"  [(visible)]="ExistingPaymentAddPopup"  [style]="{ width: '75rem' }"  >
<div class="grid">
    <div class="col-12 lg:col-4 md:col-4 lg:col-4 radioList">
        <label for="Cash" class="font-semibold w-6rem">Deposit Type *</label>
        <div class="flex flex-warp">
            <div class="flex align-items-center mr-1">
                <p-radioButton name="Deposit" value="Deposit" [(ngModel)]="deposiType" value="C"  inputId="Deposit"></p-radioButton>
                <span for="Deposit" class="ml-1">Deposit</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="Refund" value="N" [(ngModel)]="deposiType" value="R" inputId="Refund"></p-radioButton>
                <span for="Refund" class="ml-1">Refund</span>
            </div>
        </div>
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="deposiType=='C'">
        <label for="Insurance" class="font-semibold w-6rem">Payment Type *</label>
        <p-dropdown  class="w-full" styleClass="w-full" [options]="PaymentList"  [(ngModel)]="paymentid"
            optionLabel="CodeDesc" optionValue="Code" >
        </p-dropdown> 
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="deposiType=='C' && paymentid=='1'">
        <label for="PayeeName" class="font-semibold w-6rem">PayeeName</label>
        <input pInputText id="PayeeName" [(ngModel)]="payeeName" class="w-full" />
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="deposiType=='C' && paymentid=='1'">
        <label for="DepositAmount" class="font-semibold w-6rem">Deposit Amount</label>
        <input pInputText id="DepositAmount" class="w-full" [(ngModel)]="Premium" />
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="paymentid=='2' && deposiType=='C'">
        <label for="ChequeNo" class="font-semibold w-6rem">Cheque No</label>
        <input pInputText id="ChequeNo" class="w-full" [(ngModel)]="chequeno" />
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="paymentid=='2' && deposiType=='C'">
        <label for="Amount" class="font-semibold w-6rem">Amount</label>
        <input pInputText id="Amount" class="w-full" [(ngModel)]="Premium" />
    </div>
    
    
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="paymentid=='2' && deposiType=='C'">
        <label for="ChequeDate" class="font-semibold w-6rem">Cheque Date</label>
        <p-calendar  dateFormat="dd/mm/yy" inputId="ChequeDate" [(ngModel)]="chequeDate" class="w-full" styleClass="w-full"  appendTo="body" /> 
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="paymentid=='2' && deposiType=='C'">
        <label for="MICR" class="font-semibold w-6rem">MICR No</label>
        <input pInputText id="MICR" class="w-full" [(ngModel)]="micrno" />
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="paymentid=='2' && deposiType=='C'">
        <label for="Receipt" class="font-semibold w-6rem">Receipt No</label>
        <input pInputText id="Receipt" class="w-full" [(ngModel)]="referenceno" />
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="deposiType=='R'">
        <label for="RefundAmount" class="font-semibold w-6rem">Refund Amount</label>
        <input pInputText id="RefundAmount" [(ngModel)]="Premium" class="w-full" />
    </div>
    
    
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" *ngIf="deposiType=='R'"> 
        <label for="RefundDate" class="font-semibold w-6rem">Refund Date</label>
        <p-calendar  dateFormat="dd/mm/yy" inputId="RefundDate" [(ngModel)]="refundDate" class="w-full" styleClass="w-full" appendTo="body" /> 
    </div>
</div>
<div class="flex justify-content-center gap-2">
    <p-button label="Cancel" styleClass="p-button-outlined" (click)="showDialogBrokerDetails('paymentTableAddCancel')" />
    <p-button label="Submit" (click)="getSave()" />
</div>
</p-dialog>








<p-dialog  header="Payment Types " [modal]="true"  [(visible)]="paymentTypesPopup"  [style]="{ width: '75rem' }">
<div class="grid justify-content-end">
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" >
        <label >Product</label>
        <p-dropdown  class="w-full" styleClass="w-full"   [options]="productData" [(ngModel)]="existProduct"
                    optionLabel="ProductName" optionValue="ProductId" (onChange)="getExistingPayment()" >
        </p-dropdown> 
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4" >
        <label >Branch</label>
        <p-dropdown  class="w-full" styleClass="w-full"   [options]="branchList" 
                    optionLabel="CodeDesc" optionValue="Code" (onChange)="getExistingPayment()" >
        </p-dropdown> 
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4 " >
    <p-button icon="pi pi-plus"  styleClass="p-button-outlined" label="Add Payment" (click)="paymentEdit(null)" />
</div>
</div>
    <p-table [value]="paymentData" [tableStyle]="{'min-width': '60rem'}" [rows]="5"
    [paginator]="true">
        <ng-template pTemplate="caption">
            <div class="flex align-items-center justify-content-between">
                <P></P>
                <!-- <p-button icon="pi pi-plus"  label="Add" (click)="ConfigPopUp('paymentDetail')" /> -->
            </div>
        </ng-template>
        <ng-template pTemplate="header" >
            <tr>
                <th>Cash Y/N</th>
                <th>Credit Y/N</th>
                <th>Cheque Y/N</th>
                <th>UserType</th>
                <th>SubUserType</th>
                <th>Effective Date</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-pay>
            <tr>
                <td>{{pay.CashYn}}</td>
                <td>{{pay.CreditYn}}</td>
                <td>{{pay.ChequeYn}}</td>
                <td>{{pay.UserType}}</td>
                <td>{{pay.SubUserType}}</td>
                <td>{{pay.EffectiveDateStart}}</td>
                <td *ngIf="pay.Status=='Y'">Active</td><td *ngIf="pay.Status=='N'">DeActive</td>
                <td><p-button icon="pi pi-pencil"  styleClass="p-button-outlined" (click)="paymentEdit(pay)" /></td>
            </tr>
        </ng-template>
        
    </p-table> 
</p-dialog>






<p-dialog  header="Payment Types " [modal]="true"  [(visible)]="paymentTypesDetailPopup"  [style]="{ width: '50rem' }">
<div class="grid">
    <div class="col-12 lg:col-3 md:col-3 lg:col-3">
        <label for="Cash" class="font-semibold w-6rem">Cash </label><b><i class="pi pi-check-circle" *ngIf="CashYn=='Y'" style="color: green"></i></b>
       
        <div class="p-2">
            <p-inputSwitch [(ngModel)]="SwitchCashYn" (click)="SwitchCash()" />
        </div>
    </div>
    <div class="col-12 lg:col-3 md:col-3 lg:col-3 ">
        <label for="Cash" class="font-semibold w-6rem">Credit </label>
        <div class="p-2">
            <p-inputSwitch [(ngModel)]="SwitchCreditYn" (click)="SwitchCash()" />
        </div>
    </div>
    <div class="col-12 lg:col-3 md:col-3 lg:col-3 ">
        <label for="Cash" class="font-semibold w-6rem">Cheque </label>
        <div class="p-2">
            <p-inputSwitch [(ngModel)]="SwitchChequeYn" (click)="SwitchCash()" />
        </div>
        <!-- <div class="flex flex-warp">
            <div class="flex align-items-center mr-1">
                <p-radioButton name="ChequeYes" value="Y" [(ngModel)]="ChequeYn" inputId="Cheque"></p-radioButton>
                <span for="ChequeYes" class="ml-1">Yes</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="ChequeNo" value="N" [(ngModel)]="ChequeYn" inputId="Cheque"></p-radioButton>
                <span for="ChequeNo" class="ml-1">No</span>
            </div>
        </div> -->
    </div>
    <div class="col-12 lg:col-3 md:col-3 lg:col-3">
        <label for="Cash" class="font-semibold w-6rem">Online </label>
        <div class="p-2">
            <p-inputSwitch [(ngModel)]="SwitchOnlineYn" (click)="SwitchCash()" />
        </div>
        <!-- <div class="flex flex-warp">
            <div class="flex align-items-center mr-1">
                <p-radioButton name="OnlineYnYes" value="Y" [(ngModel)]="OnlineYn" inputId="OnlineYn"></p-radioButton>
                <span for="OnlineYnYes" class="ml-1">Yes</span>
            </div>
            <div class="flex align-items-center mr-1">
                <p-radioButton name="OnlineYnNo" value="N" [(ngModel)]="OnlineYn" inputId="OnlineYn"></p-radioButton>
                <span for="OnlineYnNo" class="ml-1">No</span>
            </div>
        </div> -->
    </div>
    <div class="col-12 lg:col-3 md:col-3 lg:col-3 ">
        <label for="Cash" class="font-semibold w-6rem">Mobile Money </label>
        <div class="p-2">
            <p-inputSwitch [(ngModel)]="SwitchMobileYn" (click)="SwitchCash()" />
        </div>
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="EffectiveDate" class="font-semibold w-6rem">Effective Date *</label>
        <p-calendar  dateFormat="dd/mm/yy"  [showIcon]="true" [minDate]="minDate" [(ngModel)]="EffectiveDateStart" inputId="icondisplay"  styleClass="w-full"  class="w-full" appendTo="body" />
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="Cash" class="font-semibold w-6rem">Status </label>
        <div class="flex flex-warp">
        <div class="flex align-items-center mr-1">
            <p-radioButton name="StatusY" value="Y" [(ngModel)]="Status" inputId="Status"></p-radioButton>
            <span for="StatusY" class="ml-1">Yes</span>
        </div>
        <div class="flex align-items-center mr-1">
            <p-radioButton name="StatusN" value="N" [(ngModel)]="Status" inputId="Status"></p-radioButton>
            <span for="StatusN" class="ml-1">No</span>
        </div>
    </div>
    </div>
</div>
<div class="flex justify-content-center gap-2">
    <p-button label="Cancel" styleClass="p-button-outlined" (click)="paymentTypesDetailPopup=!paymentTypesDetailPopup" />
    <p-button label="Submit" (click)="onProceedPayment()" />
</div>
</p-dialog>







<p-dialog header="Customer Search"  [modal]="true" [(visible)]="customerSearchvisible" 
        [position]="position" 
        [style]="{ width: '70rem' }">
    <div class="grid">
        <div class="col-12 lg:col-4 md:col-4 mt-5 mb-5">
            <input pInputText type="text"   class="w-full" 
            styleClass="w-full"  [(ngModel)]="searchValue" (input)="onSearchCustomer(searchValue)"
            placeholder="Enter Customer Code / Name"/>
            <div class="input-form-error" *ngIf="searchLengthSection" >
                <div class="error-text text-danger">
                    Enter Atleast 3 Digit / Character to Search
                </div>
            </div>
        </div>
    </div>
        
        <ng-container *ngIf="searchList.length!=0" class="mt-5">
            <p-table [value]="searchList"  #dtEmployee
                     [globalFilterFields]="['CustomerCode','CustomerName']"
                     [tableStyle]="{'min-width':'50rem'}" [paginator]="true" [rows]="5" >
                     <ng-template pTemplate="caption">
                        <div class="flex flex wrap justify-content-end">
                          <div class="table-header">
                              <span class="p-input-icon-left">
                                  <i class="pi pi-search"></i>
                                  <input pInputText type="text" (input)="dtEmployee.filterGlobal($event.target.value, 'contains')" placeholder="Global Search" />
                              </span>
                          </div>
                        </div>
                        
                      </ng-template>
              <ng-template pTemplate="header">
                <tr>
                    <th>Select </th> 
                    <th>Customer Code</th>
                    <th>Customer Name</th>
                </tr>
              </ng-template>
                  <ng-template pTemplate="body" let-customer let-i="rowIndex">
                    <tr>
                      <td>
                        <mat-radio-button [id]="'type'+i"
                            name="customRadio" (change)="selectProduct(customer)">
                        </mat-radio-button></td>
                      <td>{{customer.CustomerCode}}</td>
                      <td>{{customer.CustomerName}}</td>
                    </tr>
                   </ng-template>
            </p-table>
            <div class="flex flex-warp justify-content-end">
                <p-button label="Proceed" *ngIf="sampleCustomerCode!=null" (click)="SaveCustomer()" />
            </div>
           
        </ng-container>
        <ng-container *ngIf="searchValue && searchList.length==0">
            <div class="text-center">
                No Data Available
            </div>
        </ng-container>
       
</p-dialog>

<p-dialog  header="Change Password" [modal]="true"  [(visible)]="passwordPopup"  [style]="{ width: '90rem' }" >
   <div class="grid">
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="username">New Password*</label><br>
        <input pInputText type="Password"   class="w-full" [(ngModel)]="password"
        styleClass="w-full"  
        placeholder="Enter New Password"/>
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="username">Re-Enter New Password*</label><br>
        <input pInputText type="Password"   class="w-full" [(ngModel)]="repassword"
        styleClass="w-full" 
        placeholder="Enter Re-Enter New Password"/>
    </div>
    <div class="col-12 lg:col-4 md:col-4 lg:col-4">
        <label for="EffectiveDate" class="font-semibold w-6rem">Effective Date *</label>
        <p-calendar  appendTo="body"
        [showIcon]="true" 
        inputId="icondisplay" 
        styleClass="w-full"
        [(ngModel)]="effectiveDate"
        dateFormat="dd/mm/yy"
        class="w-full"/>
        <div class="input-form-error" *ngIf="effectiveDateError">
            <div class="error-text text-danger">
              Please  Select Date
            </div>
        </div>
    </div>
    
   </div>
   <div class="flex flex-warp justify-content-center mt-4">
        <p-button label="Submit"  (click)="passChanged()" />
    </div>
</p-dialog>
